<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span> <img class="logo" src="./logo_96.png"> </span>
      <span class="projectname"> Tealeaves </span>
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
      <a href="../html-alectryon/toc.html"> Switch to Alectryon Docs </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Tealeaves.Functors.Batch</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Tealeaves</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Monoid.html#"><span class="id" title="library">Classes.Monoid</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#"><span class="id" title="library">Classes.Categorical.Applicative</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#"><span class="id" title="library">Classes.Categorical.Monad</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#"><span class="id" title="library">Classes.Categorical.ShapelyFunctor</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#"><span class="id" title="library">Classes.Kleisli.TraversableFunctor</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Early.Batch.html#"><span class="id" title="library">Functors.Early.Batch</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Tealeaves.Functors</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Early.List.html#"><span class="id" title="library">Early.List</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Constant.html#"><span class="id" title="library">Constant</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#"><span class="id" title="library">VectorRefinement</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Notations"><span class="id" title="module">Early.Batch.Notations</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Classes.Monoid.html#Notations"><span class="id" title="module">Monoid.Notations</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#Notations"><span class="id" title="module">Applicative.Notations</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#Notations"><span class="id" title="module">Kleisli.TraversableFunctor.Notations</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Notations"><span class="id" title="module">VectorRefinement.Notations</span></a>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Generalizable</span> <span class="id" title="keyword">Variables</span> ψ <span class="id" title="var">ϕ</span> <span class="id" title="var">W</span> <span class="id" title="var">F</span> <span class="id" title="var">G</span> <span class="id" title="var">M</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> <span class="id" title="var">O</span>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <span class="id" title="var">F</span>%<span class="id" title="var">function_scope</span> {<span class="id" title="var">Map</span>} {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}%<span class="id" title="var">type_scope</span> <span class="id" title="var">f</span>%<span class="id" title="var">function_scope</span> <span class="id" title="var">_</span>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#ret"><span class="id" title="definition">ret</span></a> <span class="id" title="var">T</span>%<span class="id" title="var">function_scope</span> {<span class="id" title="var">Return</span>} (<span class="id" title="var">A</span>)%<span class="id" title="var">type_scope</span> <span class="id" title="var">_</span>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> <span class="id" title="var">F</span>%<span class="id" title="var">function_scope</span> {<span class="id" title="var">Pure</span>} {<span class="id" title="var">A</span>}%<span class="id" title="var">type_scope</span> <span class="id" title="var">_</span>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#mult"><span class="id" title="definition">mult</span></a> <span class="id" title="var">F</span>%<span class="id" title="var">function_scope</span> {<span class="id" title="var">Mult</span>} {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}%<span class="id" title="var">type_scope</span> <span class="id" title="var">_</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1013"></a><h1 class="section"><code>foldMap</code> Rewriting Lemmas</h1>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="Batch_foldMap_rewriting" class="idref" href="#Batch_foldMap_rewriting"><span class="id" title="section">Batch_foldMap_rewriting</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="A:1" class="idref" href="#A:1"><span class="id" title="binder">A</span></a> <a id="B:2" class="idref" href="#B:2"><span class="id" title="binder">B</span></a> <a id="C:3" class="idref" href="#C:3"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="foldMap_Batch_rw2" class="idref" href="#foldMap_Batch_rw2"><span class="id" title="lemma">foldMap_Batch_rw2</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `{<a id="H:7" class="idref" href="#H:7"><span class="id" title="binder">Monoid</span></a> <a id="H:7" class="idref" href="#H:7"><span class="id" title="binder">M</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="f:8" class="idref" href="#f:8"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_foldMap_rewriting.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#M:4"><span class="id" title="variable">M</span></a>) (<a id="a:9" class="idref" href="#a:9"><span class="id" title="binder">a</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_foldMap_rewriting.A"><span class="id" title="variable">A</span></a>) (<a id="rest:10" class="idref" href="#rest:10"><span class="id" title="binder">rest</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_foldMap_rewriting.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_foldMap_rewriting.B"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_foldMap_rewriting.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_foldMap_rewriting.C"><span class="id" title="variable">C</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#foldMap"><span class="id" title="definition">foldMap</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_foldMap_rewriting.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_foldMap_rewriting.C"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:8"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#rest:10"><span class="id" title="variable">rest</span></a> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#45a660fcade13f7b83ca57ede582a0d1"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:9"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#foldMap"><span class="id" title="definition">foldMap</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:8"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#rest:10"><span class="id" title="variable">rest</span></a> <a class="idref" href="Tealeaves.Classes.Monoid.html#23f40b1adcf5df7d889fd9b798da390c"><span class="id" title="notation">●</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:8"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:9"><span class="id" title="variable">a</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#foldMap"><span class="id" title="definition">foldMap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#traverse_Batch_rw2"><span class="id" title="lemma">traverse_Batch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_foldMap_rewriting"><span class="id" title="section">Batch_foldMap_rewriting</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1014"></a><h2 class="section"><code>foldMap</code> Rewriting for <code>&lt;⋆&gt; </code></h2>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="foldMap_Batch_map" class="idref" href="#foldMap_Batch_map"><span class="id" title="lemma">foldMap_Batch_map</span></a> {<a id="A:11" class="idref" href="#A:11"><span class="id" title="binder">A</span></a> <a id="B:12" class="idref" href="#B:12"><span class="id" title="binder">B</span></a> <a id="C:13" class="idref" href="#C:13"><span class="id" title="binder">C</span></a> <a id="C':14" class="idref" href="#C':14"><span class="id" title="binder">C'</span></a>: <span class="id" title="keyword">Type</span>}:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `{<a id="H:18" class="idref" href="#H:18"><span class="id" title="binder">Monoid</span></a> <a id="H:18" class="idref" href="#H:18"><span class="id" title="binder">M</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="f:19" class="idref" href="#f:19"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:11"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#M:15"><span class="id" title="variable">M</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="g:20" class="idref" href="#g:20"><span class="id" title="binder">g</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#C:13"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C':14"><span class="id" title="variable">C'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b:21" class="idref" href="#b:21"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:11"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:12"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:13"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#foldMap"><span class="id" title="definition">foldMap</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:12"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:13"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:19"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:21"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#foldMap"><span class="id" title="definition">foldMap</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:12"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C':14"><span class="id" title="variable">C'</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:19"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:11"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:12"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#g:20"><span class="id" title="variable">g</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:21"><span class="id" title="variable">b</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">C'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#foldMap_Batch_rw2"><span class="id" title="lemma">foldMap_Batch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#map_Batch_rw2"><span class="id" title="lemma">map_Batch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#foldMap_Batch_rw2"><span class="id" title="lemma">foldMap_Batch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHb</span> <span class="id" title="var">_</span> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> <span class="id" title="var">g</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="foldMap_Batch_mult_Done" class="idref" href="#foldMap_Batch_mult_Done"><span class="id" title="lemma">foldMap_Batch_mult_Done</span></a> {<a id="A:22" class="idref" href="#A:22"><span class="id" title="binder">A</span></a> <a id="B:23" class="idref" href="#B:23"><span class="id" title="binder">B</span></a> <a id="C:24" class="idref" href="#C:24"><span class="id" title="binder">C</span></a> <a id="D:25" class="idref" href="#D:25"><span class="id" title="binder">D</span></a>: <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;`{<a id="H:29" class="idref" href="#H:29"><span class="id" title="binder">Monoid</span></a> <a id="H:29" class="idref" href="#H:29"><span class="id" title="binder">M</span></a>}(<a id="f:30" class="idref" href="#f:30"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:22"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#M:26"><span class="id" title="variable">M</span></a>):<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="c:31" class="idref" href="#c:31"><span class="id" title="binder">c</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#C:24"><span class="id" title="variable">C</span></a>) (<a id="b2:32" class="idref" href="#b2:32"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:22"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:23"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:25"><span class="id" title="variable">D</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#foldMap"><span class="id" title="definition">foldMap</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:23"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#C:24"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:25"><span class="id" title="variable">D</span></a><a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#f:30"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:31"><span class="id" title="variable">c</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:32"><span class="id" title="variable">b2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#foldMap"><span class="id" title="definition">foldMap</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:30"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:32"><span class="id" title="variable">b2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b2</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#foldMap_Batch_rw2"><span class="id" title="lemma">foldMap_Batch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHb2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfold_ops</span> @<a class="idref" href="Tealeaves.Functors.Constant.html#Pure_const"><span class="id" title="instance">Pure_const</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Monoid.html#monoid_id_r"><span class="id" title="method">monoid_id_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Traverse_Batch1"><span class="id" title="instance">Traverse_Batch1</span></a> <span class="id" title="var">B</span> (<span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <span class="id" title="var">C0</span>) (<a class="idref" href="Tealeaves.Tactics.Prelude.html#const"><span class="id" title="definition">const</span></a> <span class="id" title="var">M</span>) <a class="idref" href="Tealeaves.Functors.Constant.html#Map_const"><span class="id" title="instance">Map_const</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<a id="X:34" class="idref" href="#X:34"><span class="id" title="binder">X</span></a> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">_</span> : <a class="idref" href="Tealeaves.Functors.Batch.html#X:33"><span class="id" title="variable">X</span></a>) ⇒ <a class="idref" href="Tealeaves.Classes.Monoid.html#118a0ae73788a324a953caf13a2d25ca"><span class="id" title="notation">Ƶ</span></a>) <a class="idref" href="Tealeaves.Functors.Constant.html#Mult_const"><span class="id" title="instance">Mult_const</span></a> <span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#foldMap"><span class="id" title="definition">foldMap</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <span class="id" title="var">B</span> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">(</span></a><span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <span class="id" title="var">C0</span><a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">)</span></a>) <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Functors.Batch.html#foldMap_Batch_map"><span class="id" title="lemma">foldMap_Batch_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="foldMap_Batch_mult" class="idref" href="#foldMap_Batch_mult"><span class="id" title="lemma">foldMap_Batch_mult</span></a> {<a id="A:35" class="idref" href="#A:35"><span class="id" title="binder">A</span></a> <a id="B:36" class="idref" href="#B:36"><span class="id" title="binder">B</span></a> <a id="C:37" class="idref" href="#C:37"><span class="id" title="binder">C</span></a> <a id="D:38" class="idref" href="#D:38"><span class="id" title="binder">D</span></a>: <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;`{<a id="H:42" class="idref" href="#H:42"><span class="id" title="binder">Monoid</span></a> <a id="H:42" class="idref" href="#H:42"><span class="id" title="binder">M</span></a>}(<a id="f:43" class="idref" href="#f:43"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:35"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#M:39"><span class="id" title="variable">M</span></a>):<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b1:44" class="idref" href="#b1:44"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:35"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:36"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:37"><span class="id" title="variable">C</span></a>) (<a id="b2:45" class="idref" href="#b2:45"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:35"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:36"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:38"><span class="id" title="variable">D</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#foldMap"><span class="id" title="definition">foldMap</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:36"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#C:37"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:38"><span class="id" title="variable">D</span></a><a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#f:43"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#b1:44"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:45"><span class="id" title="variable">b2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#foldMap"><span class="id" title="definition">foldMap</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:43"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:44"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Classes.Monoid.html#23f40b1adcf5df7d889fd9b798da390c"><span class="id" title="notation">●</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#foldMap"><span class="id" title="definition">foldMap</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:43"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:45"><span class="id" title="variable">b2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b2</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Functors.Batch.html#foldMap_Batch_map"><span class="id" title="lemma">foldMap_Batch_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfold_ops</span> @<a class="idref" href="Tealeaves.Functors.Constant.html#Pure_const"><span class="id" title="instance">Pure_const</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Monoid.html#monoid_id_l"><span class="id" title="method">monoid_id_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#foldMap_Batch_rw2"><span class="id" title="lemma">foldMap_Batch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Classes.Monoid.html#monoid_assoc"><span class="id" title="method">monoid_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHb2</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">IHb2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#foldMap_Batch_mult_Done"><span class="id" title="lemma">foldMap_Batch_mult_Done</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#foldMap_Batch_mult_Done"><span class="id" title="lemma">foldMap_Batch_mult_Done</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#foldMap_Batch_rw2"><span class="id" title="lemma">foldMap_Batch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfold_ops</span> @<a class="idref" href="Tealeaves.Functors.Constant.html#Pure_const"><span class="id" title="instance">Pure_const</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Monoid.html#monoid_id_r"><span class="id" title="method">monoid_id_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Traverse_Batch1"><span class="id" title="instance">Traverse_Batch1</span></a> <span class="id" title="var">B</span> (<span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <span class="id" title="var">C0</span>) (<a class="idref" href="Tealeaves.Tactics.Prelude.html#const"><span class="id" title="definition">const</span></a> <span class="id" title="var">M</span>) <a class="idref" href="Tealeaves.Functors.Constant.html#Map_const"><span class="id" title="instance">Map_const</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<a id="X:47" class="idref" href="#X:47"><span class="id" title="binder">X</span></a> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">_</span> : <a class="idref" href="Tealeaves.Functors.Batch.html#X:46"><span class="id" title="variable">X</span></a>) ⇒ <a class="idref" href="Tealeaves.Classes.Monoid.html#118a0ae73788a324a953caf13a2d25ca"><span class="id" title="notation">Ƶ</span></a>) <a class="idref" href="Tealeaves.Functors.Constant.html#Mult_const"><span class="id" title="instance">Mult_const</span></a> <span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#foldMap"><span class="id" title="definition">foldMap</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <span class="id" title="var">B</span> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">(</span></a><span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <span class="id" title="var">C0</span><a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">)</span></a>) <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Functors.Batch.html#foldMap_Batch_map"><span class="id" title="lemma">foldMap_Batch_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="foldMap_Batch_ap_rw2" class="idref" href="#foldMap_Batch_ap_rw2"><span class="id" title="lemma">foldMap_Batch_ap_rw2</span></a> {<a id="A:48" class="idref" href="#A:48"><span class="id" title="binder">A</span></a> <a id="B:49" class="idref" href="#B:49"><span class="id" title="binder">B</span></a>: <span class="id" title="keyword">Type</span>}:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `{<a id="H:53" class="idref" href="#H:53"><span class="id" title="binder">Monoid</span></a> <a id="H:53" class="idref" href="#H:53"><span class="id" title="binder">M</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="f:54" class="idref" href="#f:54"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:48"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#M:50"><span class="id" title="variable">M</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="X:55" class="idref" href="#X:55"><span class="id" title="binder">X</span></a> <a id="Y:56" class="idref" href="#Y:56"><span class="id" title="binder">Y</span></a>: <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lhs:57" class="idref" href="#lhs:57"><span class="id" title="binder">lhs</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:48"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:49"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#X:55"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Y:56"><span class="id" title="variable">Y</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="rhs:58" class="idref" href="#rhs:58"><span class="id" title="binder">rhs</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:48"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:49"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#X:55"><span class="id" title="variable">X</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#foldMap"><span class="id" title="definition">foldMap</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:49"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Y:56"><span class="id" title="variable">Y</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:54"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#lhs:57"><span class="id" title="variable">lhs</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#4eeed44cd0d6a0bc26940e7c91bf6af4"><span class="id" title="notation">&lt;⋆&gt;</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#rhs:58"><span class="id" title="variable">rhs</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#foldMap"><span class="id" title="definition">foldMap</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:49"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#X:55"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Y:56"><span class="id" title="variable">Y</span></a><a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">)</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:54"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#lhs:57"><span class="id" title="variable">lhs</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Monoid.html#23f40b1adcf5df7d889fd9b798da390c"><span class="id" title="notation">●</span></a> <a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#foldMap"><span class="id" title="definition">foldMap</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:49"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#X:55"><span class="id" title="variable">X</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:54"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#rhs:58"><span class="id" title="variable">rhs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap"><span class="id" title="definition">ap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Functors.Batch.html#foldMap_Batch_map"><span class="id" title="lemma">foldMap_Batch_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#foldMap_Batch_mult"><span class="id" title="lemma">foldMap_Batch_mult</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="Batch_foldMap_rewriting_derived" class="idref" href="#Batch_foldMap_rewriting_derived"><span class="id" title="section">Batch_foldMap_rewriting_derived</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="A:59" class="idref" href="#A:59"><span class="id" title="binder">A</span></a> <a id="B:60" class="idref" href="#B:60"><span class="id" title="binder">B</span></a> <a id="C:61" class="idref" href="#C:61"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>}.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1015"></a><h2 class="section"><code>tolist</code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#ListNotations"><span class="id" title="module">List.ListNotations</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tolist_Batch_rw2" class="idref" href="#tolist_Batch_rw2"><span class="id" title="lemma">tolist_Batch_rw2</span></a>: <span class="id" title="keyword">∀</span> (<a id="b:62" class="idref" href="#b:62"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_foldMap_rewriting_derived.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_foldMap_rewriting_derived.B"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_foldMap_rewriting_derived.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_foldMap_rewriting_derived.C"><span class="id" title="variable">C</span></a>)) (<a id="a:63" class="idref" href="#a:63"><span class="id" title="binder">a</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_foldMap_rewriting_derived.A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#tolist"><span class="id" title="definition">tolist</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#b:62"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#45a660fcade13f7b83ca57ede582a0d1"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:63"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#tolist"><span class="id" title="definition">tolist</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:62"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#a:63"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1016"></a><h2 class="section"><code>tosubset</code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Functors.Early.Subset.html#Notations"><span class="id" title="module">Subset.Notations</span></a>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="ToSubset_Batch1" class="idref" href="#ToSubset_Batch1"><span class="id" title="instance">ToSubset_Batch1</span></a> {<a id="B:64" class="idref" href="#B:64"><span class="id" title="binder">B</span></a> <a id="C:65" class="idref" href="#C:65"><span class="id" title="binder">C</span></a>}: <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#ToSubset"><span class="id" title="class">ToSubset</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:64"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:65"><span class="id" title="variable">C</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#ToSubset_Traverse"><span class="id" title="instance">ToSubset_Traverse</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tosubset_Batch_rw2" class="idref" href="#tosubset_Batch_rw2"><span class="id" title="lemma">tosubset_Batch_rw2</span></a>: <span class="id" title="keyword">∀</span> (<a id="b:66" class="idref" href="#b:66"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_foldMap_rewriting_derived.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_foldMap_rewriting_derived.B"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_foldMap_rewriting_derived.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_foldMap_rewriting_derived.C"><span class="id" title="variable">C</span></a>)) (<a id="a:67" class="idref" href="#a:67"><span class="id" title="binder">a</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_foldMap_rewriting_derived.A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#tosubset"><span class="id" title="definition">tosubset</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#b:66"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#45a660fcade13f7b83ca57ede582a0d1"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:67"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#tosubset"><span class="id" title="definition">tosubset</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:66"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Early.Subset.html#fc28ab41a8c0a013bee8d4ee45936a3c"><span class="id" title="notation">∪</span></a> <a class="idref" href="Tealeaves.Functors.Early.Subset.html#f47b92762d79346bcd8a6569478ba954"><span class="id" title="notation">{{</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#a:67"><span class="id" title="variable">a</span></a><a class="idref" href="Tealeaves.Functors.Early.Subset.html#f47b92762d79346bcd8a6569478ba954"><span class="id" title="notation">}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#tosubset_to_foldMap"><span class="id" title="lemma">tosubset_to_foldMap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#foldMap_Batch_rw2"><span class="id" title="lemma">foldMap_Batch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1017"></a><h2 class="section"><code>a ∈ _</code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#Notations"><span class="id" title="module">ContainerFunctor.Notations</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="element_of_Batch_rw2" class="idref" href="#element_of_Batch_rw2"><span class="id" title="lemma">element_of_Batch_rw2</span></a>: <span class="id" title="keyword">∀</span> `(<a id="b:68" class="idref" href="#b:68"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_foldMap_rewriting_derived.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_foldMap_rewriting_derived.B"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_foldMap_rewriting_derived.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_foldMap_rewriting_derived.C"><span class="id" title="variable">C</span></a>)) <a id="a:69" class="idref" href="#a:69"><span class="id" title="binder">a</span></a> <a id="a':70" class="idref" href="#a':70"><span class="id" title="binder">a'</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#a':70"><span class="id" title="variable">a'</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#b:68"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#45a660fcade13f7b83ca57ede582a0d1"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:69"><span class="id" title="variable">a</span></a><a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#a':70"><span class="id" title="variable">a'</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:68"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a':70"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:69"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#element_of_to_foldMap"><span class="id" title="lemma">element_of_to_foldMap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#element_of_to_foldMap"><span class="id" title="lemma">element_of_to_foldMap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#foldMap_Batch_rw2"><span class="id" title="lemma">foldMap_Batch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_foldMap_rewriting_derived"><span class="id" title="section">Batch_foldMap_rewriting_derived</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1018"></a><h1 class="section">Simultaneous Induction on Two <code>Batch</code>es of the Same Shape</h1>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="shape_induction" class="idref" href="#shape_induction"><span class="id" title="section">shape_induction</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A1:71" class="idref" href="#A1:71"><span class="id" title="binder">A1</span></a> <a id="A2:72" class="idref" href="#A2:72"><span class="id" title="binder">A2</span></a> <a id="B:73" class="idref" href="#B:73"><span class="id" title="binder">B</span></a> <a id="C:74" class="idref" href="#C:74"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="b1:75" class="idref" href="#b1:75"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:71"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:73"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:74"><span class="id" title="variable">C</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="b2:76" class="idref" href="#b2:76"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:72"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:73"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:74"><span class="id" title="variable">C</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hshape:77" class="idref" href="#Hshape:77"><span class="id" title="binder">Hshape</span></a>: <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:73"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:74"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b1:75"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:73"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:74"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b2:76"><span class="id" title="variable">b2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="P:79" class="idref" href="#P:79"><span class="id" title="binder">P</span></a> : <span class="id" title="keyword">∀</span> <a id="C:78" class="idref" href="#C:78"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:71"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:73"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:78"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:72"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:73"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:78"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="IHdone:82" class="idref" href="#IHdone:82"><span class="id" title="binder">IHdone</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="C:80" class="idref" href="#C:80"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>) (<a id="c:81" class="idref" href="#c:81"><span class="id" title="binder">c</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#C:80"><span class="id" title="variable">C</span></a>), <a class="idref" href="Tealeaves.Functors.Batch.html#P:79"><span class="id" title="variable">P</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:80"><span class="id" title="variable">C</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:81"><span class="id" title="variable">c</span></a>) (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:81"><span class="id" title="variable">c</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="IHstep:89" class="idref" href="#IHstep:89"><span class="id" title="binder">IHstep</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="C:83" class="idref" href="#C:83"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b1:84" class="idref" href="#b1:84"><span class="id" title="binder">b1</span></a> : <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A1:71"><span class="id" title="variable">A1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:73"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#B:73"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:83"><span class="id" title="variable">C</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b2:85" class="idref" href="#b2:85"><span class="id" title="binder">b2</span></a> : <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A2:72"><span class="id" title="variable">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:73"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#B:73"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:83"><span class="id" title="variable">C</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#P:79"><span class="id" title="variable">P</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#B:73"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:83"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b1:84"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:85"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="a1:86" class="idref" href="#a1:86"><span class="id" title="binder">a1</span></a> : <a class="idref" href="Tealeaves.Functors.Batch.html#A1:71"><span class="id" title="variable">A1</span></a>) (<a id="a2:87" class="idref" href="#a2:87"><span class="id" title="binder">a2</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A2:72"><span class="id" title="variable">A2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hshape:88" class="idref" href="#Hshape:88"><span class="id" title="binder">Hshape</span></a>: <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:73"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:83"><span class="id" title="variable">C</span></a>)  (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:84"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a1:86"><span class="id" title="variable">a1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:73"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:83"><span class="id" title="variable">C</span></a>) (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:85"><span class="id" title="variable">b2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a2:87"><span class="id" title="variable">a2</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#P:79"><span class="id" title="variable">P</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:83"><span class="id" title="variable">C</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:84"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a1:86"><span class="id" title="variable">a1</span></a>) (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:85"><span class="id" title="variable">b2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a2:87"><span class="id" title="variable">a2</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_simultaneous_ind" class="idref" href="#Batch_simultaneous_ind"><span class="id" title="lemma">Batch_simultaneous_ind</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#shape_induction.P"><span class="id" title="variable">P</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#shape_induction.C"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#shape_induction.b1"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#shape_induction.b2"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <a class="idref" href="Tealeaves.Functors.Batch.html#shape_induction.b1"><span class="id" title="variable">b1</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <a class="idref" href="Tealeaves.Functors.Batch.html#shape_induction.b2"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">false</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <a class="idref" href="Tealeaves.Functors.Batch.html#shape_induction.b2"><span class="id" title="variable">b2</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">c'</span> | <span class="id" title="var">rest'</span> <span class="id" title="var">a'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">false</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#shape_induction.IHstep"><span class="id" title="variable">IHstep</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <span class="id" title="var">IHrest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#shape_induction.Hshape"><span class="id" title="variable">Hshape</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Functors.Batch.html#shape_induction"><span class="id" title="section">shape_induction</span></a>.<br/>

<br/>
<span class="comment">(*<br/>
<span class="comment">(**&nbsp;*&nbsp;Miscellaneous&nbsp;*)</span><br/>
<span class="comment">(******************************************************************************)</span><br/>
<br/>
Instance:&nbsp;forall&nbsp;B,&nbsp;Pure&nbsp;(BATCH1&nbsp;B&nbsp;B).<br/>
Proof.<br/>
&nbsp;&nbsp;unfold&nbsp;Pure.<br/>
&nbsp;&nbsp;intros&nbsp;B&nbsp;A.<br/>
&nbsp;&nbsp;apply&nbsp;batch.<br/>
Defined.<br/>
<br/>
Instance:&nbsp;forall&nbsp;B,&nbsp;Mult&nbsp;(BATCH1&nbsp;B&nbsp;B).<br/>
Proof.<br/>
&nbsp;&nbsp;unfold&nbsp;Mult.<br/>
&nbsp;&nbsp;intros&nbsp;B&nbsp;A&nbsp;A'.<br/>
&nbsp;&nbsp;apply&nbsp;batch.<br/>
Defined.<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab1019"></a><h1 class="section"><code>runBatch</code> specialized to monoids</h1>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="runBatch_monoid" class="idref" href="#runBatch_monoid"><span class="id" title="section">runBatch_monoid</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H:93" class="idref" href="#H:93"><span class="id" title="binder">Monoid</span></a> <a id="H:93" class="idref" href="#H:93"><span class="id" title="binder">M</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="runBatch_monoid" class="idref" href="#runBatch_monoid"><span class="id" title="definition">runBatch_monoid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:94" class="idref" href="#A:94"><span class="id" title="binder">A</span></a> <a id="B:95" class="idref" href="#B:95"><span class="id" title="binder">B</span></a>: <span class="id" title="keyword">Type</span>} `(<a id="5a974e1c072c57a18312b383e8ba12ae" class="idref" href="#5a974e1c072c57a18312b383e8ba12ae"><span class="id" title="binder">ϕ</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:94"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid.M"><span class="id" title="variable">M</span></a>) `(<a id="b:98" class="idref" href="#b:98"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:94"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:95"><span class="id" title="variable">B</span></a> <a id="C:97" class="idref" href="#C:97"><span class="id" title="binder">C</span></a>): <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid.M"><span class="id" title="variable">M</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Functors.Batch.html#b:98"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">c</span> ⇒ <a class="idref" href="Tealeaves.Classes.Monoid.html#monoid_unit"><span class="id" title="definition">monoid_unit</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid.M"><span class="id" title="variable">M</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">rest</span> <span class="id" title="var">a</span> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid:99"><span class="id" title="definition">runBatch_monoid</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#5a974e1c072c57a18312b383e8ba12ae"><span class="id" title="variable">ϕ</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:94"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid.M"><span class="id" title="variable">M</span></a>) <span class="id" title="var">rest</span> <a class="idref" href="Tealeaves.Classes.Monoid.html#23f40b1adcf5df7d889fd9b798da390c"><span class="id" title="notation">●</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#5a974e1c072c57a18312b383e8ba12ae"><span class="id" title="variable">ϕ</span></a> <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="runBatch_monoid1" class="idref" href="#runBatch_monoid1"><span class="id" title="lemma">runBatch_monoid1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:101" class="idref" href="#A:101"><span class="id" title="binder">A</span></a> <a id="B:102" class="idref" href="#B:102"><span class="id" title="binder">B</span></a>: <span class="id" title="keyword">Type</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="fb19e59774e296d00bb785c42c094173" class="idref" href="#fb19e59774e296d00bb785c42c094173"><span class="id" title="binder">ϕ</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:101"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid.M"><span class="id" title="variable">M</span></a>) `(<a id="b:105" class="idref" href="#b:105"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:101"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:102"><span class="id" title="variable">B</span></a> <a id="C:104" class="idref" href="#C:104"><span class="id" title="binder">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid"><span class="id" title="definition">runBatch_monoid</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#fb19e59774e296d00bb785c42c094173"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:105"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Constant.html#unconst"><span class="id" title="definition">unconst</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<span class="id" title="var">G</span> := <a class="idref" href="Tealeaves.Functors.Constant.html#Const"><span class="id" title="inductive">Const</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid.M"><span class="id" title="variable">M</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.Constant.html#mkConst"><span class="id" title="constructor">mkConst</span></a> (<span class="id" title="var">tag</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#B:102"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#fb19e59774e296d00bb785c42c094173"><span class="id" title="variable">ϕ</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b:105"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="runBatch_monoid2" class="idref" href="#runBatch_monoid2"><span class="id" title="lemma">runBatch_monoid2</span></a> {<a id="A:106" class="idref" href="#A:106"><span class="id" title="binder">A</span></a> <a id="B:107" class="idref" href="#B:107"><span class="id" title="binder">B</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="6a46b2c4b7451abd92881c045e0177d7" class="idref" href="#6a46b2c4b7451abd92881c045e0177d7"><span class="id" title="binder">ϕ</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:106"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid.M"><span class="id" title="variable">M</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b:110" class="idref" href="#b:110"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:106"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:107"><span class="id" title="variable">B</span></a> <a id="C:109" class="idref" href="#C:109"><span class="id" title="binder">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid"><span class="id" title="definition">runBatch_monoid</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#6a46b2c4b7451abd92881c045e0177d7"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:110"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Early.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<span class="id" title="var">G</span> := <a class="idref" href="Tealeaves.Tactics.Prelude.html#const"><span class="id" title="definition">const</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid.M"><span class="id" title="variable">M</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#6a46b2c4b7451abd92881c045e0177d7"><span class="id" title="variable">ϕ</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:106"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#const"><span class="id" title="definition">const</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid.M"><span class="id" title="variable">M</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:107"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b:110"><span class="id" title="variable">b</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="runBatch_monoid_map" class="idref" href="#runBatch_monoid_map"><span class="id" title="lemma">runBatch_monoid_map</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:111" class="idref" href="#A:111"><span class="id" title="binder">A</span></a> <a id="B:112" class="idref" href="#B:112"><span class="id" title="binder">B</span></a> <a id="C:113" class="idref" href="#C:113"><span class="id" title="binder">C</span></a> <a id="C':114" class="idref" href="#C':114"><span class="id" title="binder">C'</span></a>}: <span class="id" title="keyword">∀</span> (<a id="47ef3a9ac6188d82ac28e6b6cf934fde" class="idref" href="#47ef3a9ac6188d82ac28e6b6cf934fde"><span class="id" title="binder">ϕ</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:111"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid.M"><span class="id" title="variable">M</span></a>) `(<a id="f:116" class="idref" href="#f:116"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#C:113"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C':114"><span class="id" title="variable">C'</span></a>) (<a id="b:117" class="idref" href="#b:117"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:111"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:112"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:113"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid"><span class="id" title="definition">runBatch_monoid</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#47ef3a9ac6188d82ac28e6b6cf934fde"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:117"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid"><span class="id" title="definition">runBatch_monoid</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#47ef3a9ac6188d82ac28e6b6cf934fde"><span class="id" title="variable">ϕ</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:111"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:112"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:116"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:117"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">C'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="runBatch_monoid_mapsnd" class="idref" href="#runBatch_monoid_mapsnd"><span class="id" title="lemma">runBatch_monoid_mapsnd</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:118" class="idref" href="#A:118"><span class="id" title="binder">A</span></a> <a id="B:119" class="idref" href="#B:119"><span class="id" title="binder">B</span></a> <a id="B':120" class="idref" href="#B':120"><span class="id" title="binder">B'</span></a>}: <span class="id" title="keyword">∀</span> (<a id="7528012533e0fe6818460b9b2a323867" class="idref" href="#7528012533e0fe6818460b9b2a323867"><span class="id" title="binder">ϕ</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:118"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid.M"><span class="id" title="variable">M</span></a>) `(<a id="f:122" class="idref" href="#f:122"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#B':120"><span class="id" title="variable">B'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:119"><span class="id" title="variable">B</span></a>) `(<a id="b:124" class="idref" href="#b:124"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:118"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:119"><span class="id" title="variable">B</span></a> <a id="C:123" class="idref" href="#C:123"><span class="id" title="binder">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid"><span class="id" title="definition">runBatch_monoid</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#7528012533e0fe6818460b9b2a323867"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:124"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid"><span class="id" title="definition">runBatch_monoid</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#7528012533e0fe6818460b9b2a323867"><span class="id" title="variable">ϕ</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:122"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:124"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid2"><span class="id" title="lemma">runBatch_monoid2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid2"><span class="id" title="lemma">runBatch_monoid2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Functors.Early.Batch.html#runBatch_mapsnd"><span class="id" title="lemma">runBatch_mapsnd</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_monoid"><span class="id" title="section">runBatch_monoid</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1020"></a><h1 class="section">The <code>length_Batch</code> Operation</h1>
 This function is introduced because using <code>plength</code> has less desirable
    simplification behavior, which makes programming functions like <code>Batch_make</code>  difficult 
</div>
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Tealeaves</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Misc.NaturalNumbers.html#"><span class="id" title="library">Misc.NaturalNumbers</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="length" class="idref" href="#length"><span class="id" title="section">length</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="length_Batch" class="idref" href="#length_Batch"><span class="id" title="definition">length_Batch</span></a> {<a id="A:125" class="idref" href="#A:125"><span class="id" title="binder">A</span></a> <a id="B:126" class="idref" href="#B:126"><span class="id" title="binder">B</span></a> <a id="C:127" class="idref" href="#C:127"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>} (<a id="b:128" class="idref" href="#b:128"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:125"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:126"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:127"><span class="id" title="variable">C</span></a>): <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Functors.Batch.html#b:128"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">_</span>  ⇒ 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">rest</span> <span class="id" title="var">a</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch:129"><span class="id" title="definition">length_Batch</span></a> (<span class="id" title="var">C</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#B:126"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:127"><span class="id" title="variable">C</span></a>) <span class="id" title="var">rest</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="length_Batch_spec" class="idref" href="#length_Batch_spec"><span class="id" title="lemma">length_Batch_spec</span></a> {<a id="A:131" class="idref" href="#A:131"><span class="id" title="binder">A</span></a> <a id="B:132" class="idref" href="#B:132"><span class="id" title="binder">B</span></a> <a id="C:133" class="idref" href="#C:133"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>} (<a id="b:134" class="idref" href="#b:134"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:131"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:132"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:133"><span class="id" title="variable">C</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:134"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#plength"><span class="id" title="definition">plength</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:132"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:133"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b:134"><span class="id" title="variable">b</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfold_all_transparent_tcs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.add_1_r"><span class="id" title="lemma">PeanoNat.Nat.add_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="length_Batch_spec2" class="idref" href="#length_Batch_spec2"><span class="id" title="lemma">length_Batch_spec2</span></a> {<a id="A:135" class="idref" href="#A:135"><span class="id" title="binder">A</span></a> <a id="B:136" class="idref" href="#B:136"><span class="id" title="binder">B</span></a> <a id="C:137" class="idref" href="#C:137"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>} (<a id="b:138" class="idref" href="#b:138"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:135"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:136"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:137"><span class="id" title="variable">C</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:138"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Early.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<span class="id" title="var">G</span> := @<a class="idref" href="Tealeaves.Tactics.Prelude.html#const"><span class="id" title="definition">const</span></a> <span class="id" title="keyword">Type</span> <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ 1) <a class="idref" href="Tealeaves.Functors.Batch.html#b:138"><span class="id" title="variable">b</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch_spec"><span class="id" title="lemma">length_Batch_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1021"></a><h2 class="section">Rewriting Rules</h2>
 TODO 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="length_Batch_rw2" class="idref" href="#length_Batch_rw2"><span class="id" title="lemma">length_Batch_rw2</span></a> {<a id="A:139" class="idref" href="#A:139"><span class="id" title="binder">A</span></a> <a id="B:140" class="idref" href="#B:140"><span class="id" title="binder">B</span></a> <a id="C:141" class="idref" href="#C:141"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b:142" class="idref" href="#b:142"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:139"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:140"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#B:140"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:141"><span class="id" title="variable">C</span></a>)) (<a id="a:143" class="idref" href="#a:143"><span class="id" title="binder">a</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:139"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#b:142"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#45a660fcade13f7b83ca57ede582a0d1"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:143"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:142"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1022"></a><h2 class="section">Length is the Same as the Underlying <code>list</code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;length&nbsp;of&nbsp;a&nbsp;&lt;&lt;Batch&gt;&gt;&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;the&nbsp;length&nbsp;of&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;list&nbsp;we&nbsp;can&nbsp;extract&nbsp;from&nbsp;it&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(******************************************************************************)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="batch_length1" class="idref" href="#batch_length1"><span class="id" title="lemma">batch_length1</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:144" class="idref" href="#A:144"><span class="id" title="binder">A</span></a> <a id="B:145" class="idref" href="#B:145"><span class="id" title="binder">B</span></a> <a id="C:146" class="idref" href="#C:146"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>} (<a id="b:147" class="idref" href="#b:147"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:144"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:145"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:146"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:147"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<span class="id" title="var">G</span> := <a class="idref" href="Tealeaves.Tactics.Prelude.html#const"><span class="id" title="definition">const</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:144"><span class="id" title="variable">A</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#ret"><span class="id" title="definition">ret</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:144"><span class="id" title="variable">A</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b:147"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">b</span> <span class="id" title="var">IHb</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfold_ops</span> @<a class="idref" href="Tealeaves.Functors.Early.List.html#Monoid_op_list"><span class="id" title="instance">Monoid_op_list</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">List.app_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1023"></a><h2 class="section">Length is Preserved By <code>map</code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="batch_length_map" class="idref" href="#batch_length_map"><span class="id" title="lemma">batch_length_map</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:148" class="idref" href="#A:148"><span class="id" title="binder">A</span></a> <a id="B:149" class="idref" href="#B:149"><span class="id" title="binder">B</span></a> <a id="C:150" class="idref" href="#C:150"><span class="id" title="binder">C</span></a> <a id="C':151" class="idref" href="#C':151"><span class="id" title="binder">C'</span></a>: <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="f:152" class="idref" href="#f:152"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#C:150"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C':151"><span class="id" title="variable">C'</span></a>) (<a id="b:153" class="idref" href="#b:153"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:148"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:149"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:150"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:153"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:148"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:149"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:152"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:153"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">C'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">b</span> <span class="id" title="var">IHb</span> <span class="id" title="var">a</span>]; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHb</span> <span class="id" title="var">_</span> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> <span class="id" title="var">f</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="batch_length_mapfst" class="idref" href="#batch_length_mapfst"><span class="id" title="lemma">batch_length_mapfst</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:154" class="idref" href="#A:154"><span class="id" title="binder">A</span></a> <a id="A':155" class="idref" href="#A':155"><span class="id" title="binder">A'</span></a> <a id="B:156" class="idref" href="#B:156"><span class="id" title="binder">B</span></a> <a id="C:157" class="idref" href="#C:157"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="f:158" class="idref" href="#f:158"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:154"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':155"><span class="id" title="variable">A'</span></a>) (<a id="b:159" class="idref" href="#b:159"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:154"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:156"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:157"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:159"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:158"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:159"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">b</span> <span class="id" title="var">IHb</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="batch_length_mapsnd" class="idref" href="#batch_length_mapsnd"><span class="id" title="lemma">batch_length_mapsnd</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:160" class="idref" href="#A:160"><span class="id" title="binder">A</span></a> <a id="B:161" class="idref" href="#B:161"><span class="id" title="binder">B</span></a> <a id="B':162" class="idref" href="#B':162"><span class="id" title="binder">B'</span></a> <a id="C:163" class="idref" href="#C:163"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="f:164" class="idref" href="#f:164"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#B':162"><span class="id" title="variable">B'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:161"><span class="id" title="variable">B</span></a>) (<a id="b:165" class="idref" href="#b:165"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:160"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:161"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:163"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:165"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:164"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:165"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">b</span> <span class="id" title="var">IHb</span> <span class="id" title="var">a</span>]; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#batch_length_map"><span class="id" title="lemma">batch_length_map</span></a> ((<a class="idref" href="Tealeaves.Tactics.Prelude.html#precompose"><span class="id" title="definition">precompose</span></a> <span class="id" title="var">f</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1024"></a><h2 class="section">Length is Preserved by <code>cojoin_Batch</code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="length_cojoin_Batch" class="idref" href="#length_cojoin_Batch"><span class="id" title="lemma">length_cojoin_Batch</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:166" class="idref" href="#A:166"><span class="id" title="binder">A</span></a> <a id="A':167" class="idref" href="#A':167"><span class="id" title="binder">A'</span></a> <a id="B:168" class="idref" href="#B:168"><span class="id" title="binder">B</span></a> <a id="C:169" class="idref" href="#C:169"><span class="id" title="binder">C</span></a>} (<a id="b:170" class="idref" href="#b:170"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:166"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:168"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:169"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:170"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#cojoin_Batch"><span class="id" title="definition">cojoin_Batch</span></a> (<span class="id" title="var">B</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#A':167"><span class="id" title="variable">A'</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b:170"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Functors.Batch.html#batch_length_map"><span class="id" title="lemma">batch_length_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1025"></a><h2 class="section">Two Same-Shaped <code>Batch</code>es Have the Same Length</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="length_Batch_shape" class="idref" href="#length_Batch_shape"><span class="id" title="lemma">length_Batch_shape</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b1:174" class="idref" href="#b1:174"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A1:171" class="idref" href="#A1:171"><span class="id" title="binder">A1</span></a> <a id="B:172" class="idref" href="#B:172"><span class="id" title="binder">B</span></a> <a id="C:173" class="idref" href="#C:173"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b2:176" class="idref" href="#b2:176"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A2:175" class="idref" href="#A2:175"><span class="id" title="binder">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:172"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:173"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:172"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:173"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b1:174"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:172"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:173"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b2:176"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:174"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:176"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">b2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">false</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">b2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">false</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>. <span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHb1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Functors.Batch.html#length"><span class="id" title="section">length</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1026"></a><h1 class="section">Specification for <code>traverse</code> via <code>runBatch</code></h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="traverse_via_runBatch" class="idref" href="#traverse_via_runBatch"><span class="id" title="lemma">traverse_via_runBatch</span></a><br/>
&nbsp;&nbsp;(<a id="G:177" class="idref" href="#G:177"><span class="id" title="binder">G</span></a>: <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) `{<a id="H:178" class="idref" href="#H:178"><span class="id" title="binder">Map</span></a> <a id="H:178" class="idref" href="#H:178"><span class="id" title="binder">G</span></a>} `{<a id="H0:179" class="idref" href="#H0:179"><span class="id" title="binder">Mult</span></a> <a id="H0:179" class="idref" href="#H0:179"><span class="id" title="binder">G</span></a>} `{<a id="H1:180" class="idref" href="#H1:180"><span class="id" title="binder">Pure</span></a> <a id="H1:180" class="idref" href="#H1:180"><span class="id" title="binder">G</span></a>} `{<a id="Applicative0:181" class="idref" href="#Applicative0:181"><span class="id" title="binder">!</span></a> <a id="Applicative0:181" class="idref" href="#Applicative0:181"><span class="id" title="binder">Applicative</span></a> <a id="Applicative0:181" class="idref" href="#Applicative0:181"><span class="id" title="binder">G</span></a>}<br/>
&nbsp;&nbsp;`(<a id="be5fd58bc72236aa130502aae8dcf563" class="idref" href="#be5fd58bc72236aa130502aae8dcf563"><span class="id" title="binder">ϕ</span></a>: <a id="A:182" class="idref" href="#A:182"><span class="id" title="binder">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:177"><span class="id" title="variable">G</span></a> <a id="A':183" class="idref" href="#A':183"><span class="id" title="binder">A'</span></a>) (<a id="B:185" class="idref" href="#B:185"><span class="id" title="binder">B</span></a> <a id="C:186" class="idref" href="#C:186"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:185"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:186"><span class="id" title="variable">C</span></a>) (<span class="id" title="var">G</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#G:177"><span class="id" title="variable">G</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#be5fd58bc72236aa130502aae8dcf563"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Early.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<span class="id" title="var">G</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#G:177"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':183"><span class="id" title="variable">A'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:185"><span class="id" title="variable">B</span></a>) (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:177"><span class="id" title="variable">G</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#batch"><span class="id" title="definition">batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':183"><span class="id" title="variable">A'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:185"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#be5fd58bc72236aa130502aae8dcf563"><span class="id" title="variable">ϕ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">ext</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#runBatch_rw1"><span class="id" title="lemma">runBatch_rw1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#traverse_Batch_rw1"><span class="id" title="lemma">traverse_Batch_rw1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#runBatch_rw2"><span class="id" title="lemma">runBatch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#traverse_Batch_rw2'"><span class="id" title="lemma">traverse_Batch_rw2'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHrest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> <span class="id" title="tactic">at</span> 6.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap_compose2"><span class="id" title="lemma">ap_compose2</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A'</span> <span class="id" title="var">B</span>) <span class="id" title="var">G</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap_map"><span class="id" title="lemma">ap_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<span class="id" title="var">G</span> := <span class="id" title="var">G</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A'</span> <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <span class="id" title="var">G</span> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#batch"><span class="id" title="definition">batch</span></a> <span class="id" title="var">A'</span> <span class="id" title="var">B</span>) <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <span class="id" title="var">ϕ</span>) <span class="id" title="var">rest</span>) <span class="id" title="var">on</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <span class="id" title="var">G</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ext</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#precompose"><span class="id" title="definition">precompose</span></a>, <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap"><span class="id" title="definition">ap</span></a>, <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> <span class="id" title="var">b</span> <span class="id" title="var">on</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A'</span> <span class="id" title="var">B</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose</span> <span class="id" title="var">near</span> <span class="id" title="var">b</span> <span class="id" title="var">on</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_map"><span class="id" title="method">fun_map_map</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A'</span> <span class="id" title="var">B</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (?<span class="id" title="var">f</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#fa652b8c8091f60ed5a3b127754ad981"><span class="id" title="notation">○</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>) <span class="id" title="keyword">with</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#fun_map_id"><span class="id" title="method">fun_map_id</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1027"></a><h1 class="section"><code>Batch _ B C</code> is a traversable monad</h1>

<div class="paragraph"> </div>

<a id="lab1028"></a><h2 class="section">Operation</h2>

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="bindt_Batch" class="idref" href="#bindt_Batch"><span class="id" title="definition">bindt_Batch</span></a> (<a id="B:187" class="idref" href="#B:187"><span class="id" title="binder">B</span></a> <a id="C:188" class="idref" href="#C:188"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>) (<a id="G:189" class="idref" href="#G:189"><span class="id" title="binder">G</span></a>: <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;`{<a id="H:190" class="idref" href="#H:190"><span class="id" title="binder">Map</span></a> <a id="H:190" class="idref" href="#H:190"><span class="id" title="binder">G</span></a>} `{<a id="H0:191" class="idref" href="#H0:191"><span class="id" title="binder">Pure</span></a> <a id="H0:191" class="idref" href="#H0:191"><span class="id" title="binder">G</span></a>} `{<a id="H1:192" class="idref" href="#H1:192"><span class="id" title="binder">Mult</span></a> <a id="H1:192" class="idref" href="#H1:192"><span class="id" title="binder">G</span></a>} (<a id="A:193" class="idref" href="#A:193"><span class="id" title="binder">A</span></a> <a id="A':194" class="idref" href="#A':194"><span class="id" title="binder">A'</span></a>: <span class="id" title="keyword">Type</span>) (<a id="f:195" class="idref" href="#f:195"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:193"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:189"><span class="id" title="variable">G</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':194"><span class="id" title="variable">A'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:187"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:187"><span class="id" title="variable">B</span></a>))<br/>
&nbsp;&nbsp;(<a id="b:196" class="idref" href="#b:196"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:193"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:187"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:187"><span class="id" title="variable">B</span></a>): <a class="idref" href="Tealeaves.Functors.Batch.html#G:189"><span class="id" title="variable">G</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':194"><span class="id" title="variable">A'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:187"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:187"><span class="id" title="variable">B</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:189"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#join_Batch"><span class="id" title="definition">join_Batch</span></a> (<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:187"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:187"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:195"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:196"><span class="id" title="variable">b</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab1029"></a><h2 class="section">Traversable Monad Laws</h2>
 TODO 
<div class="paragraph"> </div>

<a id="lab1030"></a><h1 class="section">Deconstructing <code>Batch A B C</code> into Shape and Contents</h1>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="deconstruction" class="idref" href="#deconstruction"><span class="id" title="section">deconstruction</span></a>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Generalizable</span> <span class="id" title="keyword">Variables</span> <span class="id" title="var">n</span> <span class="id" title="var">v</span> <span class="id" title="var">a</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1031"></a><h2 class="section"><code>Batch_make</code> and <code>Batch_contents</code></h2>
 Extract the contents of <code>Batch</code> as a vector 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="Batch_contents" class="idref" href="#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> `(<a id="b:200" class="idref" href="#b:200"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:197" class="idref" href="#A:197"><span class="id" title="binder">A</span></a> <a id="B:198" class="idref" href="#B:198"><span class="id" title="binder">B</span></a> <a id="C:199" class="idref" href="#C:199"><span class="id" title="binder">C</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:200"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#A:197"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Functors.Batch.html#b:200"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">c</span> ⇒ <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#vnil"><span class="id" title="definition">vnil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">b</span> <span class="id" title="var">a</span> ⇒ <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#vcons"><span class="id" title="definition">vcons</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:200"><span class="id" title="variable">b</span></a>) <span class="id" title="var">a</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents:201"><span class="id" title="definition">Batch_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:200"><span class="id" title="variable">b</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Obtain the build function of <code>Batch</code>. Note that
 <code>Batch_make b v</code> in general has type <code>C</code>, not another <code>Batch</code>.
 That is, this is not <code>make</code> in the sense of <code>put</code> 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="Batch_make" class="idref" href="#Batch_make"><span class="id" title="definition">Batch_make</span></a> `(<a id="b:206" class="idref" href="#b:206"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:203" class="idref" href="#A:203"><span class="id" title="binder">A</span></a> <a id="B:204" class="idref" href="#B:204"><span class="id" title="binder">B</span></a> <a id="C:205" class="idref" href="#C:205"><span class="id" title="binder">C</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:206"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#B:204"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:205"><span class="id" title="variable">C</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Functors.Batch.html#b:206"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">return</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:208"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#B:204"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:205"><span class="id" title="variable">C</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">c</span> ⇒ <span class="id" title="keyword">fun</span> <a id="v:209" class="idref" href="#v:209"><span class="id" title="binder">v</span></a> ⇒ <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">b</span> <span class="id" title="var">a</span> ⇒ <span class="id" title="keyword">fun</span> <a id="v:210" class="idref" href="#v:210"><span class="id" title="binder">v</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make:207"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:206"><span class="id" title="variable">b</span></a> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:210"><span class="id" title="variable">v</span></a>) (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd"><span class="id" title="definition">Vector_hd</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:210"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1032"></a><h2 class="section"><code>Batch_replace_contents</code></h2>
 This is <code>make</code> in the sense of <code>put</code>. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="Batch_replace_contents" class="idref" href="#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b:214" class="idref" href="#b:214"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:211" class="idref" href="#A:211"><span class="id" title="binder">A</span></a> <a id="B:212" class="idref" href="#B:212"><span class="id" title="binder">B</span></a> <a id="C:213" class="idref" href="#C:213"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="v:216" class="idref" href="#v:216"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:214"><span class="id" title="variable">b</span></a>) <a id="A':215" class="idref" href="#A':215"><span class="id" title="binder">A'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':215"><span class="id" title="variable">A'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:212"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:213"><span class="id" title="variable">C</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Functors.Batch.html#b:214"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">return</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:218"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#A':215"><span class="id" title="variable">A'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A':215"><span class="id" title="variable">A'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:212"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:213"><span class="id" title="variable">C</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">c</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="v:219" class="idref" href="#v:219"><span class="id" title="binder">v</span></a> ⇒ <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">rest</span> <span class="id" title="var">a</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="v:220" class="idref" href="#v:220"><span class="id" title="binder">v</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Step"><span class="id" title="constructor">Step</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents:217"><span class="id" title="definition">Batch_replace_contents</span></a> <span class="id" title="var">rest</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:220"><span class="id" title="variable">v</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd"><span class="id" title="definition">Vector_hd</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:220"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <a class="idref" href="Tealeaves.Functors.Batch.html#v:216"><span class="id" title="variable">v</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1033"></a><h2 class="section">Rewriting rules</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="deconstruction.rw" class="idref" href="#deconstruction.rw"><span class="id" title="section">rw</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="A:221" class="idref" href="#A:221"><span class="id" title="binder">A</span></a> <a id="B:222" class="idref" href="#B:222"><span class="id" title="binder">B</span></a> <a id="C:223" class="idref" href="#C:223"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> (<span class="id" title="var">a</span>: <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rw.A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">b</span>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rw.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rw.B"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rw.B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rw.C"><span class="id" title="variable">C</span></a>)) (<span class="id" title="var">c</span>: <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rw.C"><span class="id" title="variable">C</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_contents_rw1" class="idref" href="#Batch_contents_rw1"><span class="id" title="lemma">Batch_contents_rw1</span></a> {<a id="c:224" class="idref" href="#c:224"><span class="id" title="binder">c</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> (@<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rw.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rw.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rw.C"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:224"><span class="id" title="variable">c</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#vnil"><span class="id" title="definition">vnil</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_contents_rw2" class="idref" href="#Batch_contents_rw2"><span class="id" title="lemma">Batch_contents_rw2</span></a> {<a id="b:225" class="idref" href="#b:225"><span class="id" title="binder">b</span></a> <a id="a:226" class="idref" href="#a:226"><span class="id" title="binder">a</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:225"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:226"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#vcons"><span class="id" title="definition">vcons</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:225"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#a:226"><span class="id" title="variable">a</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:225"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_rw1" class="idref" href="#Batch_make_rw1"><span class="id" title="lemma">Batch_make_rw1</span></a> {<a id="c:227" class="idref" href="#c:227"><span class="id" title="binder">c</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> (@<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rw.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rw.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rw.C"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:227"><span class="id" title="variable">c</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#const"><span class="id" title="definition">const</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:227"><span class="id" title="variable">c</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_rw2" class="idref" href="#Batch_make_rw2"><span class="id" title="lemma">Batch_make_rw2</span></a> {<a id="b:228" class="idref" href="#b:228"><span class="id" title="binder">b</span></a> <a id="a:229" class="idref" href="#a:229"><span class="id" title="binder">a</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:228"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:229"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="v:230" class="idref" href="#v:230"><span class="id" title="binder">v</span></a> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:228"><span class="id" title="variable">b</span></a> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:230"><span class="id" title="variable">v</span></a>) (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd"><span class="id" title="definition">Vector_hd</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:230"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_replace_rw1" class="idref" href="#Batch_replace_rw1"><span class="id" title="lemma">Batch_replace_rw1</span></a> {<a id="c:231" class="idref" href="#c:231"><span class="id" title="binder">c</span></a>} `{<a id="v:233" class="idref" href="#v:233"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> <span class="id" title="var">_</span> <a id="A':232" class="idref" href="#A':232"><span class="id" title="binder">A'</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> (@<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rw.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rw.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rw.C"><span class="id" title="variable">C</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:231"><span class="id" title="variable">c</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#v:233"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:231"><span class="id" title="variable">c</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_replace_rw2" class="idref" href="#Batch_replace_rw2"><span class="id" title="lemma">Batch_replace_rw2</span></a> {<a id="b:234" class="idref" href="#b:234"><span class="id" title="binder">b</span></a> <a id="a:235" class="idref" href="#a:235"><span class="id" title="binder">a</span></a>} `{<a id="v:237" class="idref" href="#v:237"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> <span class="id" title="var">_</span> <a id="A':236" class="idref" href="#A':236"><span class="id" title="binder">A'</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:234"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:235"><span class="id" title="variable">a</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#v:237"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Step"><span class="id" title="constructor">Step</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:234"><span class="id" title="variable">b</span></a> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:237"><span class="id" title="variable">v</span></a>)) (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd"><span class="id" title="definition">Vector_hd</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:237"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rw"><span class="id" title="section">rw</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1034"></a><h2 class="section">Relating <code>tolist</code> and <code>Batch_contents</code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span> <span class="id" title="var">hide_rhs</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- ?<span class="id" title="var">lhs</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">rhs</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">name</span> := <span class="id" title="tactic">fresh</span> "rhs" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> <span class="id" title="var">rhs</span> <span class="id" title="keyword">as</span> <span class="id" title="var">name</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tolist_Batch_contents" class="idref" href="#tolist_Batch_contents"><span class="id" title="lemma">tolist_Batch_contents</span></a> {<a id="A:238" class="idref" href="#A:238"><span class="id" title="binder">A</span></a> <a id="B:239" class="idref" href="#B:239"><span class="id" title="binder">B</span></a> <a id="C:240" class="idref" href="#C:240"><span class="id" title="binder">C</span></a>}: <span class="id" title="keyword">∀</span> (<a id="b:241" class="idref" href="#b:241"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:238"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:239"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:240"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:241"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#tolist"><span class="id" title="definition">tolist</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:241"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents_rw2"><span class="id" title="lemma">Batch_contents_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hide_rhs</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqrhs</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Heqrhs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;^^&nbsp;Simplify&nbsp;a&nbsp;hidden&nbsp;(length_Batch&nbsp;(b&nbsp;⧆&nbsp;a)&nbsp;without&nbsp;affecting&nbsp;RHS.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;^^&nbsp;rewrite&nbsp;Batch_contents_rw2&nbsp;fails&nbsp;due&nbsp;to&nbsp;binders&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#proj_vcons"><span class="id" title="lemma">proj_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#tolist_Batch_rw2"><span class="id" title="lemma">tolist_Batch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#rev_unit"><span class="id" title="lemma">List.rev_unit</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1035"></a><h2 class="section">Rewriting Rules for <code>&lt;⋆&gt; </code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="deconstruction.rewrite_Batch_contents" class="idref" href="#deconstruction.rewrite_Batch_contents"><span class="id" title="section">rewrite_Batch_contents</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="A:242" class="idref" href="#A:242"><span class="id" title="binder">A</span></a> <a id="B:243" class="idref" href="#B:243"><span class="id" title="binder">B</span></a>: <span class="id" title="keyword">Type</span>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_contents_rw_pure" class="idref" href="#Batch_contents_rw_pure"><span class="id" title="lemma">Batch_contents_rw_pure</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="X:244" class="idref" href="#X:244"><span class="id" title="binder">X</span></a> (<a id="x:245" class="idref" href="#x:245"><span class="id" title="binder">x</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#X:244"><span class="id" title="variable">X</span></a>), <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> (<a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#pure"><span class="id" title="definition">pure</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rewrite_Batch_contents.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rewrite_Batch_contents.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#x:245"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#vnil"><span class="id" title="definition">vnil</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_contents_rw_mult" class="idref" href="#Batch_contents_rw_mult"><span class="id" title="lemma">Batch_contents_rw_mult</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="C:246" class="idref" href="#C:246"><span class="id" title="binder">C</span></a> <a id="D:247" class="idref" href="#D:247"><span class="id" title="binder">D</span></a>} (<a id="x:248" class="idref" href="#x:248"><span class="id" title="binder">x</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rewrite_Batch_contents.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rewrite_Batch_contents.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:246"><span class="id" title="variable">C</span></a>) (<a id="y:249" class="idref" href="#y:249"><span class="id" title="binder">y</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rewrite_Batch_contents.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rewrite_Batch_contents.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:247"><span class="id" title="variable">D</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#x:248"><span class="id" title="variable">x</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#f5015ba7e0151d291e623026bdca0ae5"><span class="id" title="notation">⊗</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#y:249"><span class="id" title="variable">y</span></a>) <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#a8714907635432d3223f585df0b02c5b"><span class="id" title="notation">~~</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_append"><span class="id" title="definition">Vector_append</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#y:249"><span class="id" title="variable">y</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#x:248"><span class="id" title="variable">x</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_sim"><span class="id" title="definition">Vector_sim</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#tolist_Batch_contents"><span class="id" title="lemma">tolist_Batch_contents</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#tolist_to_foldMap"><span class="id" title="lemma">tolist_to_foldMap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#foldMap_Batch_mult"><span class="id" title="lemma">foldMap_Batch_mult</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfold_ops</span> @<a class="idref" href="Tealeaves.Functors.Early.List.html#Monoid_op_list"><span class="id" title="instance">Monoid_op_list</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#rev_app_distr"><span class="id" title="lemma">List.rev_app_distr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#proj_Vector_append"><span class="id" title="lemma">proj_Vector_append</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#tolist_Batch_contents"><span class="id" title="lemma">tolist_Batch_contents</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#tolist_Batch_contents"><span class="id" title="lemma">tolist_Batch_contents</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_contents_rw_app" class="idref" href="#Batch_contents_rw_app"><span class="id" title="lemma">Batch_contents_rw_app</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="X:250" class="idref" href="#X:250"><span class="id" title="binder">X</span></a> <a id="Y:251" class="idref" href="#Y:251"><span class="id" title="binder">Y</span></a> (<a id="f:252" class="idref" href="#f:252"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rewrite_Batch_contents.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rewrite_Batch_contents.B"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#X:250"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Y:251"><span class="id" title="variable">Y</span></a>)) (<a id="x:253" class="idref" href="#x:253"><span class="id" title="binder">x</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rewrite_Batch_contents.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rewrite_Batch_contents.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#X:250"><span class="id" title="variable">X</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#f:252"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#4eeed44cd0d6a0bc26940e7c91bf6af4"><span class="id" title="notation">&lt;⋆&gt;</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#x:253"><span class="id" title="variable">x</span></a>) <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#a8714907635432d3223f585df0b02c5b"><span class="id" title="notation">~~</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_append"><span class="id" title="definition">Vector_append</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#x:253"><span class="id" title="variable">x</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:252"><span class="id" title="variable">f</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_sim"><span class="id" title="definition">Vector_sim</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#tolist_Batch_contents"><span class="id" title="lemma">tolist_Batch_contents</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Kleisli.Theory.TraversableFunctor.html#tolist_to_foldMap"><span class="id" title="lemma">tolist_to_foldMap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#proj_Vector_append"><span class="id" title="lemma">proj_Vector_append</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#foldMap_Batch_ap_rw2"><span class="id" title="lemma">foldMap_Batch_ap_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unfold_ops</span> @<a class="idref" href="Tealeaves.Functors.Early.List.html#Monoid_op_list"><span class="id" title="instance">Monoid_op_list</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#rev_app_distr"><span class="id" title="lemma">List.rev_app_distr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#tolist_Batch_contents"><span class="id" title="lemma">tolist_Batch_contents</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#tolist_Batch_contents"><span class="id" title="lemma">tolist_Batch_contents</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.rewrite_Batch_contents"><span class="id" title="section">rewrite_Batch_contents</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1036"></a><h2 class="section">Same Shape Iff Same <code>Batch_make</code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_shape" class="idref" href="#Batch_make_shape"><span class="id" title="lemma">Batch_make_shape</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b1:257" class="idref" href="#b1:257"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A1:254" class="idref" href="#A1:254"><span class="id" title="binder">A1</span></a> <a id="B:255" class="idref" href="#B:255"><span class="id" title="binder">B</span></a> <a id="C:256" class="idref" href="#C:256"><span class="id" title="binder">C</span></a>) `(<a id="b2:259" class="idref" href="#b2:259"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A2:258" class="idref" href="#A2:258"><span class="id" title="binder">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:255"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:256"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:255"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:256"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b1:257"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:255"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:256"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b2:259"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:257"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#27576a5753c5585bee527e508a617c4d"><span class="id" title="notation">~!~</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:259"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_simultaneous_ind"><span class="id" title="lemma">Batch_simultaneous_ind</span></a> <span class="id" title="var">Hshape</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hsim</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch_shape"><span class="id" title="lemma">length_Batch_shape</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">introv</span> <span class="id" title="var">Hsim'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make_rw2"><span class="id" title="lemma">Batch_make_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_sim"><span class="id" title="lemma">Vector_hd_sim</span></a> <span class="id" title="var">Hsim'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">cut</span>: <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <span class="id" title="var">b1</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v1</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <span class="id" title="var">b2</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="tactic">cut</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_fun_sim_eq"><span class="id" title="lemma">Vector_fun_sim_eq</span></a>, <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl_sim"><span class="id" title="lemma">Vector_tl_sim</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_shape_rev" class="idref" href="#Batch_make_shape_rev"><span class="id" title="lemma">Batch_make_shape_rev</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b1:263" class="idref" href="#b1:263"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A1:260" class="idref" href="#A1:260"><span class="id" title="binder">A1</span></a> <a id="B:261" class="idref" href="#B:261"><span class="id" title="binder">B</span></a> <a id="C:262" class="idref" href="#C:262"><span class="id" title="binder">C</span></a>) `(<a id="b2:265" class="idref" href="#b2:265"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A2:264" class="idref" href="#A2:264"><span class="id" title="binder">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:261"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:262"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:263"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#27576a5753c5585bee527e508a617c4d"><span class="id" title="notation">~!~</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:265"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:261"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:262"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b1:263"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:261"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:262"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b2:265"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_fun_sim"><span class="id" title="definition">Vector_fun_sim</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hlen</span> <span class="id" title="var">Hsim</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">b2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hsim</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#vnil"><span class="id" title="definition">vnil</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#vnil"><span class="id" title="definition">vnil</span></a> <span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">reflexivity</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hsim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">false</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">b2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">false</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>. <span class="id" title="var">fequal</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHb1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">intros</span> <span class="id" title="var">v1</span> <span class="id" title="var">v2</span> <span class="id" title="var">Vsim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ext</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Vsim'</span>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#vcons"><span class="id" title="definition">vcons</span></a> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">v1</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#a8714907635432d3223f585df0b02c5b"><span class="id" title="notation">~~</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#vcons"><span class="id" title="definition">vcons</span></a> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">v2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#vcons_sim"><span class="id" title="lemma">vcons_sim</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hsim</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Vsim'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl_vcons"><span class="id" title="lemma">Vector_tl_vcons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_vcons"><span class="id" title="lemma">Vector_hd_vcons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Corollary</span> <a id="Batch_make_shape_iff" class="idref" href="#Batch_make_shape_iff"><span class="id" title="lemma">Batch_make_shape_iff</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b1:269" class="idref" href="#b1:269"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A1:266" class="idref" href="#A1:266"><span class="id" title="binder">A1</span></a> <a id="B:267" class="idref" href="#B:267"><span class="id" title="binder">B</span></a> <a id="C:268" class="idref" href="#C:268"><span class="id" title="binder">C</span></a>) `(<a id="b2:271" class="idref" href="#b2:271"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A2:270" class="idref" href="#A2:270"><span class="id" title="binder">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:267"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:268"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:267"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:268"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b1:269"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:267"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:268"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b2:271"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:269"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#27576a5753c5585bee527e508a617c4d"><span class="id" title="notation">~!~</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:271"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make_shape"><span class="id" title="lemma">Batch_make_shape</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make_shape_rev"><span class="id" title="lemma">Batch_make_shape_rev</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1037"></a><h2 class="section">Two Lemmas for <code>shape</code> and <code>length_Batch</code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_shape_spec" class="idref" href="#Batch_shape_spec"><span class="id" title="lemma">Batch_shape_spec</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b:275" class="idref" href="#b:275"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:272" class="idref" href="#A:272"><span class="id" title="binder">A</span></a> <a id="B:273" class="idref" href="#B:273"><span class="id" title="binder">B</span></a> <a id="C:274" class="idref" href="#C:274"><span class="id" title="binder">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:273"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:274"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b:275"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:275"><span class="id" title="variable">b</span></a> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tt"><span class="id" title="definition">Vector_tt</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:275"><span class="id" title="variable">b</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl_vcons"><span class="id" title="lemma">Vector_tl_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_vcons"><span class="id" title="lemma">Vector_hd_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Corollary</span> <a id="Batch_make_sim_length" class="idref" href="#Batch_make_sim_length"><span class="id" title="lemma">Batch_make_sim_length</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b1:279" class="idref" href="#b1:279"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A1:276" class="idref" href="#A1:276"><span class="id" title="binder">A1</span></a> <a id="B:277" class="idref" href="#B:277"><span class="id" title="binder">B</span></a> <a id="C:278" class="idref" href="#C:278"><span class="id" title="binder">C</span></a>) `(<a id="b2:281" class="idref" href="#b2:281"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A2:280" class="idref" href="#A2:280"><span class="id" title="binder">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:277"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:278"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> (<a id="A':282" class="idref" href="#A':282"><span class="id" title="binder">A'</span></a>: <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:279"><span class="id" title="variable">b1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#27576a5753c5585bee527e508a617c4d"><span class="id" title="notation">~!~</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:281"><span class="id" title="variable">b2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:279"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:281"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_fun_sim_length"><span class="id" title="lemma">Vector_fun_sim_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">H</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Corollary</span> <a id="Batch_replace_contents_sim_length" class="idref" href="#Batch_replace_contents_sim_length"><span class="id" title="lemma">Batch_replace_contents_sim_length</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b1:286" class="idref" href="#b1:286"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A1:283" class="idref" href="#A1:283"><span class="id" title="binder">A1</span></a> <a id="B:284" class="idref" href="#B:284"><span class="id" title="binder">B</span></a> <a id="C:285" class="idref" href="#C:285"><span class="id" title="binder">C</span></a>) `(<a id="b2:288" class="idref" href="#b2:288"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A2:287" class="idref" href="#A2:287"><span class="id" title="binder">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:284"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:285"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> (<a id="A':289" class="idref" href="#A':289"><span class="id" title="binder">A'</span></a>: <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#A':289"><span class="id" title="variable">A'</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b1:286"><span class="id" title="variable">b1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#27576a5753c5585bee527e508a617c4d"><span class="id" title="notation">~!~</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#A':289"><span class="id" title="variable">A'</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b2:288"><span class="id" title="variable">b2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:286"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:288"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_fun_sim_length"><span class="id" title="lemma">Vector_fun_sim_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">H</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1038"></a><h2 class="section">Same Shape Implies Same <code>Batch_replace_contents</code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_replace_contents_shape" class="idref" href="#Batch_replace_contents_shape"><span class="id" title="lemma">Batch_replace_contents_shape</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b1:293" class="idref" href="#b1:293"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A1:290" class="idref" href="#A1:290"><span class="id" title="binder">A1</span></a> <a id="B:291" class="idref" href="#B:291"><span class="id" title="binder">B</span></a> <a id="C:292" class="idref" href="#C:292"><span class="id" title="binder">C</span></a>) `(<a id="b2:295" class="idref" href="#b2:295"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A2:294" class="idref" href="#A2:294"><span class="id" title="binder">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:291"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:292"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:291"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:292"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b1:293"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:291"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:292"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b2:295"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="A':296" class="idref" href="#A':296"><span class="id" title="binder">A'</span></a>: <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#A':296"><span class="id" title="variable">A'</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b1:293"><span class="id" title="variable">b1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#27576a5753c5585bee527e508a617c4d"><span class="id" title="notation">~!~</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#A':296"><span class="id" title="variable">A'</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b2:295"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_simultaneous_ind"><span class="id" title="lemma">Batch_simultaneous_ind</span></a> <span class="id" title="var">Hshape</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">clear</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch_shape"><span class="id" title="lemma">length_Batch_shape</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">introv</span> <span class="id" title="var">Hsim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_rw2"><span class="id" title="lemma">Batch_replace_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_sim"><span class="id" title="lemma">Vector_hd_sim</span></a> <span class="id" title="var">Hsim</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl_sim"><span class="id" title="lemma">Vector_tl_sim</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Corollary</span> <a id="Batch_replace_contents_shape_rev" class="idref" href="#Batch_replace_contents_shape_rev"><span class="id" title="lemma">Batch_replace_contents_shape_rev</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b1:300" class="idref" href="#b1:300"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A1:297" class="idref" href="#A1:297"><span class="id" title="binder">A1</span></a> <a id="B:298" class="idref" href="#B:298"><span class="id" title="binder">B</span></a> <a id="C:299" class="idref" href="#C:299"><span class="id" title="binder">C</span></a>) `(<a id="b2:302" class="idref" href="#b2:302"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A2:301" class="idref" href="#A2:301"><span class="id" title="binder">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:298"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:299"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> (<a id="A':303" class="idref" href="#A':303"><span class="id" title="binder">A'</span></a>: <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#A':303"><span class="id" title="variable">A'</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b1:300"><span class="id" title="variable">b1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#27576a5753c5585bee527e508a617c4d"><span class="id" title="notation">~!~</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#A':303"><span class="id" title="variable">A'</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b2:302"><span class="id" title="variable">b2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:298"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:299"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b1:300"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:298"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:299"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b2:302"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hsim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_shape_spec"><span class="id" title="lemma">Batch_shape_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_shape_spec"><span class="id" title="lemma">Batch_shape_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hsim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <span class="id" title="var">b1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <span class="id" title="var">b2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents_sim_length"><span class="id" title="lemma">Batch_replace_contents_sim_length</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Corollary</span> <a id="Batch_replace_contents_shape_iff" class="idref" href="#Batch_replace_contents_shape_iff"><span class="id" title="lemma">Batch_replace_contents_shape_iff</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b1:307" class="idref" href="#b1:307"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A1:304" class="idref" href="#A1:304"><span class="id" title="binder">A1</span></a> <a id="B:305" class="idref" href="#B:305"><span class="id" title="binder">B</span></a> <a id="C:306" class="idref" href="#C:306"><span class="id" title="binder">C</span></a>) `(<a id="b2:309" class="idref" href="#b2:309"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A2:308" class="idref" href="#A2:308"><span class="id" title="binder">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:305"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:306"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> (<a id="A':310" class="idref" href="#A':310"><span class="id" title="binder">A'</span></a>: <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#A':310"><span class="id" title="variable">A'</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b1:307"><span class="id" title="variable">b1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#27576a5753c5585bee527e508a617c4d"><span class="id" title="notation">~!~</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#A':310"><span class="id" title="variable">A'</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b2:309"><span class="id" title="variable">b2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:305"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:306"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b1:307"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:305"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:306"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b2:309"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents_shape_rev"><span class="id" title="lemma">Batch_replace_contents_shape_rev</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents_shape"><span class="id" title="lemma">Batch_replace_contents_shape</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1039"></a><h2 class="section"><code>Batch_make</code> Equal Iff <code>Batch_replace_contents</code> Equal</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_replace_sim_iff_make_sim" class="idref" href="#Batch_replace_sim_iff_make_sim"><span class="id" title="lemma">Batch_replace_sim_iff_make_sim</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b1:314" class="idref" href="#b1:314"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A1:311" class="idref" href="#A1:311"><span class="id" title="binder">A1</span></a> <a id="B:312" class="idref" href="#B:312"><span class="id" title="binder">B</span></a> <a id="C:313" class="idref" href="#C:313"><span class="id" title="binder">C</span></a>) `(<a id="b2:316" class="idref" href="#b2:316"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A2:315" class="idref" href="#A2:315"><span class="id" title="binder">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:312"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:313"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:314"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#27576a5753c5585bee527e508a617c4d"><span class="id" title="notation">~!~</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:316"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="A':317" class="idref" href="#A':317"><span class="id" title="binder">A'</span></a>, <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> (<span class="id" title="var">A'</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#A':317"><span class="id" title="variable">A'</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b1:314"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#27576a5753c5585bee527e508a617c4d"><span class="id" title="notation">~!~</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:316"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make_shape_iff"><span class="id" title="lemma">Batch_make_shape_iff</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents_shape_iff"><span class="id" title="lemma">Batch_replace_contents_shape_iff</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1040"></a><h2 class="section">Similarity Lemmas for <code>Batch_make</code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_sim1" class="idref" href="#Batch_make_sim1"><span class="id" title="lemma">Batch_make_sim1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b:321" class="idref" href="#b:321"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:318" class="idref" href="#A:318"><span class="id" title="binder">A</span></a> <a id="B:319" class="idref" href="#B:319"><span class="id" title="binder">B</span></a> <a id="C:320" class="idref" href="#C:320"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v1:322" class="idref" href="#v1:322"><span class="id" title="binder">v1</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:321"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#B:319"><span class="id" title="variable">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v2:323" class="idref" href="#v2:323"><span class="id" title="binder">v2</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:321"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#B:319"><span class="id" title="variable">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hsim:324" class="idref" href="#Hsim:324"><span class="id" title="binder">Hsim</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#v1:322"><span class="id" title="variable">v1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#a8714907635432d3223f585df0b02c5b"><span class="id" title="notation">~~</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v2:323"><span class="id" title="variable">v2</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:321"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v1:322"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:321"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v2:323"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_sim_eq"><span class="id" title="lemma">Vector_sim_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;sort&nbsp;of&nbsp;lemma&nbsp;is&nbsp;very&nbsp;useful&nbsp;when&nbsp;the&nbsp;complexity&nbsp;of&nbsp;expression<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;v1&gt;&gt;&nbsp;and&nbsp;&lt;&lt;v2&gt;&gt;&nbsp;obstructs&nbsp;tactics&nbsp;like&nbsp;&lt;&lt;rewrite&gt;&gt;&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_sim2" class="idref" href="#Batch_make_sim2"><span class="id" title="lemma">Batch_make_sim2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b1:328" class="idref" href="#b1:328"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:325" class="idref" href="#A:325"><span class="id" title="binder">A</span></a> <a id="B:326" class="idref" href="#B:326"><span class="id" title="binder">B</span></a> <a id="C:327" class="idref" href="#C:327"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b2:329" class="idref" href="#b2:329"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:325"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:326"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:327"><span class="id" title="variable">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v1:330" class="idref" href="#v1:330"><span class="id" title="binder">v1</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:328"><span class="id" title="variable">b1</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#B:326"><span class="id" title="variable">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v2:331" class="idref" href="#v2:331"><span class="id" title="binder">v2</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:329"><span class="id" title="variable">b2</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#B:326"><span class="id" title="variable">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:332" class="idref" href="#Heq:332"><span class="id" title="binder">Heq</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#b1:328"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:329"><span class="id" title="variable">b2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hsim:333" class="idref" href="#Hsim:333"><span class="id" title="binder">Hsim</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#v1:330"><span class="id" title="variable">v1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#a8714907635432d3223f585df0b02c5b"><span class="id" title="notation">~~</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v2:331"><span class="id" title="variable">v2</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:328"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v1:330"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:329"><span class="id" title="variable">b2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v2:331"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> (<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make_sim1"><span class="id" title="lemma">Batch_make_sim1</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_sim3" class="idref" href="#Batch_make_sim3"><span class="id" title="lemma">Batch_make_sim3</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b1:337" class="idref" href="#b1:337"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A1:334" class="idref" href="#A1:334"><span class="id" title="binder">A1</span></a> <a id="B:335" class="idref" href="#B:335"><span class="id" title="binder">B</span></a> <a id="C:336" class="idref" href="#C:336"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b2:339" class="idref" href="#b2:339"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A2:338" class="idref" href="#A2:338"><span class="id" title="binder">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:335"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:336"><span class="id" title="variable">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v1:340" class="idref" href="#v1:340"><span class="id" title="binder">v1</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:337"><span class="id" title="variable">b1</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#B:335"><span class="id" title="variable">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v2:341" class="idref" href="#v2:341"><span class="id" title="binder">v2</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:339"><span class="id" title="variable">b2</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#B:335"><span class="id" title="variable">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:342" class="idref" href="#Heq:342"><span class="id" title="binder">Heq</span></a>: <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:335"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:336"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b1:337"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:335"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:336"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b2:339"><span class="id" title="variable">b2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hsim:343" class="idref" href="#Hsim:343"><span class="id" title="binder">Hsim</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#v1:340"><span class="id" title="variable">v1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#a8714907635432d3223f585df0b02c5b"><span class="id" title="notation">~~</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v2:341"><span class="id" title="variable">v2</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:337"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v1:340"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:339"><span class="id" title="variable">b2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v2:341"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_fun_sim_eq"><span class="id" title="lemma">Vector_fun_sim_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make_shape"><span class="id" title="lemma">Batch_make_shape</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_coerce" class="idref" href="#Batch_make_coerce"><span class="id" title="lemma">Batch_make_coerce</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b:347" class="idref" href="#b:347"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:344" class="idref" href="#A:344"><span class="id" title="binder">A</span></a> <a id="B:345" class="idref" href="#B:345"><span class="id" title="binder">B</span></a> <a id="C:346" class="idref" href="#C:346"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v1:348" class="idref" href="#v1:348"><span class="id" title="binder">v1</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:347"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#B:345"><span class="id" title="variable">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v2:350" class="idref" href="#v2:350"><span class="id" title="binder">v2</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> <a id="n:349" class="idref" href="#n:349"><span class="id" title="binder">n</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:345"><span class="id" title="variable">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:351" class="idref" href="#Heq:351"><span class="id" title="binder">Heq</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#n:349"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:347"><span class="id" title="variable">b</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#v1:348"><span class="id" title="variable">v1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#a8714907635432d3223f585df0b02c5b"><span class="id" title="notation">~~</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v2:350"><span class="id" title="variable">v2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:347"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v1:348"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:347"><span class="id" title="variable">b</span></a> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">coerce</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Heq:351"><span class="id" title="variable">Heq</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v2:350"><span class="id" title="variable">v2</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#coerce_Vector_eq_refl"><span class="id" title="lemma">coerce_Vector_eq_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make_sim1"><span class="id" title="lemma">Batch_make_sim1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Rewrite the <code>Batch</code> argument to an equal one by
      coercing the length proof in the vector. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_rw_alt" class="idref" href="#Batch_make_rw_alt"><span class="id" title="lemma">Batch_make_rw_alt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b1:355" class="idref" href="#b1:355"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:352" class="idref" href="#A:352"><span class="id" title="binder">A</span></a> <a id="B:353" class="idref" href="#B:353"><span class="id" title="binder">B</span></a> <a id="C:354" class="idref" href="#C:354"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b2:356" class="idref" href="#b2:356"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:352"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:353"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:354"><span class="id" title="variable">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v:357" class="idref" href="#v:357"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:355"><span class="id" title="variable">b1</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#B:353"><span class="id" title="variable">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:358" class="idref" href="#Heq:358"><span class="id" title="binder">Heq</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#b1:355"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:356"><span class="id" title="variable">b2</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:355"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:357"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:356"><span class="id" title="variable">b2</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#7734d17eb5f06d3843f509946ed5ba45"><span class="id" title="notation">rew</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#7734d17eb5f06d3843f509946ed5ba45"><span class="id" title="notation">[</span></a><span class="id" title="keyword">fun</span> <a id="b:359" class="idref" href="#b:359"><span class="id" title="binder">b</span></a> ⇒ <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:359"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#B:353"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#7734d17eb5f06d3843f509946ed5ba45"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Heq:358"><span class="id" title="variable">Heq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#7734d17eb5f06d3843f509946ed5ba45"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:357"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> (<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make_sim1"><span class="id" title="lemma">Batch_make_sim1</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_rw" class="idref" href="#Batch_make_rw"><span class="id" title="lemma">Batch_make_rw</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b1:363" class="idref" href="#b1:363"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:360" class="idref" href="#A:360"><span class="id" title="binder">A</span></a> <a id="B:361" class="idref" href="#B:361"><span class="id" title="binder">B</span></a> <a id="C:362" class="idref" href="#C:362"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b2:364" class="idref" href="#b2:364"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:360"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:361"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:362"><span class="id" title="variable">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v:365" class="idref" href="#v:365"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:363"><span class="id" title="variable">b1</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#B:361"><span class="id" title="variable">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:366" class="idref" href="#Heq:366"><span class="id" title="binder">Heq</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#b1:363"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:364"><span class="id" title="variable">b2</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:363"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:365"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:364"><span class="id" title="variable">b2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">coerce</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_ind_r"><span class="id" title="definition">eq_ind_r</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="z:367" class="idref" href="#z:367"><span class="id" title="binder">z</span></a> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#z:367"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:364"><span class="id" title="variable">b2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Heq:366"><span class="id" title="variable">Heq</span></a><a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:365"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#coerce_Vector_eq_refl"><span class="id" title="lemma">coerce_Vector_eq_refl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1041"></a><h2 class="section">Similarity Laws for <code>Batch_replace_contents</code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_replace_sim1" class="idref" href="#Batch_replace_sim1"><span class="id" title="lemma">Batch_replace_sim1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b:371" class="idref" href="#b:371"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:368" class="idref" href="#A:368"><span class="id" title="binder">A</span></a> <a id="B:369" class="idref" href="#B:369"><span class="id" title="binder">B</span></a> <a id="C:370" class="idref" href="#C:370"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v1:373" class="idref" href="#v1:373"><span class="id" title="binder">v1</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:371"><span class="id" title="variable">b</span></a>) <a id="A':372" class="idref" href="#A':372"><span class="id" title="binder">A'</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v2:374" class="idref" href="#v2:374"><span class="id" title="binder">v2</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:371"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#A':372"><span class="id" title="variable">A'</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hsim:375" class="idref" href="#Hsim:375"><span class="id" title="binder">Hsim</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#v1:373"><span class="id" title="variable">v1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#a8714907635432d3223f585df0b02c5b"><span class="id" title="notation">~~</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v2:374"><span class="id" title="variable">v2</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:371"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v1:373"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:371"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v2:374"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_rw2"><span class="id" title="lemma">Batch_replace_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">IHb</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl_sim"><span class="id" title="lemma">Vector_tl_sim</span></a> <span class="id" title="var">Hsim</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_sim"><span class="id" title="lemma">Vector_hd_sim</span></a> <span class="id" title="var">Hsim</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_replace_sim2" class="idref" href="#Batch_replace_sim2"><span class="id" title="lemma">Batch_replace_sim2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b1:379" class="idref" href="#b1:379"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:376" class="idref" href="#A:376"><span class="id" title="binder">A</span></a> <a id="B:377" class="idref" href="#B:377"><span class="id" title="binder">B</span></a> <a id="C:378" class="idref" href="#C:378"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b2:380" class="idref" href="#b2:380"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:376"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:377"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:378"><span class="id" title="variable">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v1:382" class="idref" href="#v1:382"><span class="id" title="binder">v1</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:379"><span class="id" title="variable">b1</span></a>) <a id="A':381" class="idref" href="#A':381"><span class="id" title="binder">A'</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v2:383" class="idref" href="#v2:383"><span class="id" title="binder">v2</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:380"><span class="id" title="variable">b2</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#A':381"><span class="id" title="variable">A'</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:384" class="idref" href="#Heq:384"><span class="id" title="binder">Heq</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#b1:379"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:380"><span class="id" title="variable">b2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hsim:385" class="idref" href="#Hsim:385"><span class="id" title="binder">Hsim</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_sim"><span class="id" title="definition">Vector_sim</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v1:382"><span class="id" title="variable">v1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v2:383"><span class="id" title="variable">v2</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:379"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v1:382"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:380"><span class="id" title="variable">b2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v2:383"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> (<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_sim1"><span class="id" title="lemma">Batch_replace_sim1</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_replace_sim3" class="idref" href="#Batch_replace_sim3"><span class="id" title="lemma">Batch_replace_sim3</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b1:389" class="idref" href="#b1:389"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A1:386" class="idref" href="#A1:386"><span class="id" title="binder">A1</span></a> <a id="B:387" class="idref" href="#B:387"><span class="id" title="binder">B</span></a> <a id="C:388" class="idref" href="#C:388"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b2:391" class="idref" href="#b2:391"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A2:390" class="idref" href="#A2:390"><span class="id" title="binder">A2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:387"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:388"><span class="id" title="variable">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v1:393" class="idref" href="#v1:393"><span class="id" title="binder">v1</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:389"><span class="id" title="variable">b1</span></a>) <a id="A':392" class="idref" href="#A':392"><span class="id" title="binder">A'</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="v2:394" class="idref" href="#v2:394"><span class="id" title="binder">v2</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:391"><span class="id" title="variable">b2</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#A':392"><span class="id" title="variable">A'</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:395" class="idref" href="#Heq:395"><span class="id" title="binder">Heq</span></a>: <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:387"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:388"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b1:389"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:387"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:388"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b2:391"><span class="id" title="variable">b2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hsim:396" class="idref" href="#Hsim:396"><span class="id" title="binder">Hsim</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#v1:393"><span class="id" title="variable">v1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#a8714907635432d3223f585df0b02c5b"><span class="id" title="notation">~~</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v2:394"><span class="id" title="variable">v2</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:389"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v1:393"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:391"><span class="id" title="variable">b2</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v2:394"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_fun_sim_eq"><span class="id" title="lemma">Vector_fun_sim_eq</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents_shape_iff"><span class="id" title="lemma">Batch_replace_contents_shape_iff</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1042"></a><h2 class="section">Naturality of <code>Batch_make</code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_natural" class="idref" href="#Batch_make_natural"><span class="id" title="lemma">Batch_make_natural</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b:400" class="idref" href="#b:400"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:397" class="idref" href="#A:397"><span class="id" title="binder">A</span></a> <a id="B:398" class="idref" href="#B:398"><span class="id" title="binder">B</span></a> <a id="C:399" class="idref" href="#C:399"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="f:402" class="idref" href="#f:402"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#C:399"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="D:401" class="idref" href="#D:401"><span class="id" title="binder">D</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="Hsim:405" class="idref" href="#Hsim:405"><span class="id" title="binder">Hsim</span></a>: <a id="v1:403" class="idref" href="#v1:403"><span class="id" title="binder">v1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#a8714907635432d3223f585df0b02c5b"><span class="id" title="notation">~~</span></a> <a id="v2:404" class="idref" href="#v2:404"><span class="id" title="binder">v2</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#f:402"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:400"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v1:403"><span class="id" title="variable">v1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:397"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:398"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:402"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:400"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#v2:404"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">v2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">v1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">D</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span> <span class="id" title="var">c</span> | <span class="id" title="var">C</span> <span class="id" title="var">rest</span> <span class="id" title="var">IHrest</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">D</span> <span class="id" title="var">f</span> <span class="id" title="var">v1</span> <span class="id" title="var">v2</span> <span class="id" title="var">Hsim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) <span class="id" title="var">f</span> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">rest</span> <span class="id" title="var">a</span>)) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Step"><span class="id" title="constructor">Step</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) (<a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> <span class="id" title="var">f</span>) <span class="id" title="var">rest</span>) <span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">v2</span>, <span class="id" title="var">v1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make_rw2"><span class="id" title="lemma">Batch_make_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_sim"><span class="id" title="lemma">Vector_hd_sim</span></a> <span class="id" title="var">Hsim</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">change_left</span> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">(</span></a><span class="id" title="var">f</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <span class="id" title="var">rest</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v1</span>)<a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">Vector_hd</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">v1</span></a><a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHrest</span> <span class="id" title="var">_</span> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a> <span class="id" title="var">f</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">IHrest</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v1</span>) (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v2</span>) (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl_sim"><span class="id" title="lemma">Vector_tl_sim</span></a> <span class="id" title="var">Hsim</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_natural_rw1" class="idref" href="#Batch_make_natural_rw1"><span class="id" title="lemma">Batch_make_natural_rw1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="b:409" class="idref" href="#b:409"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:406" class="idref" href="#A:406"><span class="id" title="binder">A</span></a> <a id="B:407" class="idref" href="#B:407"><span class="id" title="binder">B</span></a> <a id="C:408" class="idref" href="#C:408"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="f:411" class="idref" href="#f:411"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#C:408"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="D:410" class="idref" href="#D:410"><span class="id" title="binder">D</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="v:412" class="idref" href="#v:412"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:409"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#B:407"><span class="id" title="variable">B</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#f:411"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:409"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:412"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:406"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:407"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:411"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:409"><span class="id" title="variable">b</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">coerce</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#batch_length_map"><span class="id" title="lemma">batch_length_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:412"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make_natural"><span class="id" title="lemma">Batch_make_natural</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">b</span> <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v1</span> := <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v2</span> :=<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#coerce_Vector_length"><span class="id" title="definition">coerce_Vector_length</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#batch_length_map"><span class="id" title="lemma">batch_length_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="id" title="tactic">by</span> <span class="id" title="var">vector_sim</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_natural_rw2" class="idref" href="#Batch_make_natural_rw2"><span class="id" title="lemma">Batch_make_natural_rw2</span></a> `(<a id="b:416" class="idref" href="#b:416"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:413" class="idref" href="#A:413"><span class="id" title="binder">A</span></a> <a id="B:414" class="idref" href="#B:414"><span class="id" title="binder">B</span></a> <a id="C:415" class="idref" href="#C:415"><span class="id" title="binder">C</span></a>) `(<a id="f:418" class="idref" href="#f:418"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#C:415"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="D:417" class="idref" href="#D:417"><span class="id" title="binder">D</span></a>) <a id="v:419" class="idref" href="#v:419"><span class="id" title="binder">v</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:413"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:414"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#f:418"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:416"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#v:419"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#f:418"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:416"><span class="id" title="variable">b</span></a> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#coerce_Vector_length"><span class="id" title="definition">coerce_Vector_length</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#batch_length_map"><span class="id" title="lemma">batch_length_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)) <a class="idref" href="Tealeaves.Functors.Batch.html#v:419"><span class="id" title="variable">v</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make_natural_rw1"><span class="id" title="lemma">Batch_make_natural_rw1</span></a> <span class="id" title="var">b</span> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make_sim1"><span class="id" title="lemma">Batch_make_sim1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">vector_sim</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1043"></a><h2 class="section">Naturality of <code>Batch_contents</code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_contents_natural" class="idref" href="#Batch_contents_natural"><span class="id" title="lemma">Batch_contents_natural</span></a>: <span class="id" title="keyword">∀</span> `(<a id="b:423" class="idref" href="#b:423"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:420" class="idref" href="#A:420"><span class="id" title="binder">A</span></a> <a id="B:421" class="idref" href="#B:421"><span class="id" title="binder">B</span></a> <a id="C:422" class="idref" href="#C:422"><span class="id" title="binder">C</span></a>) `(<a id="f:425" class="idref" href="#f:425"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:420"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a id="A':424" class="idref" href="#A':424"><span class="id" title="binder">A'</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:423"><span class="id" title="variable">b</span></a>)) <a class="idref" href="Tealeaves.Functors.Batch.html#f:425"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:423"><span class="id" title="variable">b</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#a8714907635432d3223f585df0b02c5b"><span class="id" title="notation">~~</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#mapfst_Batch"><span class="id" title="definition">mapfst_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:425"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:423"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#map_Vector_vcons"><span class="id" title="lemma">map_Vector_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#vcons_sim"><span class="id" title="lemma">vcons_sim</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1044"></a><h2 class="section">Specification for <code>Batch_replace_contents</code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_replace_contents_spec" class="idref" href="#Batch_replace_contents_spec"><span class="id" title="lemma">Batch_replace_contents_spec</span></a> {<a id="A:426" class="idref" href="#A:426"><span class="id" title="binder">A</span></a> <a id="A':427" class="idref" href="#A':427"><span class="id" title="binder">A'</span></a> <a id="B:428" class="idref" href="#B:428"><span class="id" title="binder">B</span></a> <a id="C:429" class="idref" href="#C:429"><span class="id" title="binder">C</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b:430" class="idref" href="#b:430"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:426"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:428"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:429"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:430"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'precoerce'_x_'in'_x"><span class="id" title="notation">precoerce</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'precoerce'_x_'in'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#length_cojoin_Batch"><span class="id" title="lemma">length_cojoin_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:430"><span class="id" title="variable">b</span></a><a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'precoerce'_x_'in'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'precoerce'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#cojoin_Batch"><span class="id" title="definition">cojoin_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:430"><span class="id" title="variable">b</span></a> (<span class="id" title="var">B</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#A':427"><span class="id" title="variable">A'</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">b</span>. <span class="id" title="var">ext</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_cojoin_Batch"><span class="id" title="lemma">length_cojoin_Batch</span></a> (<span class="id" title="var">A'</span> := <span class="id" title="var">A'</span>) <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_rw2"><span class="id" title="lemma">Batch_replace_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make_natural_rw2"><span class="id" title="lemma">Batch_make_natural_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_coerce_eq"><span class="id" title="lemma">Vector_hd_coerce_eq</span></a> (<span class="id" title="var">Heq</span> := <span class="id" title="var">Heq</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHb</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v</span>) (<a class="idref" href="Tealeaves.Functors.Batch.html#length_cojoin_Batch"><span class="id" title="lemma">length_cojoin_Batch</span></a> <span class="id" title="var">b</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make_sim1"><span class="id" title="lemma">Batch_make_sim1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">vector_sim</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1045"></a><h2 class="section">Replacing Contents Does Not Change <code>length_Batch</code>, <code>shape</code>, or <code>Batch_make</code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="length_replace_contents" class="idref" href="#length_replace_contents"><span class="id" title="lemma">length_replace_contents</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:431" class="idref" href="#A:431"><span class="id" title="binder">A</span></a> <a id="B:432" class="idref" href="#B:432"><span class="id" title="binder">B</span></a> <a id="C:433" class="idref" href="#C:433"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>} (<a id="b:434" class="idref" href="#b:434"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:431"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:432"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:433"><span class="id" title="variable">C</span></a>) `(<a id="v:436" class="idref" href="#v:436"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> <span class="id" title="var">_</span> <a id="A':435" class="idref" href="#A':435"><span class="id" title="binder">A'</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:434"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:434"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:436"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">IHb</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_replace_contents" class="idref" href="#Batch_make_replace_contents"><span class="id" title="lemma">Batch_make_replace_contents</span></a> {<a id="A:437" class="idref" href="#A:437"><span class="id" title="binder">A</span></a> <a id="A':438" class="idref" href="#A':438"><span class="id" title="binder">A'</span></a> <a id="B:439" class="idref" href="#B:439"><span class="id" title="binder">B</span></a> <a id="C:440" class="idref" href="#C:440"><span class="id" title="binder">C</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b:441" class="idref" href="#b:441"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:437"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:439"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:440"><span class="id" title="variable">C</span></a>) (<a id="v:442" class="idref" href="#v:442"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:441"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#A':438"><span class="id" title="variable">A'</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:441"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:442"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'precoerce'_x_'in'_x"><span class="id" title="notation">precoerce</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'precoerce'_x_'in'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_replace_contents"><span class="id" title="lemma">length_replace_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:441"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:442"><span class="id" title="variable">v</span></a>)<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'precoerce'_x_'in'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'precoerce'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'precoerce'_x_'in'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> (<span class="id" title="var">B</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#B:439"><span class="id" title="variable">B</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b:441"><span class="id" title="variable">b</span></a><a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'precoerce'_x_'in'_x"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ext</span> <span class="id" title="var">v'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_replace_contents"><span class="id" title="lemma">length_replace_contents</span></a> <span class="id" title="var">b</span> <span class="id" title="var">v</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHb</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v</span>) (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHb</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_replace_contents"><span class="id" title="lemma">length_replace_contents</span></a> <span class="id" title="var">b</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd"><span class="id" title="definition">Vector_hd</span></a> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#coerce_Vector_length"><span class="id" title="definition">coerce_Vector_length</span></a> <span class="id" title="var">e</span> <span class="id" title="var">v'</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd"><span class="id" title="definition">Vector_hd</span></a> <span class="id" title="var">v'</span>) <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Set</span> <span class="id" title="var">Keyed</span> <span class="id" title="var">Unification</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Unset</span> <span class="id" title="var">Keyed</span> <span class="id" title="var">Unification</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_eq"><span class="id" title="lemma">Vector_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#coerce_Vector_contents"><span class="id" title="lemma">coerce_Vector_contents</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl_coerce_sim"><span class="id" title="lemma">Vector_tl_coerce_sim</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_coerce_eq"><span class="id" title="lemma">Vector_hd_coerce_eq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_shape_replace_contents" class="idref" href="#Batch_shape_replace_contents"><span class="id" title="lemma">Batch_shape_replace_contents</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:443" class="idref" href="#A:443"><span class="id" title="binder">A</span></a> <a id="A':444" class="idref" href="#A':444"><span class="id" title="binder">A'</span></a> <a id="B:445" class="idref" href="#B:445"><span class="id" title="binder">B</span></a> <a id="C:446" class="idref" href="#C:446"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>} (<a id="b:447" class="idref" href="#b:447"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:443"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:445"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:446"><span class="id" title="variable">C</span></a>) `(<a id="v:448" class="idref" href="#v:448"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Functors.Batch.html#A':444"><span class="id" title="variable">A'</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:445"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:446"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b:447"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:445"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:446"><span class="id" title="variable">C</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:447"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:448"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">IHb</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1046"></a><h1 class="section">Lens-like laws</h1>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="deconstruction.lens_laws" class="idref" href="#deconstruction.lens_laws"><span class="id" title="section">lens_laws</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="A:449" class="idref" href="#A:449"><span class="id" title="binder">A</span></a> <a id="A':450" class="idref" href="#A':450"><span class="id" title="binder">A'</span></a> <a id="A'':451" class="idref" href="#A'':451"><span class="id" title="binder">A''</span></a> <a id="B:452" class="idref" href="#B:452"><span class="id" title="binder">B</span></a> <a id="C:453" class="idref" href="#C:453"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_contents" class="idref" href="#Batch_make_contents"><span class="id" title="lemma">Batch_make_contents</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b:454" class="idref" href="#b:454"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.lens_laws.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.lens_laws.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.lens_laws.C"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:454"><span class="id" title="variable">b</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:454"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#extract_Batch"><span class="id" title="definition">extract_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:454"><span class="id" title="variable">b</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make_rw2"><span class="id" title="lemma">Batch_make_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents_rw2"><span class="id" title="lemma">Batch_contents_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl_vcons"><span class="id" title="lemma">Vector_tl_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_vcons"><span class="id" title="lemma">Vector_hd_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_get_put" class="idref" href="#Batch_get_put"><span class="id" title="lemma">Batch_get_put</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b:455" class="idref" href="#b:455"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.lens_laws.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.lens_laws.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.lens_laws.C"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:455"><span class="id" title="variable">b</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:455"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:455"><span class="id" title="variable">b</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl_vcons"><span class="id" title="lemma">Vector_tl_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_vcons"><span class="id" title="lemma">Vector_hd_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_put_get" class="idref" href="#Batch_put_get"><span class="id" title="lemma">Batch_put_get</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b:456" class="idref" href="#b:456"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.lens_laws.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.lens_laws.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.lens_laws.C"><span class="id" title="variable">C</span></a>) (<a id="v:457" class="idref" href="#v:457"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:456"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.lens_laws.A'"><span class="id" title="variable">A'</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:456"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:457"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">coerce</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#length_replace_contents"><span class="id" title="lemma">length_replace_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:456"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:457"><span class="id" title="variable">v</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:457"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_replace_contents"><span class="id" title="lemma">length_replace_contents</span></a> <span class="id" title="var">b</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_nil_eq"><span class="id" title="lemma">Vector_nil_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_surjective_pairing2"><span class="id" title="lemma">Vector_surjective_pairing2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_coerce_eq"><span class="id" title="lemma">Vector_hd_coerce_eq</span></a> (<span class="id" title="var">Heq</span> := <span class="id" title="var">Heq</span>) (<span class="id" title="var">v</span> := <span class="id" title="var">v</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHb</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v</span>) (<a class="idref" href="Tealeaves.Functors.List.html#S_uncons"><span class="id" title="lemma">S_uncons</span></a> <span class="id" title="var">Heq</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> (@<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.lens_laws.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.lens_laws.B"><span class="id" title="variable">B</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;^^&nbsp;I&nbsp;have&nbsp;no&nbsp;idea&nbsp;why&nbsp;this&nbsp;got&nbsp;expanded&nbsp;but&nbsp;it&nbsp;blocks&nbsp;rewriting&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_sim_eq"><span class="id" title="lemma">Vector_sim_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">vector_sim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_put_put" class="idref" href="#Batch_put_put"><span class="id" title="lemma">Batch_put_put</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b:458" class="idref" href="#b:458"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.lens_laws.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.lens_laws.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.lens_laws.C"><span class="id" title="variable">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="v1:459" class="idref" href="#v1:459"><span class="id" title="binder">v1</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:458"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.lens_laws.A'"><span class="id" title="variable">A'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="v2:460" class="idref" href="#v2:460"><span class="id" title="binder">v2</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:458"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.lens_laws.A''"><span class="id" title="variable">A''</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:458"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v1:459"><span class="id" title="variable">v1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">coerce</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#length_replace_contents"><span class="id" title="lemma">length_replace_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:458"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v1:459"><span class="id" title="variable">v1</span></a><a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v2:460"><span class="id" title="variable">v2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:458"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v2:460"><span class="id" title="variable">v2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_sim3"><span class="id" title="lemma">Batch_replace_sim3</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_shape_replace_contents"><span class="id" title="lemma">Batch_shape_replace_contents</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">vector_sim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.lens_laws"><span class="id" title="section">lens_laws</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1047"></a><h2 class="section">Batch is Shapely</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="deconstruction.Batch_shapely" class="idref" href="#deconstruction.Batch_shapely"><span class="id" title="section">Batch_shapely</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="A:461" class="idref" href="#A:461"><span class="id" title="binder">A</span></a> <a id="B:462" class="idref" href="#B:462"><span class="id" title="binder">B</span></a> <a id="C:463" class="idref" href="#C:463"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_shapeliness" class="idref" href="#Batch_shapeliness"><span class="id" title="lemma">Batch_shapeliness</span></a>: <span class="id" title="keyword">∀</span> (<a id="b1:464" class="idref" href="#b1:464"><span class="id" title="binder">b1</span></a> <a id="b2:465" class="idref" href="#b2:465"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.Batch_shapely.A"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.Batch_shapely.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.Batch_shapely.C"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.Batch_shapely.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.Batch_shapely.C"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b1:464"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#shape"><span class="id" title="definition">shape</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.Batch_shapely.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.Batch_shapely.C"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b2:465"><span class="id" title="variable">b2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#tolist"><span class="id" title="definition">tolist</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.Batch_shapely.B"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.Batch_shapely.C"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b1:464"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ShapelyFunctor.html#tolist"><span class="id" title="definition">tolist</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:465"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#b1:464"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:465"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hshape</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_simultaneous_ind"><span class="id" title="lemma">Batch_simultaneous_ind</span></a> <span class="id" title="var">Hshape</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">X</span> <span class="id" title="var">b1'</span> <span class="id" title="var">b2'</span> <span class="id" title="var">Heq</span> <span class="id" title="var">a1</span> <span class="id" title="var">a2</span> <span class="id" title="var">Hshape'</span> <span class="id" title="var">Hlist</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#tolist_Batch_rw2"><span class="id" title="lemma">tolist_Batch_rw2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlist</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#tolist_Batch_rw2"><span class="id" title="lemma">tolist_Batch_rw2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlist</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">change</span> (?<span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <span class="id" title="keyword">with</span> (<a class="idref" href="Tealeaves.Classes.Categorical.Monad.html#ret"><span class="id" title="definition">ret</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">_</span> <span class="id" title="var">x</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hlist</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">a1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="Tealeaves.Functors.List.html#list_app_inv_r2"><span class="id" title="lemma">list_app_inv_r2</span></a>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">b1'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">b2'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Tealeaves.Functors.List.html#list_app_inv_l2"><span class="id" title="lemma">list_app_inv_l2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction.Batch_shapely"><span class="id" title="section">Batch_shapely</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Functors.Batch.html#deconstruction"><span class="id" title="section">deconstruction</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1048"></a><h1 class="section">Theory About Batch</h1>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="Batch_theory" class="idref" href="#Batch_theory"><span class="id" title="section">Batch_theory</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_precompose1" class="idref" href="#Batch_make_precompose1"><span class="id" title="lemma">Batch_make_precompose1</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:466" class="idref" href="#A:466"><span class="id" title="binder">A</span></a> <a id="B:467" class="idref" href="#B:467"><span class="id" title="binder">B</span></a> <a id="C':468" class="idref" href="#C':468"><span class="id" title="binder">C'</span></a> <a id="C:469" class="idref" href="#C:469"><span class="id" title="binder">C</span></a> <a id="D:470" class="idref" href="#D:470"><span class="id" title="binder">D</span></a>: <span class="id" title="keyword">Type</span>} (<a id="b:471" class="idref" href="#b:471"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:466"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:467"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#C:469"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:470"><span class="id" title="variable">D</span></a>)) (<a id="f:472" class="idref" href="#f:472"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#C':468"><span class="id" title="variable">C'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:469"><span class="id" title="variable">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="v:473" class="idref" href="#v:473"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:471"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#B:467"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="v':474" class="idref" href="#v':474"><span class="id" title="binder">v'</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <span class="id" title="var">_</span> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#precompose"><span class="id" title="definition">precompose</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:472"><span class="id" title="variable">f</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b:471"><span class="id" title="variable">b</span></a>)) <a class="idref" href="Tealeaves.Functors.Batch.html#B:467"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hsim:475" class="idref" href="#Hsim:475"><span class="id" title="binder">Hsim</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#v:473"><span class="id" title="variable">v</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#a8714907635432d3223f585df0b02c5b"><span class="id" title="notation">~~</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v':474"><span class="id" title="variable">v'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="c:476" class="idref" href="#c:476"><span class="id" title="binder">c</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#C':468"><span class="id" title="variable">C'</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:466"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:467"><span class="id" title="variable">B</span></a>) (<a class="idref" href="Tealeaves.Tactics.Prelude.html#precompose"><span class="id" title="definition">precompose</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:472"><span class="id" title="variable">f</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b:471"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#v':474"><span class="id" title="variable">v'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:476"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:471"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:473"><span class="id" title="variable">v</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#f:472"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:476"><span class="id" title="variable">c</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make_natural_rw2"><span class="id" title="lemma">Batch_make_natural_rw2</span></a> <span class="id" title="var">b</span> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#precompose"><span class="id" title="definition">precompose</span></a> <span class="id" title="var">f</span>) <span class="id" title="var">v'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#precompose"><span class="id" title="definition">precompose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_sim_eq"><span class="id" title="lemma">Vector_sim_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_coerce_sim_l'"><span class="id" title="lemma">Vector_coerce_sim_l'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_precompose2" class="idref" href="#Batch_make_precompose2"><span class="id" title="lemma">Batch_make_precompose2</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:477" class="idref" href="#A:477"><span class="id" title="binder">A</span></a> <a id="B:478" class="idref" href="#B:478"><span class="id" title="binder">B</span></a> <a id="C':479" class="idref" href="#C':479"><span class="id" title="binder">C'</span></a> <a id="C:480" class="idref" href="#C:480"><span class="id" title="binder">C</span></a> <a id="D:481" class="idref" href="#D:481"><span class="id" title="binder">D</span></a>: <span class="id" title="keyword">Type</span>} (<a id="b:482" class="idref" href="#b:482"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:477"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:478"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#C:480"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#D:481"><span class="id" title="variable">D</span></a>)) (<a id="f:483" class="idref" href="#f:483"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#C':479"><span class="id" title="variable">C'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:480"><span class="id" title="variable">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="v:484" class="idref" href="#v:484"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <span class="id" title="var">_</span> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#precompose"><span class="id" title="definition">precompose</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:483"><span class="id" title="variable">f</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b:482"><span class="id" title="variable">b</span></a>)) <a class="idref" href="Tealeaves.Functors.Batch.html#B:478"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="c:485" class="idref" href="#c:485"><span class="id" title="binder">c</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#C':479"><span class="id" title="variable">C'</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <span class="id" title="var">_</span> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#precompose"><span class="id" title="definition">precompose</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:483"><span class="id" title="variable">f</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b:482"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#v:484"><span class="id" title="variable">v</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:485"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:482"><span class="id" title="variable">b</span></a> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">coerce</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#batch_length_map"><span class="id" title="lemma">batch_length_map</span></a> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#precompose"><span class="id" title="definition">precompose</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:483"><span class="id" title="variable">f</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b:482"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:484"><span class="id" title="variable">v</span></a>) (<a class="idref" href="Tealeaves.Functors.Batch.html#f:483"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#c:485"><span class="id" title="variable">c</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make_precompose1"><span class="id" title="lemma">Batch_make_precompose1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_coerce_sim_l"><span class="id" title="lemma">Vector_coerce_sim_l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_natural1" class="idref" href="#Batch_make_natural1"><span class="id" title="lemma">Batch_make_natural1</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:486" class="idref" href="#A:486"><span class="id" title="binder">A</span></a> <a id="B:487" class="idref" href="#B:487"><span class="id" title="binder">B</span></a> <a id="B':488" class="idref" href="#B':488"><span class="id" title="binder">B'</span></a> <a id="C:489" class="idref" href="#C:489"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>} (<a id="b:490" class="idref" href="#b:490"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:486"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B':488"><span class="id" title="variable">B'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:489"><span class="id" title="variable">C</span></a>) (<a id="f:491" class="idref" href="#f:491"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#B:487"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B':488"><span class="id" title="variable">B'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="v:492" class="idref" href="#v:492"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:490"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#B:487"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="v':493" class="idref" href="#v':493"><span class="id" title="binder">v'</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:491"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:490"><span class="id" title="variable">b</span></a>)) <a class="idref" href="Tealeaves.Functors.Batch.html#B:487"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#v:492"><span class="id" title="variable">v</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#a8714907635432d3223f585df0b02c5b"><span class="id" title="notation">~~</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v':493"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:490"><span class="id" title="variable">b</span></a> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Functors.Batch.html#f:491"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:492"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:491"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:490"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#v':493"><span class="id" title="variable">v'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hsim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">v</span>, <span class="id" title="var">v'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_nil_eq"><span class="id" title="lemma">Vector_nil_eq</span></a> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_nil_eq"><span class="id" title="lemma">Vector_nil_eq</span></a> <span class="id" title="var">v'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">v</span>, <span class="id" title="var">v'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;LHS&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make_rw2"><span class="id" title="lemma">Batch_make_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_surjective_pairing2"><span class="id" title="lemma">Vector_surjective_pairing2</span></a> (<span class="id" title="var">v</span> := <span class="id" title="var">v</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#map_Vector_vcons"><span class="id" title="lemma">map_Vector_vcons</span></a> <span class="id" title="var">f</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <span class="id" title="var">b</span>) <span class="id" title="var">_</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd"><span class="id" title="definition">Vector_hd</span></a> <span class="id" title="var">v</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl_vcons"><span class="id" title="lemma">Vector_tl_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_vcons"><span class="id" title="lemma">Vector_hd_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;RHS&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#mapsnd_Batch_rw2"><span class="id" title="lemma">mapsnd_Batch_rw2</span></a> (<span class="id" title="var">B</span> := <span class="id" title="var">B</span>) <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;^^^&nbsp;fails&nbsp;for&nbsp;some&nbsp;reason&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make_precompose2"><span class="id" title="lemma">Batch_make_precompose2</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <span class="id" title="var">f</span> <span class="id" title="var">b</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="tactic">cut</span>: <span class="id" title="var">f</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd"><span class="id" title="definition">Vector_hd</span></a> <span class="id" title="var">v</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">f</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd"><span class="id" title="definition">Vector_hd</span></a> <span class="id" title="var">v'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hsim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_sim"><span class="id" title="lemma">Vector_hd_sim</span></a> <span class="id" title="var">Hsim</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="tactic">cut</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHb</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHb</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">coerce</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#batch_length_map"><span class="id" title="lemma">batch_length_map</span></a> (<a class="idref" href="Tealeaves.Tactics.Prelude.html#precompose"><span class="id" title="definition">precompose</span></a> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.Early.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <span class="id" title="var">f</span> <span class="id" title="var">b</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl"><span class="id" title="definition">Vector_tl</span></a> <span class="id" title="var">v'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_coerce_sim_r'"><span class="id" title="lemma">Vector_coerce_sim_r'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl_sim"><span class="id" title="lemma">Vector_tl_sim</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="map_coerce_Vector" class="idref" href="#map_coerce_Vector"><span class="id" title="lemma">map_coerce_Vector</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="n:494" class="idref" href="#n:494"><span class="id" title="binder">n</span></a> <a id="m:495" class="idref" href="#m:495"><span class="id" title="binder">m</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="Heq:496" class="idref" href="#Heq:496"><span class="id" title="binder">Heq</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#n:494"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#m:495"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="A:497" class="idref" href="#A:497"><span class="id" title="binder">A</span></a> <a id="B:498" class="idref" href="#B:498"><span class="id" title="binder">B</span></a>: <span class="id" title="keyword">Type</span>) (<a id="f:499" class="idref" href="#f:499"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:497"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:498"><span class="id" title="variable">B</span></a>) (<a id="v:500" class="idref" href="#v:500"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#n:494"><span class="id" title="variable">n</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:497"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">coerce</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Heq:496"><span class="id" title="variable">Heq</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Functors.Batch.html#f:499"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:500"><span class="id" title="variable">v</span></a><a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Functors.Batch.html#f:499"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">coerce</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Heq:496"><span class="id" title="variable">Heq</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:500"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_sim_eq"><span class="id" title="lemma">Vector_sim_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#transitive_Vector_sim"><span class="id" title="lemma">transitive_Vector_sim</span></a> (<span class="id" title="var">v2</span> := <a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">f</span> <span class="id" title="var">v</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#symmetric_Vector_sim"><span class="id" title="lemma">symmetric_Vector_sim</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_coerce_sim_r"><span class="id" title="lemma">Vector_coerce_sim_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#map_coerce_Vector"><span class="id" title="lemma">map_coerce_Vector</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_make_natural2" class="idref" href="#Batch_make_natural2"><span class="id" title="lemma">Batch_make_natural2</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:501" class="idref" href="#A:501"><span class="id" title="binder">A</span></a> <a id="B:502" class="idref" href="#B:502"><span class="id" title="binder">B</span></a> <a id="B':503" class="idref" href="#B':503"><span class="id" title="binder">B'</span></a> <a id="C:504" class="idref" href="#C:504"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>} (<a id="b:505" class="idref" href="#b:505"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:501"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B':503"><span class="id" title="variable">B'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:504"><span class="id" title="variable">C</span></a>) (<a id="f:506" class="idref" href="#f:506"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#B:502"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B':503"><span class="id" title="variable">B'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="v:507" class="idref" href="#v:507"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:506"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:505"><span class="id" title="variable">b</span></a>)) <a class="idref" href="Tealeaves.Functors.Batch.html#B:502"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#mapsnd_Batch"><span class="id" title="definition">mapsnd_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:506"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:505"><span class="id" title="variable">b</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#v:507"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:505"><span class="id" title="variable">b</span></a> (<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">coerce</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#batch_length_mapsnd"><span class="id" title="lemma">batch_length_mapsnd</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:506"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:505"><span class="id" title="variable">b</span></a>)<a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <span class="id" title="var">_</span> <a class="idref" href="Tealeaves.Functors.Batch.html#f:506"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:507"><span class="id" title="variable">v</span></a><a class="idref" href="Tealeaves.Functors.VectorRefinement.html#:::'coerce'_x_'in'_x"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#map_coerce_Vector"><span class="id" title="lemma">map_coerce_Vector</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make_natural1"><span class="id" title="lemma">Batch_make_natural1</span></a> <span class="id" title="var">b</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_coerce_sim_l"><span class="id" title="lemma">Vector_coerce_sim_l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_theory"><span class="id" title="section">Batch_theory</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1049"></a><h2 class="section">Misc</h2>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="spec" class="idref" href="#spec"><span class="id" title="section">spec</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="runBatch_const_contents" class="idref" href="#runBatch_const_contents"><span class="id" title="lemma">runBatch_const_contents</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `{<a id="H:512" class="idref" href="#H:512"><span class="id" title="binder">Applicative</span></a> <a id="H:512" class="idref" href="#H:512"><span class="id" title="binder">G</span></a>} `(<a id="b:516" class="idref" href="#b:516"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:513" class="idref" href="#A:513"><span class="id" title="binder">A</span></a> <a id="B:514" class="idref" href="#B:514"><span class="id" title="binder">B</span></a> <a id="C:515" class="idref" href="#C:515"><span class="id" title="binder">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="x:517" class="idref" href="#x:517"><span class="id" title="binder">x</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#G:508"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:514"><span class="id" title="variable">B</span></a>) `(<a id="v:519" class="idref" href="#v:519"><span class="id" title="binder">v</span></a>: <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> <span class="id" title="var">_</span> <a id="A':518" class="idref" href="#A':518"><span class="id" title="binder">A'</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Early.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<span class="id" title="var">G</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#G:508"><span class="id" title="variable">G</span></a>) (<a class="idref" href="Tealeaves.Tactics.Prelude.html#const"><span class="id" title="definition">const</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#x:517"><span class="id" title="variable">x</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b:516"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Early.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<span class="id" title="var">G</span> := <a class="idref" href="Tealeaves.Functors.Batch.html#G:508"><span class="id" title="variable">G</span></a>) (<a class="idref" href="Tealeaves.Tactics.Prelude.html#const"><span class="id" title="definition">const</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#x:517"><span class="id" title="variable">x</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_contents"><span class="id" title="definition">Batch_replace_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:516"><span class="id" title="variable">b</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#v:519"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">fequal</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Batch_eq_iff" class="idref" href="#Batch_eq_iff"><span class="id" title="lemma">Batch_eq_iff</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b1:523" class="idref" href="#b1:523"><span class="id" title="binder">b1</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:520" class="idref" href="#A:520"><span class="id" title="binder">A</span></a> <a id="B:521" class="idref" href="#B:521"><span class="id" title="binder">B</span></a> <a id="C:522" class="idref" href="#C:522"><span class="id" title="binder">C</span></a>) `(<a id="b2:524" class="idref" href="#b2:524"><span class="id" title="binder">b2</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:520"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:521"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:522"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#b1:523"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:524"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:523"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#27576a5753c5585bee527e508a617c4d"><span class="id" title="notation">~!~</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:524"><span class="id" title="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b1:523"><span class="id" title="variable">b1</span></a> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#a8714907635432d3223f585df0b02c5b"><span class="id" title="notation">~~</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b2:524"><span class="id" title="variable">b2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_fun_sim"><span class="id" title="definition">Vector_fun_sim</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hsim</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make_sim1"><span class="id" title="lemma">Batch_make_sim1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">Hmake</span> <span class="id" title="var">Hcontents</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_get_put"><span class="id" title="lemma">Batch_get_put</span></a> <span class="id" title="var">b1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_get_put"><span class="id" title="lemma">Batch_get_put</span></a> <span class="id" title="var">b2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_replace_sim3"><span class="id" title="lemma">Batch_replace_sim3</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make_shape_rev"><span class="id" title="lemma">Batch_make_shape_rev</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Functors.Batch.html#spec"><span class="id" title="section">spec</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1050"></a><h1 class="section">Representation theorems</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="runBatch_repr1" class="idref" href="#runBatch_repr1"><span class="id" title="lemma">runBatch_repr1</span></a> `{<a id="H:529" class="idref" href="#H:529"><span class="id" title="binder">Applicative</span></a> <a id="H:529" class="idref" href="#H:529"><span class="id" title="binder">G</span></a>}:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b:533" class="idref" href="#b:533"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:530" class="idref" href="#A:530"><span class="id" title="binder">A</span></a> <a id="B:531" class="idref" href="#B:531"><span class="id" title="binder">B</span></a> <a id="C:532" class="idref" href="#C:532"><span class="id" title="binder">C</span></a>) (<a id="f:534" class="idref" href="#f:534"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:530"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:525"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:531"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:525"><span class="id" title="variable">G</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:533"><span class="id" title="variable">b</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:533"><span class="id" title="variable">b</span></a>)) <a class="idref" href="Tealeaves.Functors.Batch.html#f:534"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:533"><span class="id" title="variable">b</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Backwards.html#forwards"><span class="id" title="projection">forwards</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> (<span class="id" title="var">G</span> := <a class="idref" href="Tealeaves.Functors.Backwards.html#Backwards"><span class="id" title="record">Backwards</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:525"><span class="id" title="variable">G</span></a>) (<a class="idref" href="Tealeaves.Functors.Backwards.html#mkBackwards"><span class="id" title="constructor">mkBackwards</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:534"><span class="id" title="variable">f</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#b:533"><span class="id" title="variable">b</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#app_pure_natural"><span class="id" title="method">app_pure_natural</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents_rw2"><span class="id" title="lemma">Batch_contents_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <span class="id" title="tactic">at</span> 2. <span class="comment">(*&nbsp;hidden&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#traverse_Vector_vcons"><span class="id" title="lemma">traverse_Vector_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#runBatch_rw2"><span class="id" title="lemma">runBatch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Backwards.html#forwards_ap"><span class="id" title="lemma">forwards_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_ap"><span class="id" title="lemma">map_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_ap"><span class="id" title="lemma">map_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#app_pure_natural"><span class="id" title="method">app_pure_natural</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_to_ap"><span class="id" title="lemma">map_to_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#ap_map"><span class="id" title="lemma">ap_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#map_ap"><span class="id" title="lemma">map_ap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#app_pure_natural"><span class="id" title="method">app_pure_natural</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fequal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ext</span> <span class="id" title="var">b'</span> <span class="id" title="var">v'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Tealeaves.Tactics.Prelude.html#compose"><span class="id" title="definition">compose</span></a>, <a class="idref" href="Tealeaves.Tactics.Prelude.html#precompose"><span class="id" title="definition">precompose</span></a>, <a class="idref" href="Tealeaves.Tactics.Prelude.html#evalAt"><span class="id" title="definition">evalAt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_tl_vcons"><span class="id" title="lemma">Vector_tl_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector_hd_vcons"><span class="id" title="lemma">Vector_hd_vcons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="runBatch_repr2" class="idref" href="#runBatch_repr2"><span class="id" title="lemma">runBatch_repr2</span></a> `{<a id="H:539" class="idref" href="#H:539"><span class="id" title="binder">Applicative</span></a> <a id="H:539" class="idref" href="#H:539"><span class="id" title="binder">G</span></a>}:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> `(<a id="b:543" class="idref" href="#b:543"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a id="A:540" class="idref" href="#A:540"><span class="id" title="binder">A</span></a> <a id="B:541" class="idref" href="#B:541"><span class="id" title="binder">B</span></a> <a id="C:542" class="idref" href="#C:542"><span class="id" title="binder">C</span></a>) (<a id="f:544" class="idref" href="#f:544"><span class="id" title="binder">f</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:540"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:535"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:541"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Early.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:544"><span class="id" title="variable">f</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:543"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:535"><span class="id" title="variable">G</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:543"><span class="id" title="variable">b</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.Backwards.html#forwards"><span class="id" title="projection">forwards</span></a> (<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<span class="id" title="var">G</span> := (<a class="idref" href="Tealeaves.Functors.Backwards.html#Backwards"><span class="id" title="record">Backwards</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:535"><span class="id" title="variable">G</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">T</span> := <a class="idref" href="Tealeaves.Functors.VectorRefinement.html#Vector"><span class="id" title="definition">Vector</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#length_Batch"><span class="id" title="definition">length_Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:543"><span class="id" title="variable">b</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.Backwards.html#mkBackwards"><span class="id" title="constructor">mkBackwards</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:544"><span class="id" title="variable">f</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:543"><span class="id" title="variable">b</span></a>))).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">change_left</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.Backwards.html#forwards"><span class="id" title="projection">forwards</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Backwards.html#Backwards"><span class="id" title="record">Backwards</span></a> <span class="id" title="var">G</span>) (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_make"><span class="id" title="definition">Batch_make</span></a> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<span class="id" title="var">G</span> := <a class="idref" href="Tealeaves.Functors.Backwards.html#Backwards"><span class="id" title="record">Backwards</span></a> <span class="id" title="var">G</span>) (<a class="idref" href="Tealeaves.Functors.Backwards.html#mkBackwards"><span class="id" title="constructor">mkBackwards</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <span class="id" title="var">f</span>) (<a class="idref" href="Tealeaves.Functors.Batch.html#Batch_contents"><span class="id" title="definition">Batch_contents</span></a> <span class="id" title="var">b</span>)))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#runBatch_repr1"><span class="id" title="lemma">runBatch_repr1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#runBatch_via_traverse"><span class="id" title="lemma">runBatch_via_traverse</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#runBatch_via_traverse"><span class="id" title="lemma">runBatch_via_traverse</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">change_left</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> <span class="id" title="var">G</span> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#extract_Batch"><span class="id" title="definition">extract_Batch</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.Backwards.html#forwards"><span class="id" title="projection">forwards</span></a> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Backwards.html#forwards"><span class="id" title="projection">forwards</span></a> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Kleisli.TraversableFunctor.html#traverse"><span class="id" title="definition">traverse</span></a> (<span class="id" title="var">G</span> := <a class="idref" href="Tealeaves.Functors.Backwards.html#Backwards"><span class="id" title="record">Backwards</span></a> (<a class="idref" href="Tealeaves.Functors.Backwards.html#Backwards"><span class="id" title="record">Backwards</span></a> <span class="id" title="var">G</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.Backwards.html#mkBackwards"><span class="id" title="constructor">mkBackwards</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Backwards.html#mkBackwards"><span class="id" title="constructor">mkBackwards</span></a> <a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <span class="id" title="var">f</span><a class="idref" href="Tealeaves.Tactics.Prelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">)</span></a>) <span class="id" title="var">b</span>)))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Backwards.html#traverse_double_backwards"><span class="id" title="lemma">traverse_double_backwards</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1051"></a><h1 class="section">Annotating <code>Batch</code> with Proofs of Occurrence</h1>

</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#"><span class="id" title="library">ContainerFunctor</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#Notations"><span class="id" title="module">ContainerFunctor.Notations</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Classes.Categorical.Applicative.html#Notations"><span class="id" title="module">Applicative.Notations</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Functors.Early.Subset.html#"><span class="id" title="module">Functors.Early.Subset</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Tealeaves.Functors.Early.Subset.html#Notations"><span class="id" title="module">Subset.Notations</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="annotate_Batch_elements" class="idref" href="#annotate_Batch_elements"><span class="id" title="section">annotate_Batch_elements</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1052"></a><h2 class="section">Lemmas regarding <code>tosubset</code></h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="tosubset_Step1" class="idref" href="#tosubset_Step1"><span class="id" title="definition">tosubset_Step1</span></a> {<a id="A:545" class="idref" href="#A:545"><span class="id" title="binder">A</span></a> <a id="B:546" class="idref" href="#B:546"><span class="id" title="binder">B</span></a> <a id="C:547" class="idref" href="#C:547"><span class="id" title="binder">C</span></a>:<span class="id" title="keyword">Type</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="a':548" class="idref" href="#a':548"><span class="id" title="binder">a'</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:545"><span class="id" title="variable">A</span></a>) (<a id="rest:549" class="idref" href="#rest:549"><span class="id" title="binder">rest</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:545"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:546"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#B:546"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:547"><span class="id" title="variable">C</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="a:550" class="idref" href="#a:550"><span class="id" title="binder">a</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:545"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#tosubset"><span class="id" title="definition">tosubset</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:546"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#B:546"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:547"><span class="id" title="variable">C</span></a><a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">)</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#rest:549"><span class="id" title="variable">rest</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:550"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#tosubset"><span class="id" title="definition">tosubset</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:546"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:547"><span class="id" title="variable">C</span></a>) (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#rest:549"><span class="id" title="variable">rest</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a':548"><span class="id" title="variable">a'</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#a:550"><span class="id" title="variable">a</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#tosubset_Batch_rw2"><span class="id" title="lemma">tosubset_Batch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_subset</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="tosubset_Step2" class="idref" href="#tosubset_Step2"><span class="id" title="definition">tosubset_Step2</span></a> {<a id="A:551" class="idref" href="#A:551"><span class="id" title="binder">A</span></a> <a id="B:552" class="idref" href="#B:552"><span class="id" title="binder">B</span></a> <a id="C:553" class="idref" href="#C:553"><span class="id" title="binder">C</span></a>:<span class="id" title="keyword">Type</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="rest:554" class="idref" href="#rest:554"><span class="id" title="binder">rest</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:551"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:552"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#B:552"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:553"><span class="id" title="variable">C</span></a>)) (<a id="a:555" class="idref" href="#a:555"><span class="id" title="binder">a</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:551"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#tosubset"><span class="id" title="definition">tosubset</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:552"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:553"><span class="id" title="variable">C</span></a>) (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#rest:554"><span class="id" title="variable">rest</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:555"><span class="id" title="variable">a</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#a:555"><span class="id" title="variable">a</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#tosubset_Batch_rw2"><span class="id" title="lemma">tosubset_Batch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_subset</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="element_of_Step1" class="idref" href="#element_of_Step1"><span class="id" title="definition">element_of_Step1</span></a> {<a id="A:556" class="idref" href="#A:556"><span class="id" title="binder">A</span></a> <a id="B:557" class="idref" href="#B:557"><span class="id" title="binder">B</span></a> <a id="C:558" class="idref" href="#C:558"><span class="id" title="binder">C</span></a>:<span class="id" title="keyword">Type</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="a':559" class="idref" href="#a':559"><span class="id" title="binder">a'</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:556"><span class="id" title="variable">A</span></a>) (<a id="rest:560" class="idref" href="#rest:560"><span class="id" title="binder">rest</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:556"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:557"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#B:557"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:558"><span class="id" title="variable">C</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="a:561" class="idref" href="#a:561"><span class="id" title="binder">a</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:556"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#a:561"><span class="id" title="variable">a</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#rest:560"><span class="id" title="variable">rest</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#a:561"><span class="id" title="variable">a</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Early.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#rest:560"><span class="id" title="variable">rest</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a':559"><span class="id" title="variable">a'</span></a><a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#element_of_Batch_rw2"><span class="id" title="lemma">element_of_Batch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="element_of_Step2" class="idref" href="#element_of_Step2"><span class="id" title="definition">element_of_Step2</span></a> {<a id="A:562" class="idref" href="#A:562"><span class="id" title="binder">A</span></a> <a id="B:563" class="idref" href="#B:563"><span class="id" title="binder">B</span></a> <a id="C:564" class="idref" href="#C:564"><span class="id" title="binder">C</span></a>:<span class="id" title="keyword">Type</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="rest:565" class="idref" href="#rest:565"><span class="id" title="binder">rest</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:562"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:563"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#B:563"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:564"><span class="id" title="variable">C</span></a>)) (<a id="a:566" class="idref" href="#a:566"><span class="id" title="binder">a</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:562"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#a:566"><span class="id" title="variable">a</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Early.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#rest:565"><span class="id" title="variable">rest</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:566"><span class="id" title="variable">a</span></a><a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Tealeaves.Functors.Batch.html#element_of_Batch_rw2"><span class="id" title="lemma">element_of_Batch_rw2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1053"></a><h2 class="section">Annotation Operation</h2>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="sigMap" class="idref" href="#sigMap"><span class="id" title="definition">sigMap</span></a> {<a id="A:567" class="idref" href="#A:567"><span class="id" title="binder">A</span></a>: <span class="id" title="keyword">Type</span>} (<a id="P:568" class="idref" href="#P:568"><span class="id" title="binder">P</span></a> <a id="Q:569" class="idref" href="#Q:569"><span class="id" title="binder">Q</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:567"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) (<a id="Himpl:571" class="idref" href="#Himpl:571"><span class="id" title="binder">Himpl</span></a>: <span class="id" title="keyword">∀</span> <a id="a:570" class="idref" href="#a:570"><span class="id" title="binder">a</span></a>, <a class="idref" href="Tealeaves.Functors.Batch.html#P:568"><span class="id" title="variable">P</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:570"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Q:569"><span class="id" title="variable">Q</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:570"><span class="id" title="variable">a</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#P:568"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Q:569"><span class="id" title="variable">Q</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="dc948fa9aaa6d12aa6c07213c06af6d0" class="idref" href="#dc948fa9aaa6d12aa6c07213c06af6d0"><span class="id" title="binder">σ</span></a> ⇒ <span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Functors.Batch.html#dc948fa9aaa6d12aa6c07213c06af6d0"><span class="id" title="variable">σ</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">a</span> <span class="id" title="var">h</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#Q:569"><span class="id" title="variable">Q</span></a> <span class="id" title="var">a</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#Himpl:571"><span class="id" title="variable">Himpl</span></a> <span class="id" title="var">a</span> <span class="id" title="var">h</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="annotate_occurrence_helper" class="idref" href="#annotate_occurrence_helper"><span class="id" title="lemma">annotate_occurrence_helper</span></a> {<a id="A:574" class="idref" href="#A:574"><span class="id" title="binder">A</span></a> <a id="B:575" class="idref" href="#B:575"><span class="id" title="binder">B</span></a> <a id="C:576" class="idref" href="#C:576"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="a:577" class="idref" href="#a:577"><span class="id" title="binder">a</span></a>: <a class="idref" href="Tealeaves.Functors.Batch.html#A:574"><span class="id" title="variable">A</span></a>) (<a id="b_orig:578" class="idref" href="#b_orig:578"><span class="id" title="binder">b_orig</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:574"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:575"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#B:575"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:576"><span class="id" title="variable">C</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b_recc:580" class="idref" href="#b_recc:580"><span class="id" title="binder">b_recc</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="a':579" class="idref" href="#a':579"><span class="id" title="binder">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#element_of"><span class="id" title="definition">element_of</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:575"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">(</span></a><a class="idref" href="Tealeaves.Functors.Batch.html#B:575"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:576"><span class="id" title="variable">C</span></a><a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Batch.html#a':579"><span class="id" title="variable">a'</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b_orig:578"><span class="id" title="variable">b_orig</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:575"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#B:575"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:576"><span class="id" title="variable">C</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="a':581" class="idref" href="#a':581"><span class="id" title="binder">a'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#element_of"><span class="id" title="definition">element_of</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:575"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:576"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#a':581"><span class="id" title="variable">a'</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#b_orig:578"><span class="id" title="variable">b_orig</span></a> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#45a660fcade13f7b83ca57ede582a0d1"><span class="id" title="notation">⧆</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#a:577"><span class="id" title="variable">a</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:575"><span class="id" title="variable">B</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#B:575"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:576"><span class="id" title="variable">C</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b_orig</span> <span class="id" title="var">b_recc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="Tealeaves.Classes.Functor.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <span class="id" title="var">B</span> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">(</span></a><span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">C</span><a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.Batch.html#sigMap"><span class="id" title="definition">sigMap</span></a> (<span class="id" title="keyword">fun</span> <a id="a0:585" class="idref" href="#a0:585"><span class="id" title="binder">a0</span></a> : <span class="id" title="var">A</span> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#a0:583"><span class="id" title="variable">a0</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <span class="id" title="var">b_orig</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="a0:584" class="idref" href="#a0:584"><span class="id" title="binder">a0</span></a> : <span class="id" title="var">A</span> ⇒ <a class="idref" href="Tealeaves.Functors.Batch.html#a0:582"><span class="id" title="variable">a0</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">∈</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">(</span></a><span class="id" title="var">b_orig</span> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#45a660fcade13f7b83ca57ede582a0d1"><span class="id" title="notation">⧆</span></a> <span class="id" title="var">a</span><a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#11eb2861ea16289dd627ef9d8c2d6322"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tealeaves.Functors.Batch.html#element_of_Step1"><span class="id" title="definition">element_of_Step1</span></a> <span class="id" title="var">a</span> <span class="id" title="var">b_orig</span>)) <span class="id" title="var">b_recc</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="annotate_occurrence" class="idref" href="#annotate_occurrence"><span class="id" title="definition">annotate_occurrence</span></a><br/>
&nbsp;&nbsp;&nbsp;{<a id="A:586" class="idref" href="#A:586"><span class="id" title="binder">A</span></a> <a id="B:587" class="idref" href="#B:587"><span class="id" title="binder">B</span></a> <a id="C:588" class="idref" href="#C:588"><span class="id" title="binder">C</span></a>: <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;(<a id="b:589" class="idref" href="#b:589"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:586"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:587"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:588"><span class="id" title="variable">C</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="a:590" class="idref" href="#a:590"><span class="id" title="binder">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#element_of"><span class="id" title="definition">element_of</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:587"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:588"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#a:590"><span class="id" title="variable">a</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:589"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:587"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:588"><span class="id" title="variable">C</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tealeaves.Functors.Batch.html#b:589"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">c</span> ⇒ <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Done"><span class="id" title="constructor">Done</span></a> <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Step"><span class="id" title="constructor">Step</span></a> <span class="id" title="var">rest</span> <span class="id" title="var">a</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tealeaves.Functors.Early.Batch.html#Step"><span class="id" title="constructor">Step</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#annotate_occurrence_helper"><span class="id" title="lemma">annotate_occurrence_helper</span></a> <span class="id" title="var">a</span> <span class="id" title="var">rest</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#annotate_occurrence:591"><span class="id" title="definition">annotate_occurrence</span></a> <span class="id" title="var">rest</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> (<a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#tosubset"><span class="id" title="definition">tosubset</span></a> (<span class="id" title="var">rest</span> <a class="idref" href="Tealeaves.Functors.Early.Batch.html#45a660fcade13f7b83ca57ede582a0d1"><span class="id" title="notation">⧆</span></a> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a</span> (<a class="idref" href="Tealeaves.Functors.Batch.html#element_of_Step2"><span class="id" title="definition">element_of_Step2</span></a> <span class="id" title="var">rest</span> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab1054"></a><h1 class="section"><code>runBatch</code> Assuming Proofs of Occurrence</h1>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="runBatch_with_occurrence" class="idref" href="#runBatch_with_occurrence"><span class="id" title="definition">runBatch_with_occurrence</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:593" class="idref" href="#A:593"><span class="id" title="binder">A</span></a> <a id="B:594" class="idref" href="#B:594"><span class="id" title="binder">B</span></a> <a id="C:595" class="idref" href="#C:595"><span class="id" title="binder">C</span></a>} (<a id="G:596" class="idref" href="#G:596"><span class="id" title="binder">G</span></a>: <span class="id" title="keyword">Type</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="H:600" class="idref" href="#H:600"><span class="id" title="binder">Applicative</span></a> <a id="H:600" class="idref" href="#H:600"><span class="id" title="binder">G</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="b:601" class="idref" href="#b:601"><span class="id" title="binder">b</span></a>: <a class="idref" href="Tealeaves.Functors.Early.Batch.html#Batch"><span class="id" title="inductive">Batch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#A:593"><span class="id" title="variable">A</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:594"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:595"><span class="id" title="variable">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(<a id="f:603" class="idref" href="#f:603"><span class="id" title="binder">f</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="a:602" class="idref" href="#a:602"><span class="id" title="binder">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="Tealeaves.Classes.Categorical.ContainerFunctor.html#element_of"><span class="id" title="definition">element_of</span></a> (<span class="id" title="var">F</span> := <a class="idref" href="Tealeaves.Functors.Early.Batch.html#:::'BATCH1'_x_x"><span class="id" title="notation">BATCH1</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:594"><span class="id" title="variable">B</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:595"><span class="id" title="variable">C</span></a>) <a class="idref" href="Tealeaves.Functors.Batch.html#a:602"><span class="id" title="variable">a</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:601"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#G:596"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#B:594"><span class="id" title="variable">B</span></a>), <a class="idref" href="Tealeaves.Functors.Batch.html#G:596"><span class="id" title="variable">G</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#C:595"><span class="id" title="variable">C</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="b:604" class="idref" href="#b:604"><span class="id" title="binder">b</span></a> <a id="f:605" class="idref" href="#f:605"><span class="id" title="binder">f</span></a> ⇒ <a class="idref" href="Tealeaves.Functors.Early.Batch.html#runBatch"><span class="id" title="definition">runBatch</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#f:605"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tealeaves.Functors.Batch.html#annotate_occurrence"><span class="id" title="definition">annotate_occurrence</span></a> <a class="idref" href="Tealeaves.Functors.Batch.html#b:604"><span class="id" title="variable">b</span></a>).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tealeaves.Functors.Batch.html#annotate_Batch_elements"><span class="id" title="section">annotate_Batch_elements</span></a>.<br/>

<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
