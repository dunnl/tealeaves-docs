<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.20.1: https://docutils.sourceforge.io/" />
<title>TraversableFunctor.v</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.16.0+0.16.3. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><div class="document">


<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Tealeaves <span class="kn">Require Export</span>
  Classes.Kleisli.TraversableFunctor
  Classes.Kleisli.Theory.TraversableFunctor
  Classes.Categorical.ContainerFunctor
  Classes.Categorical.ShapelyFunctor
  Classes.Categorical.ApplicativeCommutativeIdempotent
  Adapters.KleisliToCoalgebraic.TraversableFunctor
  Functors.Batch
  Functors.List
  Functors.VectorRefinement.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> Coalgebraic.TraversableFunctor (ToBatch, toBatch).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> KleisliToCoalgebraic.TraversableFunctor.DerivedInstances.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> Subset.Notations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> Applicative.Notations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> ContainerFunctor.Notations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> ProductFunctor.Notations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> Kleisli.TraversableFunctor.Notations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> Batch.Notations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> Monoid.Notations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> VectorRefinement.Notations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Generalizable Variables</span> <span class="nf">F</span> T G A B C M œï.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Arguments</span> mapfst_Batch {B C A1 A2}%type_scope
  f%function_scope b.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Arguments</span> mapsnd_Batch {A B1 B2 C}%type_scope
  f%function_scope b.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">

<span class="sd">(** * Miscellaneous Properties Concerning &lt;&lt;toBatch&gt;&gt; *)</span>
<span class="sd">(**********************************************************************)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">stuff</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> Adapters.KleisliToCoalgebraic.TraversableFunctor.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    `{Kleisli.TraversableFunctor.TraversableFunctor T}
    `{Map T}
    `{ToBatch T}
    `{! Compat_Map_Traverse T}
    `{! Compat_ToBatch_Traverse T}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Relating &lt;&lt;tolist&gt;&gt; and &lt;&lt;Batch_contents ‚àò toBatch&gt;&gt; *)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk0"><span class="kn">Lemma</span> <span class="nf">Batch_contents_tolist</span>:
    <span class="kr">forall</span> {<span class="nv">A</span> <span class="nv">B</span>} (<span class="nv">t</span>: T A),
      proj1_sig (Batch_contents (toBatch (A&#39; := B) t)) =
        List.rev (tolist t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A),
proj1_sig (Batch_contents (toBatch t)) =
List.rev (tolist t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A),
proj1_sig (Batch_contents (toBatch t)) =
List.rev (tolist t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig (Batch_contents (toBatch t)) =
List.rev (tolist t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk3"><span class="nb">rewrite</span> tolist_Batch_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">List.rev (tolist (toBatch t)) = List.rev (tolist t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk4"><span class="nb">rewrite</span> &lt;- tolist_through_toBatch.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">List.rev (tolist t) = List.rev (tolist t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Naturality of &lt;&lt;toBatch&gt;&gt; *)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk5"><span class="kn">Corollary</span> <span class="nf">shape_natural_toBatch</span> {<span class="nv">A</span> <span class="nv">A&#39;</span>}: <span class="kr">forall</span> (<span class="nv">t</span>: T A),
      toBatch (A&#39; := A&#39;) (shape t) =
        shape (F := BATCH1 A&#39; (T A&#39;)) (toBatch (A&#39; := A&#39;) t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> : T A, toBatch (shape t) = shape (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> : T A, toBatch (shape t) = shape (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk7"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">toBatch (shape t) = shape (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk8"><span class="nb">unfold</span> shape.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">toBatch (map (const tt) t) =
map (const tt) (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk9">compose near t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(toBatch ‚àò map (const tt)) t =
(map (const tt) ‚àò toBatch) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> toBatch_mapfst.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chka"><span class="kn">Corollary</span> <span class="nf">shape_toBatch_spec</span> {<span class="nv">A</span>}: <span class="kr">forall</span> (<span class="nv">t</span>: T A),
      shape t = runBatch (G := <span class="kr">fun</span> <span class="nv">A</span> =&gt; A) (const tt)
                  (toBatch (A&#39; := unit) (T := T) t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> : T A,
shape t = runBatch (const tt) (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> : T A,
shape t = runBatch (const tt) (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkc"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t = runBatch (const tt) (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkd"><span class="nb">unfold</span> shape.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (const tt) t = runBatch (const tt) (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chke"><span class="nb">rewrite</span> map_through_runBatch.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(runBatch (const tt) ‚àò toBatch) t =
runBatch (const tt) (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="c">(* This statement holds without a A&#39; universally quantified</span>
<span class="c">     inside the iff, but this is harder to prove. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkf"><span class="kn">Lemma</span> <span class="nf">toBatch_injective_univ</span> {<span class="nv">A</span>}: <span class="kr">forall</span> (<span class="nv">t</span> <span class="nv">u</span>: T A),
      (<span class="kr">forall</span> (<span class="nv">A&#39;</span>: <span class="kt">Type</span>), toBatch (A&#39; := A&#39;) t = toBatch u) &lt;-&gt; t = u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">u</span> : T A,
(<span class="kr">forall</span> <span class="nv">A&#39;</span> : <span class="kt">Type</span>, toBatch t = toBatch u) &lt;-&gt; t = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk10"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> <span class="nv">u</span> : T A,
(<span class="kr">forall</span> <span class="nv">A&#39;</span> : <span class="kt">Type</span>, toBatch t = toBatch u) &lt;-&gt; t = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk11"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t, u</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">forall</span> <span class="nv">A&#39;</span> : <span class="kt">Type</span>, toBatch t = toBatch u) &lt;-&gt; t = u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk12"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t, u</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">forall</span> <span class="nv">A&#39;</span> : <span class="kt">Type</span>, toBatch t = toBatch u) -&gt; t = u</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk13" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t, u</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk13"><hr></label><div class="goal-conclusion">t = u -&gt; <span class="kr">forall</span> <span class="nv">A&#39;</span> : <span class="kt">Type</span>, toBatch t = toBatch u</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk14">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t, u</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">forall</span> <span class="nv">A&#39;</span> : <span class="kt">Type</span>, toBatch t = toBatch u) -&gt; t = u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk15"><span class="nb">intro</span> HBatch.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t, u</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>HBatch</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">A&#39;</span> : <span class="kt">Type</span>, toBatch t = toBatch u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">t = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk16"><span class="nb">change</span> (id t = id u).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t, u</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>HBatch</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">A&#39;</span> : <span class="kt">Type</span>, toBatch t = toBatch u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">id t = id u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk17"><span class="nb">rewrite</span> id_through_runBatch.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t, u</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>HBatch</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">A&#39;</span> : <span class="kt">Type</span>, toBatch t = toBatch u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(runBatch id ‚àò toBatch) t = (runBatch id ‚àò toBatch) u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk18"><span class="nb">unfold</span> compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t, u</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>HBatch</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">A&#39;</span> : <span class="kt">Type</span>, toBatch t = toBatch u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">runBatch id (toBatch t) = runBatch id (toBatch u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk19"><span class="nb">rewrite</span> HBatch.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t, u</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>HBatch</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">A&#39;</span> : <span class="kt">Type</span>, toBatch t = toBatch u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">runBatch id (toBatch u) = runBatch id (toBatch u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t, u</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">t = u -&gt; <span class="kr">forall</span> <span class="nv">A&#39;</span> : <span class="kt">Type</span>, toBatch t = toBatch u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">intro</span>; <span class="bp">now</span> <span class="nb">subst</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** &lt;&lt;Batch_contents ‚àò toBatch&gt;&gt; is Independent of &lt;&lt;B&gt;&gt; *)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1b"><span class="kn">Lemma</span> <span class="nf">Batch_contents_toBatch_sim</span>:
    <span class="kr">forall</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">B&#39;</span>: <span class="kt">Type</span>} (<span class="nv">t</span>: T A),
      Batch_contents (toBatch (A&#39; := B) t)
      ~~ Batch_contents (toBatch (A&#39; := B&#39;) t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">B&#39;</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A),
Batch_contents (toBatch t) ~~
Batch_contents (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">B&#39;</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A),
Batch_contents (toBatch t) ~~
Batch_contents (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1d"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_contents (toBatch t) ~~
Batch_contents (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1e"><span class="nb">unfold</span> Vector_sim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig (Batch_contents (toBatch t)) =
proj1_sig (Batch_contents (toBatch t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1f"><span class="nb">rewrite</span> Batch_contents_tolist.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">List.rev (tolist t) =
proj1_sig (Batch_contents (toBatch t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk20"><span class="nb">rewrite</span> Batch_contents_tolist.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">List.rev (tolist t) = List.rev (tolist t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** *** Terms with the same &lt;&lt;shape&gt;&gt; have &lt;&lt;toBatch&gt;&gt; of the same shape *)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk21"><span class="kn">Lemma</span> <span class="nf">same_shape_toBatch</span>:
    <span class="kr">forall</span> {<span class="nv">A&#39;</span> <span class="nv">B</span>} `(t1: T A) (t2: T A&#39;),
      shape t1 = shape t2 -&gt;
      shape (F := BATCH1 B (T B))
        (toBatch (A&#39; := B) t1) =
        shape (F := BATCH1 B (T B))
          (toBatch (A&#39; := B) t2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A&#39;</span> <span class="nv">B</span> <span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t1</span> : T A) (<span class="nv">t2</span> : T A&#39;),
shape t1 = shape t2 -&gt;
shape (toBatch t1) = shape (toBatch t2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk22"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A&#39;</span> <span class="nv">B</span> <span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t1</span> : T A) (<span class="nv">t2</span> : T A&#39;),
shape t1 = shape t2 -&gt;
shape (toBatch t1) = shape (toBatch t2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk23">introv Hshape.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A', B, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A&#39;</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t1 = shape t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape (toBatch t1) = shape (toBatch t2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk24"><span class="nb">rewrite</span> &lt;- shape_natural_toBatch.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A', B, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A&#39;</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t1 = shape t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">toBatch (shape t1) = shape (toBatch t2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk25"><span class="nb">rewrite</span> &lt;- shape_natural_toBatch.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A', B, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A&#39;</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t1 = shape t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">toBatch (shape t1) = toBatch (shape t2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk26"><span class="nb">rewrite</span> Hshape.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A', B, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A&#39;</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t1 = shape t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">toBatch (shape t2) = toBatch (shape t2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** *** Terms with the same &lt;&lt;tolist&gt;&gt; terms have &lt;&lt;toBatch&gt;&gt; of the same &lt;&lt;tolist&gt;&gt;s*)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk27"><span class="kn">Lemma</span> <span class="nf">same_tolist_toBatch</span>:
    <span class="kr">forall</span> {<span class="nv">B1</span> <span class="nv">B2</span>: <span class="kt">Type</span>} `(t1: T A) (t2: T A),
      tolist t1 = tolist t2 -&gt;
      tolist (toBatch (A&#39; := B1) t1) =
        tolist (toBatch (A&#39; := B2) t2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">B1</span> <span class="nv">B2</span> <span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t1</span> <span class="nv">t2</span> : T A),
tolist t1 = tolist t2 -&gt;
tolist (toBatch t1) = tolist (toBatch t2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk28"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">B1</span> <span class="nv">B2</span> <span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t1</span> <span class="nv">t2</span> : T A),
tolist t1 = tolist t2 -&gt;
tolist (toBatch t1) = tolist (toBatch t2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk29">introv Hshape.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>B1, B2, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>tolist t1 = tolist t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tolist (toBatch t1) = tolist (toBatch t2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2a"><span class="nb">rewrite</span> (tolist_through_toBatch B1) <span class="kr">in</span> Hshape.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>B1, B2, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>tolist (toBatch t1) = tolist t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tolist (toBatch t1) = tolist (toBatch t2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2b"><span class="nb">rewrite</span> (tolist_through_toBatch (T := T) B2) <span class="kr">in</span> Hshape.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>B1, B2, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>tolist (toBatch t1) = tolist (toBatch t2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tolist (toBatch t1) = tolist (toBatch t2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">

  <span class="sd">(** ** Equal &lt;&lt;toBatch&gt;&gt; Implies Equal &lt;&lt;tolist&gt;&gt; *)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2c"><span class="kn">Lemma</span> <span class="nf">toBatch_injective_tolist</span>:
    <span class="kr">forall</span> {<span class="nv">A</span> <span class="nv">B</span>} `(t1: T A) (t2: T A),
      (toBatch (A&#39; := B) t1) =
        (toBatch (A&#39; := B) t2) -&gt;
      tolist t1 = tolist t2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t1</span> <span class="nv">t2</span> : T A),
toBatch t1 = toBatch t2 -&gt; tolist t1 = tolist t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t1</span> <span class="nv">t2</span> : T A),
toBatch t1 = toBatch t2 -&gt; tolist t1 = tolist t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2e">introv Heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>toBatch t1 = toBatch t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tolist t1 = tolist t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2f"><span class="nb">rewrite</span> (tolist_through_toBatch B).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>toBatch t1 = toBatch t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tolist (toBatch t1) = tolist t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk30"><span class="nb">rewrite</span> (tolist_through_toBatch (T := T) B).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>toBatch t1 = toBatch t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tolist (toBatch t1) = tolist (toBatch t2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk31"><span class="nb">rewrite</span> Heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>toBatch t1 = toBatch t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tolist (toBatch t2) = tolist (toBatch t2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Similar &lt;&lt;shape&gt;&gt;d &lt;&lt;toBatch&gt;&gt; implies similar &lt;&lt;shape&gt;&gt;s*)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk32"><span class="kn">Lemma</span> <span class="nf">toBatch_shape_inv</span>:
    <span class="kr">forall</span> {<span class="nv">A&#39;</span> <span class="nv">B</span>} `(t1: T A) (t2: T A&#39;),
      shape (F := BATCH1 B (T B))
        (toBatch (A&#39; := B) t1) =
        shape (F := BATCH1 B (T B))
          (toBatch (A&#39; := B) t2) -&gt;
      shape t1 = shape t2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A&#39;</span> <span class="nv">B</span> <span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t1</span> : T A) (<span class="nv">t2</span> : T A&#39;),
shape (toBatch t1) = shape (toBatch t2) -&gt;
shape t1 = shape t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk33"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A&#39;</span> <span class="nv">B</span> <span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t1</span> : T A) (<span class="nv">t2</span> : T A&#39;),
shape (toBatch t1) = shape (toBatch t2) -&gt;
shape t1 = shape t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk34">introv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A', B, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape (toBatch t1) = shape (toBatch t2) -&gt;
shape t1 = shape t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk35"><span class="nb">intro</span> HBatch.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A', B, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A&#39;</span></span></span><br><span><var>HBatch</var><span class="hyp-type"><b>: </b><span>shape (toBatch t1) = shape (toBatch t2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t1 = shape t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk36"><span class="nb">rewrite</span> &lt;- shape_natural_toBatch <span class="kr">in</span> HBatch.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A', B, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A&#39;</span></span></span><br><span><var>HBatch</var><span class="hyp-type"><b>: </b><span>toBatch (shape t1) = shape (toBatch t2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t1 = shape t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk37"><span class="nb">rewrite</span> &lt;- shape_natural_toBatch <span class="kr">in</span> HBatch.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A', B, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A&#39;</span></span></span><br><span><var>HBatch</var><span class="hyp-type"><b>: </b><span>toBatch (shape t1) = toBatch (shape t2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t1 = shape t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk38"><span class="nb">unfold</span> shape.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A', B, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A&#39;</span></span></span><br><span><var>HBatch</var><span class="hyp-type"><b>: </b><span>toBatch (shape t1) = toBatch (shape t2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (const tt) t1 = map (const tt) t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Abort</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk39"><span class="kn">Lemma</span> <span class="nf">toBatch_injective_shape</span>:
    <span class="kr">forall</span> {<span class="nv">A</span> <span class="nv">B</span>} `(t1: T A) (t2: T A),
      (toBatch (A&#39; := B) t1) =
        (toBatch (A&#39; := B) t2) -&gt;
      shape t1 = shape t2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t1</span> <span class="nv">t2</span> : T A),
toBatch t1 = toBatch t2 -&gt; shape t1 = shape t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk3a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t1</span> <span class="nv">t2</span> : T A),
toBatch t1 = toBatch t2 -&gt; shape t1 = shape t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk3b">introv Heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>toBatch t1 = toBatch t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t1 = shape t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk3c"><span class="nb">unfold</span> shape <span class="nb">at</span> <span class="mi">1</span> <span class="mi">2</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>toBatch t1 = toBatch t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (const tt) t1 = map (const tt) t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Abort</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">

</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk3d"><span class="kn">Lemma</span> <span class="nf">toBatch_injective_tolist2</span>:
    <span class="kr">forall</span> {<span class="nv">A</span> <span class="nv">B</span>} `(t1: T A) (t2: T A),
      (toBatch (A&#39; := B) t1) =
        (toBatch (A&#39; := B) t2) &lt;-&gt;
        tolist t1 = tolist t2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t1</span> <span class="nv">t2</span> : T A),
toBatch t1 = toBatch t2 &lt;-&gt; tolist t1 = tolist t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk3e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t1</span> <span class="nv">t2</span> : T A),
toBatch t1 = toBatch t2 &lt;-&gt; tolist t1 = tolist t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk3f"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">toBatch t1 = toBatch t2 &lt;-&gt; tolist t1 = tolist t2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk40"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">toBatch t1 = toBatch t2 -&gt; tolist t1 = tolist t2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk41" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk41"><hr></label><div class="goal-conclusion">tolist t1 = tolist t2 -&gt; toBatch t1 = toBatch t2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk42">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">toBatch t1 = toBatch t2 -&gt; tolist t1 = tolist t2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> toBatch_injective_tolist.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk43">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tolist t1 = tolist t2 -&gt; toBatch t1 = toBatch t2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk44"><span class="nb">rewrite</span> (tolist_through_toBatch B).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tolist (toBatch t1) = tolist t2 -&gt;
toBatch t1 = toBatch t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk45"><span class="nb">rewrite</span> (tolist_through_toBatch (T := T) B).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tolist (toBatch t1) = tolist (toBatch t2) -&gt;
toBatch t1 = toBatch t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Abort</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk46"><span class="kn">Lemma</span> <span class="nf">toBatch_injective</span>:
    <span class="kr">forall</span> {<span class="nv">A</span> <span class="nv">B</span>} `(t1: T A) (t2: T A),
        (toBatch (A&#39; := B) t1) =
          (toBatch (A&#39; := B) t2) -&gt;
        t1 = t2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t1</span> <span class="nv">t2</span> : T A),
toBatch t1 = toBatch t2 -&gt; t1 = t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk47"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t1</span> <span class="nv">t2</span> : T A),
toBatch t1 = toBatch t2 -&gt; t1 = t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk48">introv Heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>toBatch t1 = toBatch t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">t1 = t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk49"><span class="nb">change</span> (id t1 = id t2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>toBatch t1 = toBatch t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">id t1 = id t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk4a"><span class="nb">rewrite</span> id_through_runBatch.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>toBatch t1 = toBatch t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(runBatch id ‚àò toBatch) t1 =
(runBatch id ‚àò toBatch) t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk4b"><span class="nb">unfold</span> compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>toBatch t1 = toBatch t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">runBatch id (toBatch t1) = runBatch id (toBatch t2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Abort</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">stuff</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Length of &lt;&lt;toBatch&gt;&gt; is polymorphic *)</span>
<span class="sd">(**********************************************************************)</span>
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk4c"><span class="kn">Lemma</span> <span class="nf">length_Batch_independent</span>
  `{TraversableFunctor T}
  `{ToBatch T}
  `{Map T}
  `{! Compat_Map_Traverse T}
  `{! Compat_ToBatch_Traverse T}
 : <span class="kr">forall</span> `(t: T A) B C,
    length_Batch (toBatch (A&#39; := B) t) =
      length_Batch (toBatch (A&#39; := C) t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A) (<span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>),
length_Batch (toBatch t) = length_Batch (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk4d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A) (<span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>),
length_Batch (toBatch t) = length_Batch (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Abort</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Traversable Functors are Containers *)</span>
<span class="sd">(**********************************************************************)</span>

<span class="sd">(** ** Traversable Functors are Shapely *)</span>
<span class="sd">(**********************************************************************)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">shapeliness</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    `{TraversableFunctor T}
    `{Map T}
    `{ToBatch T}
    `{! Compat_Map_Traverse T}
    `{! Compat_ToBatch_Traverse T}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk4e"><span class="kn">Theorem</span> <span class="nf">Traversable_shapeliness</span>: <span class="kr">forall</span> <span class="nv">A</span> (<span class="nv">t1</span> <span class="nv">t2</span>: T A),
      shape t1 = shape t2 /\ tolist t1 = tolist t2 -&gt;
      t1 = t2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t1</span> <span class="nv">t2</span> : T A),
shape t1 = shape t2 /\ tolist t1 = tolist t2 -&gt;
t1 = t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk4f"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t1</span> <span class="nv">t2</span> : T A),
shape t1 = shape t2 /\ tolist t1 = tolist t2 -&gt;
t1 = t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk50">introv [hyp1 hyp2].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>shape t1 = shape t2</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>tolist t1 = tolist t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">t1 = t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk51"><span class="nb">change</span> (id t1 = id t2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>shape t1 = shape t2</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>tolist t1 = tolist t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">id t1 = id t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk52"><span class="nb">rewrite</span> id_through_runBatch.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>shape t1 = shape t2</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>tolist t1 = tolist t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(runBatch id ‚àò toBatch) t1 =
(runBatch id ‚àò toBatch) t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk53"><span class="nb">unfold</span> compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>shape t1 = shape t2</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>tolist t1 = tolist t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">runBatch id (toBatch t1) = runBatch id (toBatch t2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk54"><span class="nb">enough</span> (<span class="nb">cut</span>: toBatch (A&#39; := A) t1 = toBatch t2)
      <span class="bp">by</span> <span class="bp">now</span> <span class="nb">rewrite</span> <span class="nb">cut</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>shape t1 = shape t2</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>tolist t1 = tolist t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">toBatch t1 = toBatch t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk55"><span class="nb">specialize</span> (same_shape_toBatch (B := A) t1 t2 hyp1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>shape t1 = shape t2</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>tolist t1 = tolist t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape (toBatch t1) = shape (toBatch t2) -&gt;
toBatch t1 = toBatch t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk56"><span class="nb">specialize</span> (same_tolist_toBatch (B1 := A) (B2 := A) t1 t2 hyp2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>shape t1 = shape t2</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>tolist t1 = tolist t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tolist (toBatch t1) = tolist (toBatch t2) -&gt;
shape (toBatch t1) = shape (toBatch t2) -&gt;
toBatch t1 = toBatch t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk57"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1, t2</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>hyp1</var><span class="hyp-type"><b>: </b><span>shape t1 = shape t2</span></span></span><br><span><var>hyp2</var><span class="hyp-type"><b>: </b><span>tolist t1 = tolist t2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>tolist (toBatch t1) = tolist (toBatch t2)</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>shape (toBatch t1) = shape (toBatch t2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">toBatch t1 = toBatch t2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Batch_shapeliness; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">shapeliness</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Pointwise Reasoning *)</span>
<span class="sd">(**********************************************************************)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">pointwise</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    `{Classes.Kleisli.TraversableFunctor.TraversableFunctor T}
    `{ToMap_inst: Map T}
    `{ToSubset_inst: ToSubset T}
    `{ToBatch_inst: ToBatch T}
    `{! Compat_Map_Traverse T}
    `{! Compat_ToSubset_Traverse T}
    `{! Compat_ToBatch_Traverse T}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk58"><span class="kn">Lemma</span> <span class="nf">traverse_respectful</span>:
    <span class="kr">forall</span> `{Applicative G} `(f1: A -&gt; G B) `(f2: A -&gt; G B) (t: T A),
      (<span class="kr">forall</span> (<span class="nv">a</span>: A), a ‚àà t -&gt; f1 a = f2 a) -&gt; traverse f1 t = traverse f2 t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">G</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>) (<span class="nv">Map_G</span> : Map G)
  (<span class="nv">Pure_G</span> : Pure G) (<span class="nv">Mult_G</span> : Mult G),
Applicative G -&gt;
<span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">f1</span> <span class="nv">f2</span> : A -&gt; G B) (<span class="nv">t</span> : T A),
(<span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f1 a = f2 a) -&gt;
traverse f1 t = traverse f2 t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk59"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">G</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>) (<span class="nv">Map_G</span> : Map G)
  (<span class="nv">Pure_G</span> : Pure G) (<span class="nv">Mult_G</span> : Mult G),
Applicative G -&gt;
<span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">f1</span> <span class="nv">f2</span> : A -&gt; G B) (<span class="nv">t</span> : T A),
(<span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f1 a = f2 a) -&gt;
traverse f1 t = traverse f2 t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk5a">introv ? hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f1 a = f2 a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">traverse f1 t = traverse f2 t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk5b"><span class="kp">do</span> <span class="mi">2</span> <span class="nb">rewrite</span> traverse_through_runBatch.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f1 a = f2 a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(runBatch f1 ‚àò toBatch) t = (runBatch f2 ‚àò toBatch) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk5c"><span class="nb">unfold</span> element_of <span class="kr">in</span> hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, tosubset t a -&gt; f1 a = f2 a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(runBatch f1 ‚àò toBatch) t = (runBatch f2 ‚àò toBatch) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk5d"><span class="nb">rewrite</span> (tosubset_through_runBatch2 A B) <span class="kr">in</span> hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A,
(runBatch ret ‚àò toBatch) t a -&gt; f1 a = f2 a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(runBatch f1 ‚àò toBatch) t = (runBatch f2 ‚àò toBatch) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk5e"><span class="nb">unfold</span> compose <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A,
runBatch ret (toBatch t) a -&gt; f1 a = f2 a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">runBatch f1 (toBatch t) = runBatch f2 (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk5f"><span class="nb">unfold</span> ret <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A,
runBatch (Return_subset A) (toBatch t) a -&gt;
f1 a = f2 a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">runBatch f1 (toBatch t) = runBatch f2 (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk60"><span class="nb">induction</span> (toBatch t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A,
runBatch (Return_subset A) (Done c) a -&gt;
f1 a = f2 a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">runBatch f1 (Done c) = runBatch f2 (Done c)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk61" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A B (B -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a0</span> : A,
runBatch (Return_subset A) (b ‚ßÜ a) a0 -&gt;
f1 a0 = f2 a0</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> <span class="nv">a</span> : A,
 runBatch (Return_subset A) b a -&gt; f1 a = f2 a) -&gt;
runBatch f1 b = runBatch f2 b</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk61"><hr></label><div class="goal-conclusion">runBatch f1 (b ‚ßÜ a) = runBatch f2 (b ‚ßÜ a)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk62">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A,
runBatch (Return_subset A) (Done c) a -&gt;
f1 a = f2 a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">runBatch f1 (Done c) = runBatch f2 (Done c)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk63">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A B (B -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a0</span> : A,
runBatch (Return_subset A) (b ‚ßÜ a) a0 -&gt;
f1 a0 = f2 a0</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> <span class="nv">a</span> : A,
 runBatch (Return_subset A) b a -&gt; f1 a = f2 a) -&gt;
runBatch f1 b = runBatch f2 b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">runBatch f1 (b ‚ßÜ a) = runBatch f2 (b ‚ßÜ a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk64"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A B (B -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a0</span> : A,
runBatch (Return_subset A) (b ‚ßÜ a) a0 -&gt;
f1 a0 = f2 a0</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> <span class="nv">a</span> : A,
 runBatch (Return_subset A) b a -&gt; f1 a = f2 a) -&gt;
runBatch f1 b = runBatch f2 b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">runBatch f1 b &lt;‚ãÜ&gt; f1 a = runBatch f2 b &lt;‚ãÜ&gt; f2 a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk65">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A B (B -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a0</span> : A,
runBatch (Return_subset A) (b ‚ßÜ a) a0 -&gt;
f1 a0 = f2 a0</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> <span class="nv">a</span> : A,
 runBatch (Return_subset A) b a -&gt; f1 a = f2 a) -&gt;
runBatch f1 b = runBatch f2 b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">runBatch f1 b = runBatch f2 b</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk66" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A B (B -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a0</span> : A,
runBatch (Return_subset A) (b ‚ßÜ a) a0 -&gt;
f1 a0 = f2 a0</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> <span class="nv">a</span> : A,
 runBatch (Return_subset A) b a -&gt; f1 a = f2 a) -&gt;
runBatch f1 b = runBatch f2 b</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk66"><hr></label><div class="goal-conclusion">f1 a = f2 a</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk67">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A B (B -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a0</span> : A,
runBatch (Return_subset A) (b ‚ßÜ a) a0 -&gt;
f1 a0 = f2 a0</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> <span class="nv">a</span> : A,
 runBatch (Return_subset A) b a -&gt; f1 a = f2 a) -&gt;
runBatch f1 b = runBatch f2 b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">runBatch f1 b = runBatch f2 b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk68"><span class="nb">apply</span> IHb.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A B (B -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a0</span> : A,
runBatch (Return_subset A) (b ‚ßÜ a) a0 -&gt;
f1 a0 = f2 a0</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> <span class="nv">a</span> : A,
 runBatch (Return_subset A) b a -&gt; f1 a = f2 a) -&gt;
runBatch f1 b = runBatch f2 b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
runBatch (Return_subset A) b a -&gt; f1 a = f2 a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk69"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A B (B -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a0</span> : A,
runBatch (Return_subset A) (b ‚ßÜ a) a0 -&gt;
f1 a0 = f2 a0</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> <span class="nv">a</span> : A,
 runBatch (Return_subset A) b a -&gt; f1 a = f2 a) -&gt;
runBatch f1 b = runBatch f2 b</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>runBatch (Return_subset A) b a0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f1 a0 = f2 a0</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk6a"><span class="nb">apply</span> hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A B (B -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a0</span> : A,
runBatch (Return_subset A) (b ‚ßÜ a) a0 -&gt;
f1 a0 = f2 a0</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> <span class="nv">a</span> : A,
 runBatch (Return_subset A) b a -&gt; f1 a = f2 a) -&gt;
runBatch f1 b = runBatch f2 b</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>runBatch (Return_subset A) b a0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">runBatch (Return_subset A) (b ‚ßÜ a) a0</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">left</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk6b">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A B (B -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a0</span> : A,
runBatch (Return_subset A) (b ‚ßÜ a) a0 -&gt;
f1 a0 = f2 a0</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> <span class="nv">a</span> : A,
 runBatch (Return_subset A) b a -&gt; f1 a = f2 a) -&gt;
runBatch f1 b = runBatch f2 b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f1 a = f2 a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk6c"><span class="nb">apply</span> hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A B (B -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a0</span> : A,
runBatch (Return_subset A) (b ‚ßÜ a) a0 -&gt;
f1 a0 = f2 a0</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>(<span class="kr">forall</span> <span class="nv">a</span> : A,
 runBatch (Return_subset A) b a -&gt; f1 a = f2 a) -&gt;
runBatch f1 b = runBatch f2 b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">runBatch (Return_subset A) (b ‚ßÜ a) a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">right</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** *** Corollaries *)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk6d"><span class="kn">Corollary</span> <span class="nf">traverse_respectful_pure</span>:
    <span class="kr">forall</span> `{Applicative G} `(f1: A -&gt; G A) (t: T A),
      (<span class="kr">forall</span> (<span class="nv">a</span>: A), a ‚àà t -&gt; f1 a = pure a) -&gt; traverse f1 t = pure t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">G</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>) (<span class="nv">Map_G</span> : Map G)
  (<span class="nv">Pure_G</span> : Pure G) (<span class="nv">Mult_G</span> : Mult G),
Applicative G -&gt;
<span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">f1</span> : A -&gt; G A) (<span class="nv">t</span> : T A),
(<span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f1 a = pure a) -&gt;
traverse f1 t = pure t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk6e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">G</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>) (<span class="nv">Map_G</span> : Map G)
  (<span class="nv">Pure_G</span> : Pure G) (<span class="nv">Mult_G</span> : Mult G),
Applicative G -&gt;
<span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">f1</span> : A -&gt; G A) (<span class="nv">t</span> : T A),
(<span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f1 a = pure a) -&gt;
traverse f1 t = pure t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk6f"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>A -&gt; G A</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f1 a = pure a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">traverse f1 t = pure t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk70"><span class="nb">rewrite</span> &lt;- traverse_purity1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1</var><span class="hyp-type"><b>: </b><span>A -&gt; G A</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f1 a = pure a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">traverse f1 t = traverse pure t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">apply</span> traverse_respectful.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk71"><span class="kn">Corollary</span> <span class="nf">traverse_respectful_map</span> {<span class="nv">A</span> <span class="nv">B</span>}:
    <span class="kr">forall</span> `{Applicative G} (t: T A) (f: A -&gt; G B) (g: A -&gt; B),
      (<span class="kr">forall</span> <span class="nv">a</span>, a ‚àà t -&gt; f a = pure (g a)) -&gt; traverse f t = pure (map g t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">G</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>) (<span class="nv">Map_G</span> : Map G)
  (<span class="nv">Pure_G</span> : Pure G) (<span class="nv">Mult_G</span> : Mult G),
Applicative G -&gt;
<span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">f</span> : A -&gt; G B) (<span class="nv">g</span> : A -&gt; B),
(<span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f a = pure (g a)) -&gt;
traverse f t = pure (map g t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk72"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">G</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>) (<span class="nv">Map_G</span> : Map G)
  (<span class="nv">Pure_G</span> : Pure G) (<span class="nv">Mult_G</span> : Mult G),
Applicative G -&gt;
<span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">f</span> : A -&gt; G B) (<span class="nv">g</span> : A -&gt; B),
(<span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f a = pure (g a)) -&gt;
traverse f t = pure (map g t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk73"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f a = pure (g a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">traverse f t = pure (map g t)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk74"><span class="nb">rewrite</span> &lt;- (traverse_purity1 (G := G)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f a = pure (g a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">traverse f t = traverse pure (map g t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk75">compose near t on <span class="nb">right</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f a = pure (g a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">traverse f t = (traverse pure ‚àò map g) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk76"><span class="nb">rewrite</span> traverse_map.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f a = pure (g a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">traverse f t = traverse (pure ‚àò g) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk77"><span class="nb">apply</span> traverse_respectful.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f a = pure (g a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f a = (pure ‚àò g) a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk78"><span class="kn">Corollary</span> <span class="nf">traverse_respectful_id</span> {<span class="nv">A</span>}:
    <span class="kr">forall</span> (<span class="nv">t</span>: T A) (<span class="nv">f</span>: A -&gt; A),
      (<span class="kr">forall</span> <span class="nv">a</span>, a ‚àà t -&gt; f a = id a) -&gt; traverse (G := <span class="kr">fun</span> <span class="nv">A</span> =&gt; A) f t = t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">f</span> : A -&gt; A),
(<span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f a = id a) -&gt;
traverse f t = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk79"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">f</span> : A -&gt; A),
(<span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f a = id a) -&gt;
traverse f t = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk7a"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f a = id a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">traverse f t = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk7b"><span class="nb">change</span> t <span class="kr">with</span> (pure (F := <span class="kr">fun</span> <span class="nv">A</span> =&gt; A) t) <span class="nb">at</span> <span class="mi">2</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f a = id a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">traverse f t = pure t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk7c"><span class="nb">apply</span> (traverse_respectful_pure (G := <span class="kr">fun</span> <span class="nv">A</span> =&gt; A)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; A</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f a = id a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f a = pure a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk7d"><span class="kn">Corollary</span> <span class="nf">map_respectful</span>: <span class="kr">forall</span> `(f1: A -&gt; B) `(f2: A -&gt; B) (t: T A),
      (<span class="kr">forall</span> (<span class="nv">a</span>: A), a ‚àà t -&gt; f1 a = f2 a) -&gt; map f1 t = map f2 t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">f1</span> <span class="nv">f2</span> : A -&gt; B) (<span class="nv">t</span> : T A),
(<span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f1 a = f2 a) -&gt;
map f1 t = map f2 t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk7e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">f1</span> <span class="nv">f2</span> : A -&gt; B) (<span class="nv">t</span> : T A),
(<span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f1 a = f2 a) -&gt;
map f1 t = map f2 t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk7f">introv hyp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f1 a = f2 a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map f1 t = map f2 t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk80"><span class="nb">rewrite</span> map_to_traverse.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f1 a = f2 a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">traverse f1 t = map f2 t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk81"><span class="nb">rewrite</span> map_to_traverse.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f1 a = f2 a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">traverse f1 t = traverse f2 t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk82" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk82"><span class="nb">apply</span> (traverse_respectful (G := <span class="kr">fun</span> <span class="nv">A</span> =&gt; A)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f1, f2</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>hyp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f1 a = f2 a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f1 a = f2 a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Typeclass Instances *)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk83">#[export] <span class="kn">Instance</span> <span class="nf">ContainerFunctor_Traverse</span>:
    ContainerFunctor T.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ContainerFunctor T</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk84"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ContainerFunctor T</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk85" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk85"><span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Natural (@tosubset T ToSubset_inst)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk86" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk86"><hr></label><div class="goal-conclusion">Functor T</div></blockquote><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk87" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk87"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A) (<span class="nv">f</span> <span class="nv">g</span> : A -&gt; B),
(<span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f a = g a) -&gt;
map f t = map g t</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk88" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk88">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Natural (@tosubset T ToSubset_inst)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk89" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk89"><span class="nb">rewrite</span> compat_tosubset_traverse.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Natural ToSubset_Traverse</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">typeclasses eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk8a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk8a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Functor T</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> DerivedInstances.Functor_TraversableFunctor.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk8b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk8b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A) (<span class="nv">f</span> <span class="nv">g</span> : A -&gt; B),
(<span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f a = g a) -&gt;
map f t = map g t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk8c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk8c"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f, g</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, a ‚àà t -&gt; f a = g a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map f t = map g t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">apply</span> map_respectful.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk8d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk8d">#[export] <span class="kn">Instance</span> <span class="nf">ShapelyFunctor_Traverse</span>:
    ShapelyFunctor T.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ShapelyFunctor T</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk8e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk8e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ShapelyFunctor T</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk8f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk8f"><span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Natural (@tolist T Tolist_Traverse)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk90" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk90"><hr></label><div class="goal-conclusion">Functor T</div></blockquote><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk91" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk91"><hr></label><div class="goal-conclusion">shapeliness T</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk92" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk92">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Natural (@tolist T Tolist_Traverse)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">typeclasses eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk93" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk93">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Functor T</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">typeclasses eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk94" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk94">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shapeliness T</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk95" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk95"><span class="nb">unfold</span> shapeliness.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t1</span> <span class="nv">t2</span> : T A),
shape t1 = shape t2 /\ tolist t1 = tolist t2 -&gt;
t1 = t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Traversable_shapeliness.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">pointwise</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * &lt;&lt;plength&gt;&gt; *)</span>
<span class="sd">(**********************************************************************)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">length</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    `{Map T}
    `{ToBatch T}
    `{Traverse T}
    `{! TraversableFunctor T}
    `{! Compat_Map_Traverse T}
    `{! Compat_ToBatch_Traverse T}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk96"><span class="kn">Lemma</span> <span class="nf">plength_eq_length</span>:
    <span class="kr">forall</span> {<span class="nv">A</span>} {<span class="nv">B</span>} (<span class="nv">t</span>: T A),
      length_Batch (toBatch (A&#39; := B) t) = plength t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A),
length_Batch (toBatch t) = plength t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk97" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk97"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A),
length_Batch (toBatch t) = plength t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk98" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk98"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length_Batch (toBatch t) = plength t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk99" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk99"><span class="nb">unfold</span> plength.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length_Batch (toBatch t) = foldMap (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk9a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk9a"><span class="nb">rewrite</span> (foldMap_through_runBatch2 A B).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length_Batch (toBatch t) =
(runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) ‚àò toBatch) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk9b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk9b"><span class="nb">unfold</span> compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length_Batch (toBatch t) =
runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk9c"><span class="nb">induction</span> (toBatch t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length_Batch (Done c) =
runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) (Done c)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk9d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A B (B -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>length_Batch b = runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) b</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk9d"><hr></label><div class="goal-conclusion">length_Batch (b ‚ßÜ a) =
runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) (b ‚ßÜ a)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk9e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length_Batch (Done c) =
runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) (Done c)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk9f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A B (B -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>length_Batch b = runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length_Batch (b ‚ßÜ a) =
runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) (b ‚ßÜ a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chka0" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chka0"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A B (B -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>length_Batch b = runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (length_Batch b) = runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) b ‚óè <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chka1" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chka1"><span class="nb">rewrite</span> IHb.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A B (B -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>length_Batch b = runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) b) =
runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) b ‚óè <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chka2" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chka2">unfold_ops @NaturalNumbers.Monoid_op_plus.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A B (B -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>length_Batch b = runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) b) =
(runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) b + <span class="mi">1</span>)%nat</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">lia</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chka3" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chka3"><span class="kn">Lemma</span> <span class="nf">plength_eq_length&#39;</span>: <span class="kr">forall</span> {<span class="nv">A</span>} (<span class="nv">t</span>: T A),
      plength t = length_Batch (toBatch (A&#39; := <span class="kt">False</span>) t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A),
plength t = length_Batch (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chka4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A),
plength t = length_Batch (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chka5" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chka5"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">plength t = length_Batch (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chka6" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chka6"><span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">length_Batch (toBatch t) = plength t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> plength_eq_length.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">length</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Factorizing Terms into &lt;&lt;shape&gt;&gt; and &lt;&lt;contents&gt;&gt; *)</span>
<span class="sd">(**********************************************************************)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">deconstruction</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">trav_contents</span>
    {<span class="nv">T</span>: <span class="kt">Type</span> -&gt; <span class="kt">Type</span>} {<span class="nv">toBatch_T</span>: ToBatch T} {<span class="nv">traverse_T</span>: Traverse T} {<span class="nv">map_T</span>: Map T}
    {<span class="nv">cmt</span>: Compat_Map_Traverse T}
    {<span class="nv">cbt</span>: Compat_ToBatch_Traverse T}
    {<span class="nv">Trav_T</span>: TraversableFunctor T}
    {<span class="nv">A</span>} (<span class="nv">t</span>: T A): Vector (plength t) A :=
    <span class="kr">let</span> <span class="nv">v</span>: Vector
             (length_Batch (toBatch (ToBatch := toBatch_T) (A&#39; := <span class="kt">False</span>) t)) A
      := Batch_contents (toBatch t)
    <span class="kr">in</span> coerce_Vector_length (plength_eq_length t) v.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">trav_make</span>
    {<span class="nv">T</span>: <span class="kt">Type</span> -&gt; <span class="kt">Type</span>}
    {<span class="nv">map_T</span>: Map T}
    {<span class="nv">traverse_T</span>: Traverse T}
    {<span class="nv">toBatch_T</span>: ToBatch T}
    {<span class="nv">cmt</span>: Compat_Map_Traverse T}
    {<span class="nv">cmt</span>: Compat_ToBatch_Traverse T}
    {<span class="nv">Trav_T</span>: TraversableFunctor T}
    {<span class="nv">A</span> <span class="nv">B</span>: <span class="kt">Type</span>} (<span class="nv">t</span>: T A):
    Vector (plength t) B -&gt; T B :=
    (<span class="kr">fun</span> <span class="nv">v</span> =&gt;
       <span class="kr">let</span> <span class="nv">v&#39;</span> := coerce_Vector_length (eq_sym (plength_eq_length t)) v
       <span class="kr">in</span> Batch_make (toBatch t) v&#39;).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    `{Traverse T}
    `{Map T}
    `{ToBatch T}
    `{! TraversableFunctor T}
    `{! Compat_Map_Traverse T}
    `{! Compat_ToBatch_Traverse T}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[local] <span class="kn">Generalizable Variables</span> <span class="nf">v</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">

  <span class="sd">(** ** Operations on Vectors *)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">traverse_vector</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chka7"><span class="kn">Lemma</span> <span class="nf">trav_contents_Vector</span> {<span class="nv">n</span>: nat} {<span class="nv">A</span>: <span class="kt">Type</span>}:
      <span class="kr">forall</span> (<span class="nv">v</span>: Vector n A),
        trav_contents v ~~ reverse_Vector v.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Vector n A,
trav_contents v ~~ reverse_Vector v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chka8"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v</span> : Vector n A,
trav_contents v ~~ reverse_Vector v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chka9" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chka9"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector n A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_contents v ~~ reverse_Vector v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkaa"><span class="nb">unfold</span> Vector_sim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector n A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig (trav_contents v) =
proj1_sig (reverse_Vector v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkab" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkab"><span class="nb">unfold</span> trav_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector n A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig
  (coerce plength_eq_length v
   <span class="kr">in</span> Batch_contents (toBatch v)) =
proj1_sig (reverse_Vector v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkac" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkac"><span class="nb">rewrite</span> &lt;- coerce_Vector_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector n A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig (Batch_contents (toBatch v)) =
proj1_sig (reverse_Vector v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkad" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkad"><span class="nb">induction</span> v <span class="nb">using</span> Vector_induction.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig (Batch_contents (toBatch vnil)) =
proj1_sig (reverse_Vector vnil)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chkae" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector m A</span></span></span><br><span><var>IHv</var><span class="hyp-type"><b>: </b><span>proj1_sig (Batch_contents (toBatch v)) =
proj1_sig (reverse_Vector v)</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chkae"><hr></label><div class="goal-conclusion">proj1_sig (Batch_contents (toBatch (vcons m a v))) =
proj1_sig (reverse_Vector (vcons m a v))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkaf" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkaf">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig (Batch_contents (toBatch vnil)) =
proj1_sig (reverse_Vector vnil)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkb0" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkb0">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector m A</span></span></span><br><span><var>IHv</var><span class="hyp-type"><b>: </b><span>proj1_sig (Batch_contents (toBatch v)) =
proj1_sig (reverse_Vector v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig (Batch_contents (toBatch (vcons m a v))) =
proj1_sig (reverse_Vector (vcons m a v))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkb1" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkb1"><span class="nb">rewrite</span> toBatch_to_traverse.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector m A</span></span></span><br><span><var>IHv</var><span class="hyp-type"><b>: </b><span>proj1_sig (Batch_contents (toBatch v)) =
proj1_sig (reverse_Vector v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig
  (Batch_contents
     (traverse (batch A <span class="kt">False</span>) (vcons m a v))) =
proj1_sig (reverse_Vector (vcons m a v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkb2" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkb2"><span class="nb">rewrite</span> traverse_Vector_vcons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector m A</span></span></span><br><span><var>IHv</var><span class="hyp-type"><b>: </b><span>proj1_sig (Batch_contents (toBatch v)) =
proj1_sig (reverse_Vector v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig
  (Batch_contents
     (pure (vcons m) &lt;‚ãÜ&gt; batch A <span class="kt">False</span> a &lt;‚ãÜ&gt;
      traverse (batch A <span class="kt">False</span>) v)) =
proj1_sig (reverse_Vector (vcons m a v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkb3" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkb3"><span class="nb">rewrite</span> Batch_contents_rw_app.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector m A</span></span></span><br><span><var>IHv</var><span class="hyp-type"><b>: </b><span>proj1_sig (Batch_contents (toBatch v)) =
proj1_sig (reverse_Vector v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig
  (Vector_append
     (Batch_contents (traverse (batch A <span class="kt">False</span>) v))
     (Batch_contents
        (pure (vcons m) &lt;‚ãÜ&gt; batch A <span class="kt">False</span> a))) =
proj1_sig (reverse_Vector (vcons m a v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkb4" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkb4"><span class="nb">rewrite</span> proj_Vector_append.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector m A</span></span></span><br><span><var>IHv</var><span class="hyp-type"><b>: </b><span>proj1_sig (Batch_contents (toBatch v)) =
proj1_sig (reverse_Vector v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig
  (Batch_contents (traverse (batch A <span class="kt">False</span>) v)) ++
proj1_sig
  (Batch_contents (pure (vcons m) &lt;‚ãÜ&gt; batch A <span class="kt">False</span> a)) =
proj1_sig (reverse_Vector (vcons m a v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkb5" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkb5"><span class="nb">rewrite</span> Batch_contents_rw_app.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector m A</span></span></span><br><span><var>IHv</var><span class="hyp-type"><b>: </b><span>proj1_sig (Batch_contents (toBatch v)) =
proj1_sig (reverse_Vector v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig
  (Batch_contents (traverse (batch A <span class="kt">False</span>) v)) ++
proj1_sig
  (Vector_append (Batch_contents (batch A <span class="kt">False</span> a))
     (Batch_contents (pure (vcons m)))) =
proj1_sig (reverse_Vector (vcons m a v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkb6" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkb6"><span class="nb">rewrite</span> proj_Vector_append.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector m A</span></span></span><br><span><var>IHv</var><span class="hyp-type"><b>: </b><span>proj1_sig (Batch_contents (toBatch v)) =
proj1_sig (reverse_Vector v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig
  (Batch_contents (traverse (batch A <span class="kt">False</span>) v)) ++
proj1_sig (Batch_contents (batch A <span class="kt">False</span> a)) ++
proj1_sig (Batch_contents (pure (vcons m))) =
proj1_sig (reverse_Vector (vcons m a v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkb7" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkb7"><span class="nb">rewrite</span> Batch_contents_rw_pure.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector m A</span></span></span><br><span><var>IHv</var><span class="hyp-type"><b>: </b><span>proj1_sig (Batch_contents (toBatch v)) =
proj1_sig (reverse_Vector v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig
  (Batch_contents (traverse (batch A <span class="kt">False</span>) v)) ++
proj1_sig (Batch_contents (batch A <span class="kt">False</span> a)) ++
proj1_sig vnil =
proj1_sig (reverse_Vector (vcons m a v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkb8" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkb8"><span class="nb">rewrite</span> proj_reverse_Vector.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector m A</span></span></span><br><span><var>IHv</var><span class="hyp-type"><b>: </b><span>proj1_sig (Batch_contents (toBatch v)) =
proj1_sig (reverse_Vector v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig
  (Batch_contents (traverse (batch A <span class="kt">False</span>) v)) ++
proj1_sig (Batch_contents (batch A <span class="kt">False</span> a)) ++
proj1_sig vnil = List.rev (proj1_sig (vcons m a v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkb9" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkb9"><span class="nb">rewrite</span> proj_vcons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector m A</span></span></span><br><span><var>IHv</var><span class="hyp-type"><b>: </b><span>proj1_sig (Batch_contents (toBatch v)) =
proj1_sig (reverse_Vector v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig
  (Batch_contents (traverse (batch A <span class="kt">False</span>) v)) ++
proj1_sig (Batch_contents (batch A <span class="kt">False</span> a)) ++
proj1_sig vnil = List.rev (a :: proj1_sig v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkba" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkba"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector m A</span></span></span><br><span><var>IHv</var><span class="hyp-type"><b>: </b><span>proj1_sig (Batch_contents (toBatch v)) =
proj1_sig (reverse_Vector v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig
  (Batch_contents (traverse (batch A <span class="kt">False</span>) v)) ++
a :: nil = List.rev (proj1_sig v) ++ a :: nil</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkbb" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkbb"><span class="nb">rewrite</span> &lt;- proj_reverse_Vector.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector m A</span></span></span><br><span><var>IHv</var><span class="hyp-type"><b>: </b><span>proj1_sig (Batch_contents (toBatch v)) =
proj1_sig (reverse_Vector v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig
  (Batch_contents (traverse (batch A <span class="kt">False</span>) v)) ++
a :: nil = proj1_sig (reverse_Vector v) ++ a :: nil</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkbc" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkbc"><span class="nb">rewrite</span> &lt;- IHv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector m A</span></span></span><br><span><var>IHv</var><span class="hyp-type"><b>: </b><span>proj1_sig (Batch_contents (toBatch v)) =
proj1_sig (reverse_Vector v)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig
  (Batch_contents (traverse (batch A <span class="kt">False</span>) v)) ++
a :: nil =
proj1_sig (Batch_contents (toBatch v)) ++ a :: nil</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkbd" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkbd"><span class="kn">Lemma</span> <span class="nf">trav_make_Vector</span> {<span class="nv">n</span>: nat} {<span class="nv">A</span> <span class="nv">B</span>: <span class="kt">Type</span>}:
      <span class="kr">forall</span> (<span class="nv">v1</span>: Vector n A) (<span class="nv">v2</span>: Vector (plength v1) B),
        (trav_make (B := B) v1 v2) ~~ v2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">v1</span> : Vector n A) (<span class="nv">v2</span> : Vector (plength v1) B),
trav_make v1 v2 ~~ v2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkbe" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkbe"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">v1</span> : Vector n A) (<span class="nv">v2</span> : Vector (plength v1) B),
trav_make v1 v2 ~~ v2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkbf" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkbf"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector n A</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (plength v1) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make v1 v2 ~~ v2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkc0" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkc0"><span class="nb">induction</span> v1 <span class="nb">using</span> Vector_induction.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (plength vnil) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make vnil v2 ~~ v2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chkc1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector m A</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (plength (vcons m a v1)) B</span></span></span><br><span><var>IHv1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v2</span> : Vector (plength v1) B,
trav_make v1 v2 ~~ v2</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chkc1"><hr></label><div class="goal-conclusion">trav_make (vcons m a v1) v2 ~~ v2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkc2" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkc2">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (plength vnil) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make vnil v2 ~~ v2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkc3" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkc3"><span class="nb">assert</span> (Hey: v2 = vnil).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (plength vnil) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v2 = vnil</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chkc4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (plength vnil) B</span></span></span><br><span><var>Hey</var><span class="hyp-type"><b>: </b><span>v2 = vnil</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chkc4"><hr></label><div class="goal-conclusion">trav_make vnil v2 ~~ v2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkc5" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkc5">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (plength vnil) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v2 = vnil</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Vector_nil_eq.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkc6" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkc6">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (plength vnil) B</span></span></span><br><span><var>Hey</var><span class="hyp-type"><b>: </b><span>v2 = vnil</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make vnil v2 ~~ v2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkc7" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkc7"><span class="nb">rewrite</span> Hey.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (plength vnil) B</span></span></span><br><span><var>Hey</var><span class="hyp-type"><b>: </b><span>v2 = vnil</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make vnil vnil ~~ vnil</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkc8" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkc8">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector m A</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (plength (vcons m a v1)) B</span></span></span><br><span><var>IHv1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v2</span> : Vector (plength v1) B,
trav_make v1 v2 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make (vcons m a v1) v2 ~~ v2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkc9" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkc9"><span class="nb">cbn</span> <span class="kr">in</span> v2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector m A</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (plength (vcons m a v1)) B</span></span></span><br><span><var>IHv1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v2</span> : Vector (plength v1) B,
trav_make v1 v2 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make (vcons m a v1) v2 ~~ v2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkca" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkca"><span class="nb">unfold</span> trav_make.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector m A</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (plength (vcons m a v1)) B</span></span></span><br><span><var>IHv1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v2</span> : Vector (plength v1) B,
trav_make v1 v2 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_make (toBatch (vcons m a v1))
  (coerce eq_sym (plength_eq_length (vcons m a v1))
   <span class="kr">in</span> v2) ~~ v2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkcb" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkcb"><span class="nb">pose</span> (toBatch_to_traverse (T := Vector (S m)) A B).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector m A</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (plength (vcons m a v1)) B</span></span></span><br><span><var>IHv1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">v2</span> : Vector (plength v1) B,
trav_make v1 v2 ~~ v2</span></span></span><br><span><var>e</var><span><span class="hyp-body"><b>:= </b><span>toBatch_to_traverse A B</span></span><span class="hyp-type"><b>: </b><span>toBatch = traverse (batch A B)</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_make (toBatch (vcons m a v1))
  (coerce eq_sym (plength_eq_length (vcons m a v1))
   <span class="kr">in</span> v2) ~~ v2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Abort</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">traverse_vector</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Lemmas regarding &lt;&lt;trav_make&gt;&gt; *)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">trav_make_lemmas</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
      {<span class="nv">A</span> <span class="nv">B</span>: <span class="kt">Type</span>}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkcc" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkcc"><span class="kn">Lemma</span> <span class="nf">trav_make_sim_refl</span>:
      <span class="kr">forall</span> (<span class="nv">t</span>: T A), trav_make (B := B) t ~!~ trav_make t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> : T A, trav_make t ~!~ trav_make t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkcd" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkcd"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> : T A, trav_make t ~!~ trav_make t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkce" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkce"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t ~!~ trav_make t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkcf" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkcf"><span class="nb">unfold</span> trav_make.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(Batch_make (toBatch t)
 ‚óã coerce_Vector_length (eq_sym (plength_eq_length t))) ~!~
(Batch_make (toBatch t)
 ‚óã coerce_Vector_length (eq_sym (plength_eq_length t)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkd0" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkd0"><span class="nb">unfold</span> Vector_fun_sim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">plength t = plength t /\
(<span class="kr">forall</span> <span class="nv">v1</span> <span class="nv">v2</span> : Vector (plength t) B,
 v1 ~~ v2 -&gt;
 Batch_make (toBatch t)
   (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v1) =
 Batch_make (toBatch t)
   (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v2))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkd1" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkd1"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">plength t = plength t</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chkd2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chkd2"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v1</span> <span class="nv">v2</span> : Vector (plength t) B,
v1 ~~ v2 -&gt;
Batch_make (toBatch t)
  (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v1) =
Batch_make (toBatch t)
  (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v2)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkd3" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkd3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">plength t = plength t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkd4" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkd4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v1</span> <span class="nv">v2</span> : Vector (plength t) B,
v1 ~~ v2 -&gt;
Batch_make (toBatch t)
  (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v1) =
Batch_make (toBatch t)
  (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkd5" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkd5"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>v1, v2</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_make (toBatch t)
  (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v1) =
Batch_make (toBatch t)
  (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkd6" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkd6"><span class="nb">apply</span> Batch_make_sim1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>v1, v2</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v1 ~~
coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkd7" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkd7"><span class="nb">apply</span> Vector_coerce_sim_l&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>v1, v2</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v1 ~~ coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkd8" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkd8"><span class="nb">apply</span> Vector_coerce_sim_r&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>v1, v2</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v1 ~~ v2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkd9" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkd9"><span class="kn">Lemma</span> <span class="nf">toBatch_trav_make_to_replace_contents</span>
      {<span class="nv">A&#39;</span>} {<span class="nv">t</span>: T A} {<span class="nv">v</span>: Vector (plength t) B}:
      toBatch (A&#39; := A&#39;) (trav_make t v) =
        Batch_replace_contents (toBatch (A&#39; := A&#39;) t)
          (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">toBatch (trav_make t v) =
Batch_replace_contents (toBatch t)
  (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkda" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkda"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">toBatch (trav_make t v) =
Batch_replace_contents (toBatch t)
  (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkdb" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkdb"><span class="nb">unfold</span> trav_make.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">toBatch
  (Batch_make (toBatch t)
     (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v)) =
Batch_replace_contents (toBatch t)
  (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkdc" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkdc"><span class="nb">rewrite</span> Batch_make_natural_rw1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_make (map toBatch (toBatch t))
  (coerce batch_length_map toBatch (toBatch t)
   <span class="kr">in</span> coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v) =
Batch_replace_contents (toBatch t)
  (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkdd" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkdd"><span class="nb">rewrite</span> Batch_replace_contents_spec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_make (map toBatch (toBatch t))
  (coerce batch_length_map toBatch (toBatch t)
   <span class="kr">in</span> coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v) =
Batch_make (cojoin_Batch (toBatch t))
  (coerce length_cojoin_Batch (toBatch t)
   <span class="kr">in</span> coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkde" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkde"><span class="nb">apply</span> Batch_make_sim2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map toBatch (toBatch t) = cojoin_Batch (toBatch t)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chkdf" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chkdf"><hr></label><div class="goal-conclusion">coerce batch_length_map toBatch (toBatch t)
<span class="kr">in</span> coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v ~~
coerce length_cojoin_Batch (toBatch t)
<span class="kr">in</span> coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chke0" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chke0">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map toBatch (toBatch t) = cojoin_Batch (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chke1" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chke1">compose near t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(map toBatch ‚àò toBatch) t = (cojoin_Batch ‚àò toBatch) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chke2" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chke2"><span class="nb">rewrite</span> (TraversableFunctor.trf_duplicate (T := T)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(map toBatch ‚àò toBatch) t = (map toBatch ‚àò toBatch) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chke3" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chke3"><span class="nb">rewrite</span> compat_toBatch_traverse.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(map (DerivedOperations.ToBatch_Traverse B A&#39;)
 ‚àò DerivedOperations.ToBatch_Traverse A B) t =
(map (DerivedOperations.ToBatch_Traverse B A&#39;)
 ‚àò DerivedOperations.ToBatch_Traverse A B) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chke4" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chke4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">coerce batch_length_map toBatch (toBatch t)
<span class="kr">in</span> coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v ~~
coerce length_cojoin_Batch (toBatch t)
<span class="kr">in</span> coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">vector_sim.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
    <span class="sd">(** ** Naturality of &lt;&lt;trav_contents&gt;&gt; and &lt;&lt;trav_make&gt;&gt; *)</span>
    <span class="sd">(******************************************************************)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chke5" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chke5"><span class="kn">Lemma</span> <span class="nf">trav_contents_natural</span>:
      <span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span>: <span class="kt">Type</span>) (<span class="nv">t</span>: T A) (<span class="nv">f</span>: A -&gt; B),
        trav_contents (map f t) ~~ map f (trav_contents t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A) (<span class="nv">f</span> : A -&gt; B),
trav_contents (map f t) ~~ map f (trav_contents t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chke6" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chke6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A) (<span class="nv">f</span> : A -&gt; B),
trav_contents (map f t) ~~ map f (trav_contents t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chke7" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chke7"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A0, B0</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A0</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A0 -&gt; B0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_contents (map f t) ~~ map f (trav_contents t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chke8" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chke8"><span class="nb">unfold</span> Vector_sim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A0, B0</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A0</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A0 -&gt; B0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig (trav_contents (map f t)) =
proj1_sig (map f (trav_contents t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chke9" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chke9"><span class="nb">unfold</span> trav_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A0, B0</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A0</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A0 -&gt; B0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig
  (coerce plength_eq_length (map f t)
   <span class="kr">in</span> Batch_contents (toBatch (map f t))) =
proj1_sig
  (map f
     (coerce plength_eq_length t
      <span class="kr">in</span> Batch_contents (toBatch t)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkea" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkea"><span class="nb">rewrite</span> &lt;- coerce_Vector_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A0, B0</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A0</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A0 -&gt; B0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig (Batch_contents (toBatch (map f t))) =
proj1_sig
  (map f
     (coerce plength_eq_length t
      <span class="kr">in</span> Batch_contents (toBatch t)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkeb" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkeb"><span class="nb">rewrite</span> &lt;- map_coerce_Vector.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A0, B0</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A0</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A0 -&gt; B0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig (Batch_contents (toBatch (map f t))) =
proj1_sig (map f (Batch_contents (toBatch t)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkec" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkec">compose near t on <span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A0, B0</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A0</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A0 -&gt; B0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig (Batch_contents ((toBatch ‚àò map f) t)) =
proj1_sig (map f (Batch_contents (toBatch t)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chked" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chked"><span class="nb">rewrite</span> toBatch_mapfst.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A0, B0</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A0</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A0 -&gt; B0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig
  (Batch_contents ((mapfst_Batch f ‚àò toBatch) t)) =
proj1_sig (map f (Batch_contents (toBatch t)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkee" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkee"><span class="nb">unfold</span> compose <span class="nb">at</span> <span class="mi">2</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A0, B0</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A0</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A0 -&gt; B0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig
  (Batch_contents (mapfst_Batch f (toBatch t))) =
proj1_sig (map f (Batch_contents (toBatch t)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkef" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkef"><span class="nb">rewrite</span> Batch_contents_natural.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A0, B0</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A0</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A0 -&gt; B0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig
  (Batch_contents (mapfst_Batch f (toBatch t))) =
proj1_sig
  (Batch_contents (mapfst_Batch f (toBatch t)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkf0" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkf0"><span class="kn">Lemma</span> <span class="nf">trav_make_natural</span>:
      <span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span>: <span class="kt">Type</span>) (<span class="nv">t</span>: T A) (<span class="nv">f</span>: B -&gt; C) (<span class="nv">v</span>: Vector (plength t) B),
        trav_make t (map f v) = map f (trav_make t v).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A) (<span class="nv">f</span> : B -&gt; C)
  (<span class="nv">v</span> : Vector (plength t) B),
trav_make t (map f v) = map f (trav_make t v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkf1" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkf1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A) (<span class="nv">f</span> : B -&gt; C)
  (<span class="nv">v</span> : Vector (plength t) B),
trav_make t (map f v) = map f (trav_make t v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkf2" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkf2"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A0, B0, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A0</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B0 -&gt; C</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t (map f v) = map f (trav_make t v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkf3" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkf3"><span class="nb">unfold</span> trav_make.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A0, B0, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A0</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B0 -&gt; C</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_make (toBatch t)
  (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> map f v) =
map f
  (Batch_make (toBatch t)
     (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkf4" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkf4"><span class="nb">rewrite</span> (Batch_make_natural_rw1 (toBatch t) (map f)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A0, B0, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A0</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B0 -&gt; C</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_make (toBatch t)
  (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> map f v) =
Batch_make (map (map f) (toBatch t))
  (coerce batch_length_map (map f) (toBatch t)
   <span class="kr">in</span> coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkf5" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkf5"><span class="nb">assert</span> (<span class="nb">cut</span>: map (map f) (toBatch t) =
                     mapsnd_Batch f (toBatch t)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A0, B0, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A0</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B0 -&gt; C</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (map f) (toBatch t) = mapsnd_Batch f (toBatch t)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chkf6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A0, B0, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A0</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B0 -&gt; C</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B0</span></span></span><br><span><var>cut</var><span class="hyp-type"><b>: </b><span>map (map f) (toBatch t) =
mapsnd_Batch f (toBatch t)</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chkf6"><hr></label><div class="goal-conclusion">Batch_make (toBatch t)
  (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> map f v) =
Batch_make (map (map f) (toBatch t))
  (coerce batch_length_map (map f) (toBatch t)
   <span class="kr">in</span> coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkf7" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkf7">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A0, B0, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A0</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B0 -&gt; C</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (map f) (toBatch t) = mapsnd_Batch f (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkf8" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkf8">compose near t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A0, B0, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A0</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B0 -&gt; C</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(map (map f) ‚àò toBatch) t =
(mapsnd_Batch f ‚àò toBatch) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> (toBatch_mapsnd).</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkf9" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkf9">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A0, B0, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A0</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B0 -&gt; C</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B0</span></span></span><br><span><var>cut</var><span class="hyp-type"><b>: </b><span>map (map f) (toBatch t) =
mapsnd_Batch f (toBatch t)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_make (toBatch t)
  (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> map f v) =
Batch_make (map (map f) (toBatch t))
  (coerce batch_length_map (map f) (toBatch t)
   <span class="kr">in</span> coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkfa" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkfa"><span class="nb">rewrite</span> (Batch_make_rw
                 (map (map f) (toBatch t))
                 (mapsnd_Batch f (toBatch t))
                 <span class="nb">cut</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A0, B0, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A0</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B0 -&gt; C</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B0</span></span></span><br><span><var>cut</var><span class="hyp-type"><b>: </b><span>map (map f) (toBatch t) =
mapsnd_Batch f (toBatch t)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_make (toBatch t)
  (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> map f v) =
Batch_make (mapsnd_Batch f (toBatch t))
  (coerce eq_ind_r
            (<span class="kr">fun</span> <span class="nv">z</span> : Batch A0 B0 (T C) =&gt;
             length_Batch z =
             length_Batch (mapsnd_Batch f (toBatch t)))
            eq_refl <span class="nb">cut</span>
   <span class="kr">in</span> coerce batch_length_map (map f) (toBatch t)
      <span class="kr">in</span> coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkfb" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkfb"><span class="nb">rewrite</span> coerce_Vector_compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A0, B0, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A0</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B0 -&gt; C</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B0</span></span></span><br><span><var>cut</var><span class="hyp-type"><b>: </b><span>map (map f) (toBatch t) =
mapsnd_Batch f (toBatch t)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_make (toBatch t)
  (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> map f v) =
Batch_make (mapsnd_Batch f (toBatch t))
  (coerce eq_trans
            (batch_length_map (map f) (toBatch t))
            (eq_ind_r
               (<span class="kr">fun</span> <span class="nv">z</span> : Batch A0 B0 (T C) =&gt;
                length_Batch z =
                length_Batch
                  (mapsnd_Batch f (toBatch t)))
               eq_refl <span class="nb">cut</span>)
   <span class="kr">in</span> coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkfc" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkfc"><span class="nb">rewrite</span> coerce_Vector_compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A0, B0, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A0</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B0 -&gt; C</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B0</span></span></span><br><span><var>cut</var><span class="hyp-type"><b>: </b><span>map (map f) (toBatch t) =
mapsnd_Batch f (toBatch t)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_make (toBatch t)
  (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> map f v) =
Batch_make (mapsnd_Batch f (toBatch t))
  (coerce eq_trans (eq_sym (plength_eq_length t))
            (eq_trans
               (batch_length_map (map f) (toBatch t))
               (eq_ind_r
                  (<span class="kr">fun</span> <span class="nv">z</span> : Batch A0 B0 (T C) =&gt;
                   length_Batch z =
                   length_Batch
                     (mapsnd_Batch f (toBatch t)))
                  eq_refl <span class="nb">cut</span>)) <span class="kr">in</span> v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkfd" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkfd"><span class="nb">rewrite</span> Batch_make_natural2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A0, B0, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A0</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B0 -&gt; C</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B0</span></span></span><br><span><var>cut</var><span class="hyp-type"><b>: </b><span>map (map f) (toBatch t) =
mapsnd_Batch f (toBatch t)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_make (toBatch t)
  (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> map f v) =
Batch_make (toBatch t)
  (coerce eq_sym (batch_length_mapsnd f (toBatch t))
   <span class="kr">in</span> map f
        (coerce eq_trans
                  (eq_sym (plength_eq_length t))
                  (eq_trans
                     (batch_length_map (map f)
                        (toBatch t))
                     (eq_ind_r
                        (<span class="kr">fun</span> <span class="nv">z</span> : Batch A0 B0 (T C) =&gt;
                         length_Batch z =
                         length_Batch
                           (mapsnd_Batch f (toBatch t)))
                        eq_refl <span class="nb">cut</span>)) <span class="kr">in</span> v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkfe" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkfe"><span class="nb">apply</span> Batch_make_sim1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A0, B0, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A0</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B0 -&gt; C</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B0</span></span></span><br><span><var>cut</var><span class="hyp-type"><b>: </b><span>map (map f) (toBatch t) =
mapsnd_Batch f (toBatch t)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">coerce eq_sym (plength_eq_length t) <span class="kr">in</span> map f v ~~
coerce eq_sym (batch_length_mapsnd f (toBatch t))
<span class="kr">in</span> map f
     (coerce eq_trans (eq_sym (plength_eq_length t))
               (eq_trans
                  (batch_length_map (map f)
                     (toBatch t))
                  (eq_ind_r
                     (<span class="kr">fun</span> <span class="nv">z</span> : Batch A0 B0 (T C) =&gt;
                      length_Batch z =
                      length_Batch
                        (mapsnd_Batch f (toBatch t)))
                     eq_refl <span class="nb">cut</span>)) <span class="kr">in</span> v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chkff" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chkff"><span class="nb">apply</span> Vector_coerce_sim_r&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A0, B0, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A0</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B0 -&gt; C</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B0</span></span></span><br><span><var>cut</var><span class="hyp-type"><b>: </b><span>map (map f) (toBatch t) =
mapsnd_Batch f (toBatch t)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">coerce eq_sym (plength_eq_length t) <span class="kr">in</span> map f v ~~
map f
  (coerce eq_trans (eq_sym (plength_eq_length t))
            (eq_trans
               (batch_length_map (map f) (toBatch t))
               (eq_ind_r
                  (<span class="kr">fun</span> <span class="nv">z</span> : Batch A0 B0 (T C) =&gt;
                   length_Batch z =
                   length_Batch
                     (mapsnd_Batch f (toBatch t)))
                  eq_refl <span class="nb">cut</span>)) <span class="kr">in</span> v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk100" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk100"><span class="nb">apply</span> Vector_coerce_sim_l&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, A0, B0, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A0</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>B0 -&gt; C</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B0</span></span></span><br><span><var>cut</var><span class="hyp-type"><b>: </b><span>map (map f) (toBatch t) =
mapsnd_Batch f (toBatch t)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map f v ~~
map f
  (coerce eq_trans (eq_sym (plength_eq_length t))
            (eq_trans
               (batch_length_map (map f) (toBatch t))
               (eq_ind_r
                  (<span class="kr">fun</span> <span class="nv">z</span> : Batch A0 B0 (T C) =&gt;
                   length_Batch z =
                   length_Batch
                     (mapsnd_Batch f (toBatch t)))
                  eq_refl <span class="nb">cut</span>)) <span class="kr">in</span> v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> map_coerce_Vector.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">trav_make_lemmas</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Relating &lt;&lt;tolist&gt;&gt; and &lt;&lt;trav_contents&gt;&gt; *)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk101" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk101"><span class="kn">Lemma</span> <span class="nf">tolist_trav_contents</span> `{t: T A}:
    Vector_to_list A (trav_contents t) = List.rev (tolist t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Vector_to_list A (trav_contents t) =
List.rev (tolist t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk102" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk102"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Vector_to_list A (trav_contents t) =
List.rev (tolist t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk103" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk103"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Vector_to_list A (trav_contents t) =
List.rev (tolist t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk104" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk104"><span class="nb">unfold</span> Vector_to_list.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig (trav_contents t) = List.rev (tolist t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk105" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk105"><span class="nb">unfold</span> trav_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig
  (coerce plength_eq_length t
   <span class="kr">in</span> Batch_contents (toBatch t)) =
List.rev (tolist t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk106" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk106"><span class="nb">rewrite</span> &lt;- coerce_Vector_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig (Batch_contents (toBatch t)) =
List.rev (tolist t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk107" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk107"><span class="nb">rewrite</span> tolist_Batch_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">List.rev (tolist (toBatch t)) = List.rev (tolist t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk108" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk108"><span class="nb">rewrite</span> &lt;- tolist_through_toBatch.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">List.rev (tolist t) = List.rev (tolist t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Lens-like laws *)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">lens_laws</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
    <span class="sd">(** *** get-put *)</span>
    <span class="sd">(******************************************************************)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk109" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk109"><span class="kn">Lemma</span> <span class="nf">trav_get_put</span> `{t: T A}:
      trav_make t (trav_contents t) = t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t (trav_contents t) = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk10a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk10a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t (trav_contents t) = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk10b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk10b"><span class="nb">unfold</span> trav_make, trav_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_make (toBatch t)
  (coerce eq_sym (plength_eq_length t)
   <span class="kr">in</span> coerce plength_eq_length t
      <span class="kr">in</span> Batch_contents (toBatch t)) = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk10c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk10c"><span class="nb">rewrite</span> coerce_Vector_compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_make (toBatch t)
  (coerce eq_trans (plength_eq_length t)
            (eq_sym (plength_eq_length t))
   <span class="kr">in</span> Batch_contents (toBatch t)) = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk10d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk10d">hide_lhs;
        <span class="nb">change</span> t <span class="kr">with</span> (id t);
        <span class="nb">rewrite</span> &lt;- TraversableFunctor.trf_extract;
        <span class="nb">rewrite</span> Heqlhs; <span class="nb">clear</span> Heqlhs lhs;
        <span class="nb">unfold</span> compose <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_make (toBatch t)
  (coerce eq_trans (plength_eq_length t)
            (eq_sym (plength_eq_length t))
   <span class="kr">in</span> Batch_contents (toBatch t)) =
extract_Batch (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk10e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk10e"><span class="nb">rewrite</span> &lt;- Batch_make_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_make (toBatch t)
  (coerce eq_trans (plength_eq_length t)
            (eq_sym (plength_eq_length t))
   <span class="kr">in</span> Batch_contents (toBatch t)) =
Batch_make (toBatch t) (Batch_contents (toBatch t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk10f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk10f"><span class="nb">apply</span> Batch_make_sim1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">coerce eq_trans (plength_eq_length t)
         (eq_sym (plength_eq_length t))
<span class="kr">in</span> Batch_contents (toBatch t) ~~
Batch_contents (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk110" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk110">vector_sim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_contents (toBatch t) ~~
Batch_contents (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Batch_contents_toBatch_sim.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
    <span class="sd">(** *** put-get *)</span>
    <span class="sd">(******************************************************************)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk111" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk111"><span class="kn">Lemma</span> <span class="nf">trav_contents_make</span> {<span class="nv">A</span> <span class="nv">B</span>} {<span class="nv">t</span>: T A} {<span class="nv">v</span>: Vector (plength t) B}:
      trav_contents (trav_make t v) ~~ v.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_contents (trav_make t v) ~~ v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk112" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk112"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_contents (trav_make t v) ~~ v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk113" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk113"><span class="nb">unfold</span> trav_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">coerce plength_eq_length (trav_make t v)
<span class="kr">in</span> Batch_contents (toBatch (trav_make t v)) ~~ v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk114" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk114">vector_sim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_contents (toBatch (trav_make t v)) ~~ v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk115" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk115"><span class="nb">rewrite</span> toBatch_trav_make_to_replace_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_contents
  (Batch_replace_contents (toBatch t)
     (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v)) ~~ v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk116" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk116"><span class="nb">rewrite</span> Batch_put_get.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">coerce length_replace_contents (toBatch t)
         (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v)
<span class="kr">in</span> coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v ~~ v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input">vector_sim.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
    <span class="sd">(** *** put-put *)</span>
    <span class="sd">(******************************************************************)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk117" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk117"><span class="kn">Lemma</span> <span class="nf">trav_make_make_</span>
            `(t: T A) `(v: Vector (plength t) B)
            `(v1: Vector (plength (trav_make t v)) B&#39;)
            (v2: Vector (plength t) B&#39;)
            (pf: v1 ~~ v2):
      trav_make (trav_make t v) v1 =
        trav_make t v2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (plength (trav_make t v)) B&#39;</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B&#39;</span></span></span><br><span><var>pf</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make (trav_make t v) v1 = trav_make t v2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk118" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk118"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (plength (trav_make t v)) B&#39;</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B&#39;</span></span></span><br><span><var>pf</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make (trav_make t v) v1 = trav_make t v2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk119" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk119"><span class="nb">unfold</span> trav_make <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (plength (trav_make t v)) B&#39;</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B&#39;</span></span></span><br><span><var>pf</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_make (toBatch (trav_make t v))
  (coerce eq_sym (plength_eq_length (trav_make t v))
   <span class="kr">in</span> v1) = trav_make t v2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk11a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk11a"><span class="nb">unfold</span> trav_make <span class="nb">at</span> <span class="mi">7</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (plength (trav_make t v)) B&#39;</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B&#39;</span></span></span><br><span><var>pf</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_make (toBatch (trav_make t v))
  (coerce eq_sym (plength_eq_length (trav_make t v))
   <span class="kr">in</span> v1) =
Batch_make (toBatch t)
  (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk11b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk11b"><span class="nb">apply</span> Batch_make_sim3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (plength (trav_make t v)) B&#39;</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B&#39;</span></span></span><br><span><var>pf</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape (toBatch (trav_make t v)) = shape (toBatch t)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk11c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (plength (trav_make t v)) B&#39;</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B&#39;</span></span></span><br><span><var>pf</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk11c"><hr></label><div class="goal-conclusion">coerce eq_sym (plength_eq_length (trav_make t v))
<span class="kr">in</span> v1 ~~ coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk11d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk11d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (plength (trav_make t v)) B&#39;</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B&#39;</span></span></span><br><span><var>pf</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape (toBatch (trav_make t v)) = shape (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk11e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk11e"><span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (plength (trav_make t v)) B&#39;</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B&#39;</span></span></span><br><span><var>pf</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape (toBatch t) = shape (toBatch (trav_make t v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk11f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk11f"><span class="nb">rewrite</span> toBatch_trav_make_to_replace_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (plength (trav_make t v)) B&#39;</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B&#39;</span></span></span><br><span><var>pf</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape (toBatch t) =
shape
  (Batch_replace_contents (toBatch t)
     (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Batch_shape_replace_contents.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk120" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk120">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>B'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (plength (trav_make t v)) B&#39;</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B&#39;</span></span></span><br><span><var>pf</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">coerce eq_sym (plength_eq_length (trav_make t v))
<span class="kr">in</span> v1 ~~ coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">vector_sim.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk121" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk121"><span class="kn">Lemma</span> <span class="nf">plength_trav_make</span>: <span class="kr">forall</span> `(t: T A) `(v: Vector _ B),
        plength t = plength (trav_make t v).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A) (<span class="nv">B</span> : <span class="kt">Type</span>)
  (<span class="nv">v</span> : Vector (plength t) B),
plength t = plength (trav_make t v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk122" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk122"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A) (<span class="nv">B</span> : <span class="kt">Type</span>)
  (<span class="nv">v</span> : Vector (plength t) B),
plength t = plength (trav_make t v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk123" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk123"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">plength t = plength (trav_make t v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk124" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk124"><span class="nb">unfold</span> plength <span class="nb">at</span> <span class="mi">1</span> <span class="mi">2</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldMap (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) t =
foldMap (<span class="kr">fun</span> <span class="nv">_</span> : B =&gt; <span class="mi">1</span>) (trav_make t v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk125" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk125"><span class="kp">do</span> <span class="mi">2</span> <span class="nb">change</span> (<span class="kr">fun</span> (<span class="nv">x</span>:<span class="nl">?X</span>) =&gt; <span class="mi">1</span>) <span class="kr">with</span> (const (A := X) <span class="mi">1</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldMap (const <span class="mi">1</span>) t =
foldMap (const <span class="mi">1</span>) (trav_make t v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk126" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk126"><span class="kp">do</span> <span class="mi">2</span> <span class="nb">rewrite</span> (foldMap_through_runBatch2 _ B).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(runBatch (const <span class="mi">1</span>) ‚àò toBatch) t =
(runBatch (const <span class="mi">1</span>) ‚àò toBatch) (trav_make t v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk127" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk127"><span class="nb">unfold</span> compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">runBatch (const <span class="mi">1</span>) (toBatch t) =
runBatch (const <span class="mi">1</span>) (toBatch (trav_make t v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk128" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk128"><span class="nb">rewrite</span> (@toBatch_trav_make_to_replace_contents A B B t v).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">runBatch (const <span class="mi">1</span>) (toBatch t) =
runBatch (const <span class="mi">1</span>)
  (Batch_replace_contents (toBatch t)
     (coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk129" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk129"><span class="nb">rewrite</span> &lt;- (runBatch_const_contents (G := @const <span class="kt">Type</span> <span class="kt">Type</span> nat)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">runBatch (const <span class="mi">1</span>) (toBatch t) =
runBatch (const <span class="mi">1</span>) (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk12a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk12a"><span class="kn">Lemma</span> <span class="nf">trav_make_make</span>:
      <span class="kr">forall</span> `(t: T A) `(v: Vector (plength t) B) (C: <span class="kt">Type</span>),
      trav_make (B := C) (trav_make t v) ~!~
        trav_make t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A) (<span class="nv">B</span> : <span class="kt">Type</span>)
  (<span class="nv">v</span> : Vector (plength t) B) (<span class="nv">C</span> : <span class="kt">Type</span>),
trav_make (trav_make t v) ~!~ trav_make t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk12b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk12b"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A) (<span class="nv">B</span> : <span class="kt">Type</span>)
  (<span class="nv">v</span> : Vector (plength t) B) (<span class="nv">C</span> : <span class="kt">Type</span>),
trav_make (trav_make t v) ~!~ trav_make t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk12c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk12c"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make (trav_make t v) ~!~ trav_make t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk12d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk12d"><span class="nb">unfold</span> Vector_fun_sim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">plength (trav_make t v) = plength t /\
(<span class="kr">forall</span> (<span class="nv">v1</span> : Vector (plength (trav_make t v)) C)
   (<span class="nv">v2</span> : Vector (plength t) C),
 v1 ~~ v2 -&gt;
 trav_make (trav_make t v) v1 = trav_make t v2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk12e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk12e"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">plength (trav_make t v) = plength t</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk12f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk12f"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">v1</span> : Vector (plength (trav_make t v)) C)
  (<span class="nv">v2</span> : Vector (plength t) C),
v1 ~~ v2 -&gt;
trav_make (trav_make t v) v1 = trav_make t v2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk130" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk130">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">plength (trav_make t v) = plength t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk131" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk131"><span class="nb">rewrite</span> &lt;- plength_trav_make.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">plength t = plength t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk132" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk132">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">v1</span> : Vector (plength (trav_make t v)) C)
  (<span class="nv">v2</span> : Vector (plength t) C),
v1 ~~ v2 -&gt;
trav_make (trav_make t v) v1 = trav_make t v2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk133" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk133"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (plength (trav_make t v)) C</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (plength t) C</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make (trav_make t v) v1 = trav_make t v2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> (trav_make_make_ t v v1 v2).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
    <span class="sd">(** ** Lemmas regarding &lt;&lt;shape&gt;&gt; and &lt;&lt;trav_make&gt;&gt; *)</span>
    <span class="sd">(******************************************************************)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk134" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk134"><span class="kn">Lemma</span> <span class="nf">trav_same_shape</span> {<span class="nv">A1</span> <span class="nv">A2</span>: <span class="kt">Type</span>}
      {<span class="nv">t1</span>: T A1} {<span class="nv">t2</span>: T A2}:
      shape t1 = shape t2 -&gt;
      <span class="kr">forall</span> <span class="nv">B</span>, trav_make (B := B) t1 ~!~ trav_make t2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t1 = shape t2 -&gt;
<span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, trav_make t1 ~!~ trav_make t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk135" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk135"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t1 = shape t2 -&gt;
<span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, trav_make t1 ~!~ trav_make t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk136" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk136"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>shape t1 = shape t2</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t1 ~!~ trav_make t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk137" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk137"><span class="nb">unfold</span> trav_make.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>shape t1 = shape t2</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(Batch_make (toBatch t1)
 ‚óã coerce_Vector_length
     (eq_sym (plength_eq_length t1))) ~!~
(Batch_make (toBatch t2)
 ‚óã coerce_Vector_length
     (eq_sym (plength_eq_length t2)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk138" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk138"><span class="nb">apply</span> Vector_coerce_fun_sim_l&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>shape t1 = shape t2</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_make (toBatch t1) ~!~
(Batch_make (toBatch t2)
 ‚óã coerce_Vector_length
     (eq_sym (plength_eq_length t2)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk139" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk139"><span class="nb">apply</span> Vector_coerce_fun_sim_r&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>shape t1 = shape t2</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_make (toBatch t1) ~!~ Batch_make (toBatch t2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk13a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk13a"><span class="nb">apply</span> Batch_make_shape.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>shape t1 = shape t2</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape (toBatch t1) = shape (toBatch t2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk13b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk13b"><span class="nb">apply</span> same_shape_toBatch.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>shape t1 = shape t2</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t1 = shape t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">lens_laws</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Representation theorems *)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk13c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk13c"><span class="kn">Lemma</span> <span class="nf">traverse_repr</span>:
    <span class="kr">forall</span> `{Applicative G} (A B: <span class="kt">Type</span>) (t: T A) (f: A -&gt; G B),
      traverse f t =
        map (trav_make t) (forwards (traverse (mkBackwards ‚àò f) (trav_contents t))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">G</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>) (<span class="nv">Map_G</span> : Map G)
  (<span class="nv">Pure_G</span> : Pure G) (<span class="nv">Mult_G</span> : Mult G),
Applicative G -&gt;
<span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A) (<span class="nv">f</span> : A -&gt; G B),
traverse f t =
map (trav_make t)
  (forwards
     (traverse (mkBackwards ‚àò f) (trav_contents t)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk13d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk13d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">G</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>) (<span class="nv">Map_G</span> : Map G)
  (<span class="nv">Pure_G</span> : Pure G) (<span class="nv">Mult_G</span> : Mult G),
Applicative G -&gt;
<span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A) (<span class="nv">f</span> : A -&gt; G B),
traverse f t =
map (trav_make t)
  (forwards
     (traverse (mkBackwards ‚àò f) (trav_contents t)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk13e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk13e"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">traverse f t =
map (trav_make t)
  (forwards
     (traverse (mkBackwards ‚àò f) (trav_contents t)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk13f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk13f"><span class="nb">rewrite</span> traverse_through_runBatch.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(runBatch f ‚àò toBatch) t =
map (trav_make t)
  (forwards
     (traverse (mkBackwards ‚àò f) (trav_contents t)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk140" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk140"><span class="nb">unfold</span> compose <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">runBatch f (toBatch t) =
map (trav_make t)
  (forwards
     (traverse (mkBackwards ‚àò f) (trav_contents t)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk141" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk141"><span class="nb">rewrite</span> runBatch_repr2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (Batch_make (toBatch t))
  (forwards
     (traverse (mkBackwards ‚àò f)
        (Batch_contents (toBatch t)))) =
map (trav_make t)
  (forwards
     (traverse (mkBackwards ‚àò f) (trav_contents t)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk142" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk142"><span class="nb">unfold</span> trav_make, trav_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (Batch_make (toBatch t))
  (forwards
     (traverse (mkBackwards ‚àò f)
        (Batch_contents (toBatch t)))) =
map
  (Batch_make (toBatch t)
   ‚óã coerce_Vector_length
       (eq_sym (plength_eq_length t)))
  (forwards
     (traverse (mkBackwards ‚àò f)
        (coerce plength_eq_length t
         <span class="kr">in</span> Batch_contents (toBatch t))))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk143" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk143"><span class="nb">rewrite</span> (traverse_Vector_coerce _ _ _ (plength_eq_length t)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (Batch_make (toBatch t))
  (forwards
     (map
        (<span class="kr">fun</span> <span class="nv">v</span> : Vector (plength t) B =&gt;
         coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v)
        (traverse (mkBackwards ‚àò f)
           (coerce plength_eq_length t
            <span class="kr">in</span> Batch_contents (toBatch t))))) =
map
  (Batch_make (toBatch t)
   ‚óã coerce_Vector_length
       (eq_sym (plength_eq_length t)))
  (forwards
     (traverse (mkBackwards ‚àò f)
        (coerce plength_eq_length t
         <span class="kr">in</span> Batch_contents (toBatch t))))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk144" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk144">change_left (
        map (Batch_make (toBatch t))
          (map
             (<span class="kr">fun</span> <span class="nv">v</span>: Vector (plength t) B =&gt;
                coerce eq_sym (plength_eq_length (B := B) t) <span class="kr">in</span> v)
             (forwards
                (traverse (mkBackwards ‚àò f)
                   (coerce (plength_eq_length (B := B) t) <span class="kr">in</span>
                     Batch_contents (toBatch t)))))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (Batch_make (toBatch t))
  (map
     (<span class="kr">fun</span> <span class="nv">v</span> : Vector (plength t) B =&gt;
      coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v)
     (forwards
        (traverse (mkBackwards ‚àò f)
           (coerce plength_eq_length t
            <span class="kr">in</span> Batch_contents (toBatch t))))) =
map
  (Batch_make (toBatch t)
   ‚óã coerce_Vector_length
       (eq_sym (plength_eq_length t)))
  (forwards
     (traverse (mkBackwards ‚àò f)
        (coerce plength_eq_length t
         <span class="kr">in</span> Batch_contents (toBatch t))))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk145" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk145">compose near ((forwards
                     (traverse (mkBackwards ‚àò f)
                        (coerce (plength_eq_length (B := B) t)
                          <span class="kr">in</span> Batch_contents (toBatch t))))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(map (Batch_make (toBatch t))
 ‚àò map
     (<span class="kr">fun</span> <span class="nv">v</span> : Vector (plength t) B =&gt;
      coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v))
  (forwards
     (traverse (mkBackwards ‚àò f)
        (coerce plength_eq_length t
         <span class="kr">in</span> Batch_contents (toBatch t)))) =
map
  (Batch_make (toBatch t)
   ‚óã coerce_Vector_length
       (eq_sym (plength_eq_length t)))
  (forwards
     (traverse (mkBackwards ‚àò f)
        (coerce plength_eq_length t
         <span class="kr">in</span> Batch_contents (toBatch t))))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk146" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk146"><span class="nb">rewrite</span> (fun_map_map).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map
  (Batch_make (toBatch t)
   ‚àò (<span class="kr">fun</span> <span class="nv">v</span> : Vector (plength t) B =&gt;
      coerce eq_sym (plength_eq_length t) <span class="kr">in</span> v))
  (forwards
     (traverse (mkBackwards ‚àò f)
        (coerce plength_eq_length t
         <span class="kr">in</span> Batch_contents (toBatch t)))) =
map
  (Batch_make (toBatch t)
   ‚óã coerce_Vector_length
       (eq_sym (plength_eq_length t)))
  (forwards
     (traverse (mkBackwards ‚àò f)
        (coerce plength_eq_length t
         <span class="kr">in</span> Batch_contents (toBatch t))))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk147" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk147">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">forwards
  (traverse (mkBackwards ‚àò f)
     (coerce plength_eq_length t
      <span class="kr">in</span> Batch_contents (toBatch t))) =
forwards
  (traverse (mkBackwards ‚àò f)
     (coerce plength_eq_length t
      <span class="kr">in</span> Batch_contents (toBatch t)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk148" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk148">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">traverse (mkBackwards ‚àò f)
  (coerce plength_eq_length t
   <span class="kr">in</span> Batch_contents (toBatch t)) =
traverse (mkBackwards ‚àò f)
  (coerce plength_eq_length t
   <span class="kr">in</span> Batch_contents (toBatch t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk149" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk149">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">coerce plength_eq_length t
<span class="kr">in</span> Batch_contents (toBatch t) =
coerce plength_eq_length t
<span class="kr">in</span> Batch_contents (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk14a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk14a"><span class="nb">apply</span> Vector_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig
  (coerce plength_eq_length t
   <span class="kr">in</span> Batch_contents (toBatch t)) =
proj1_sig
  (coerce plength_eq_length t
   <span class="kr">in</span> Batch_contents (toBatch t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk14b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk14b"><span class="nb">apply</span> Vector_coerce_sim_l&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_contents (toBatch t) ~~
coerce plength_eq_length t
<span class="kr">in</span> Batch_contents (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk14c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk14c"><span class="nb">apply</span> Vector_coerce_sim_r&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_contents (toBatch t) ~~
Batch_contents (toBatch t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">eapply</span> Batch_contents_toBatch_sim.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Corollary: Spec for &lt;&lt;traverse&gt;&gt; After Applying &lt;&lt;trav_make&gt;&gt; *)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk14d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk14d"><span class="kn">Corollary</span> <span class="nf">traverse_trav_make</span>:
    <span class="kr">forall</span> `{Applicative G} (X A B: <span class="kt">Type</span>)
      (t: T X) (f: A -&gt; G B) (v: Vector (plength t) A),
      traverse (T := T) f (trav_make t v) =
        map (trav_make t) (forwards (traverse (mkBackwards ‚àò f) v)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">G</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>) (<span class="nv">Map_G</span> : Map G)
  (<span class="nv">Pure_G</span> : Pure G) (<span class="nv">Mult_G</span> : Mult G),
Applicative G -&gt;
<span class="kr">forall</span> (<span class="nv">X</span> <span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T X) (<span class="nv">f</span> : A -&gt; G B)
  (<span class="nv">v</span> : Vector (plength t) A),
traverse f (trav_make t v) =
map (trav_make t)
  (forwards (traverse (mkBackwards ‚àò f) v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk14e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk14e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">G</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>) (<span class="nv">Map_G</span> : Map G)
  (<span class="nv">Pure_G</span> : Pure G) (<span class="nv">Mult_G</span> : Mult G),
Applicative G -&gt;
<span class="kr">forall</span> (<span class="nv">X</span> <span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T X) (<span class="nv">f</span> : A -&gt; G B)
  (<span class="nv">v</span> : Vector (plength t) A),
traverse f (trav_make t v) =
map (trav_make t)
  (forwards (traverse (mkBackwards ‚àò f) v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk14f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk14f"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>X, A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">traverse f (trav_make t v) =
map (trav_make t)
  (forwards (traverse (mkBackwards ‚àò f) v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk150" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk150"><span class="nb">rewrite</span> traverse_repr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>X, A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (trav_make (trav_make t v))
  (forwards
     (traverse (mkBackwards ‚àò f)
        (trav_contents (trav_make t v)))) =
map (trav_make t)
  (forwards (traverse (mkBackwards ‚àò f) v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk151" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk151"><span class="nb">assert</span> (Hlen: plength (trav_make t v) = plength t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>X, A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">plength (trav_make t v) = plength t</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk152" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>X, A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) A</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>plength (trav_make t v) = plength t</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk152"><hr></label><div class="goal-conclusion">map (trav_make (trav_make t v))
  (forwards
     (traverse (mkBackwards ‚àò f)
        (trav_contents (trav_make t v)))) =
map (trav_make t)
  (forwards (traverse (mkBackwards ‚àò f) v))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk153" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk153">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>X, A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">plength (trav_make t v) = plength t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> &lt;- plength_trav_make.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk154" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk154">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>X, A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) A</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>plength (trav_make t v) = plength t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (trav_make (trav_make t v))
  (forwards
     (traverse (mkBackwards ‚àò f)
        (trav_contents (trav_make t v)))) =
map (trav_make t)
  (forwards (traverse (mkBackwards ‚àò f) v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk155" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk155"><span class="nb">rewrite</span> (map_sim_function B (T B) _ _ (trav_make (trav_make t v))
               (trav_make t (B := B)) Hlen).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>X, A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) A</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>plength (trav_make t v) = plength t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (trav_make t ‚óã coerce_Vector_length Hlen)
  (forwards
     (traverse (mkBackwards ‚àò f)
        (trav_contents (trav_make t v)))) =
map (trav_make t)
  (forwards (traverse (mkBackwards ‚àò f) v))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk156" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>X, A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) A</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>plength (trav_make t v) = plength t</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk156"><hr></label><div class="goal-conclusion">trav_make (trav_make t v) ~!~ trav_make t</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk157" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk157"><span class="mi">2</span>: {</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>X, A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) A</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>plength (trav_make t v) = plength t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make (trav_make t v) ~!~ trav_make t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> trav_make_make.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk158" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk158">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>X, A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) A</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>plength (trav_make t v) = plength t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (trav_make t ‚óã coerce_Vector_length Hlen)
  (forwards
     (traverse (mkBackwards ‚àò f)
        (trav_contents (trav_make t v)))) =
map (trav_make t)
  (forwards (traverse (mkBackwards ‚àò f) v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk159" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk159"><span class="nb">change</span> (<span class="nl">?f</span> ‚óã <span class="nl">?pre</span>) <span class="kr">with</span> (f ‚àò pre).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>X, A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) A</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>plength (trav_make t v) = plength t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (trav_make t ‚àò coerce_Vector_length Hlen)
  (forwards
     (traverse (mkBackwards ‚àò f)
        (trav_contents (trav_make t v)))) =
map (trav_make t)
  (forwards (traverse (mkBackwards ‚àò f) v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk15a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk15a"><span class="nb">rewrite</span> &lt;- (fun_map_map).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>X, A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) A</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>plength (trav_make t v) = plength t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(map (trav_make t) ‚àò map (coerce_Vector_length Hlen))
  (forwards
     (traverse (mkBackwards ‚àò f)
        (trav_contents (trav_make t v)))) =
map (trav_make t)
  (forwards (traverse (mkBackwards ‚àò f) v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk15b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk15b"><span class="nb">unfold</span> compose <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>X, A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) A</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>plength (trav_make t v) = plength t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (trav_make t)
  (map (coerce_Vector_length Hlen)
     (forwards
        (traverse (mkBackwards ‚àò f)
           (trav_contents (trav_make t v))))) =
map (trav_make t)
  (forwards (traverse (mkBackwards ‚àò f) v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk15c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk15c">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>X, A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) A</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>plength (trav_make t v) = plength t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (coerce_Vector_length Hlen)
  (forwards
     (traverse (mkBackwards ‚àò f)
        (trav_contents (trav_make t v)))) =
forwards (traverse (mkBackwards ‚àò f) v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk15d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk15d">compose near (traverse (mkBackwards ‚àò f) (trav_contents (trav_make t v))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>X, A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) A</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>plength (trav_make t v) = plength t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(map (coerce_Vector_length Hlen) ‚àò forwards)
  (traverse (mkBackwards ‚àò f)
     (trav_contents (trav_make t v))) =
forwards (traverse (mkBackwards ‚àò f) v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk15e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk15e"><span class="nb">rewrite</span> (natural (Natural := Natural_forwards)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>X, A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) A</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>plength (trav_make t v) = plength t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(forwards ‚àò map (coerce_Vector_length Hlen))
  (traverse (mkBackwards ‚àò f)
     (trav_contents (trav_make t v))) =
forwards (traverse (mkBackwards ‚àò f) v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk15f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk15f"><span class="nb">unfold</span> compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>X, A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) A</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>plength (trav_make t v) = plength t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">forwards
  (map (coerce_Vector_length Hlen)
     (traverse (mkBackwards ‚óã f)
        (trav_contents (trav_make t v)))) =
forwards (traverse (mkBackwards ‚óã f) v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk160" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk160">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>X, A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) A</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>plength (trav_make t v) = plength t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (coerce_Vector_length Hlen)
  (traverse (mkBackwards ‚óã f)
     (trav_contents (trav_make t v))) =
traverse (mkBackwards ‚óã f) v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk161" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk161"><span class="nb">apply</span> map_sim_function_traverse_Vector.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>X, A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) A</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>plength (trav_make t v) = plength t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_contents (trav_make t v) ~~ v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> trav_contents_make.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk162" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk162"><span class="kn">Lemma</span> <span class="nf">foldMap_opposite_traverse</span> {<span class="nv">A</span>}:
    <span class="kr">forall</span> `{Monoid M} `{TraversableFunctor T&#39;}
      `{ToBatch T&#39;} `{! Compat_ToBatch_Traverse T&#39;} (t: T&#39; A) (f: A -&gt; M),
      foldMap (op := Monoid_op_Opposite op) f t =
        forwards (traverse (B := <span class="kt">False</span>) (T := T&#39;) (G := Backwards (const M)) (mkBackwards ‚àò f) t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">M</span> : <span class="kt">Type</span>) (<span class="nv">op</span> : Monoid_op M)
  (<span class="nv">unit0</span> : Monoid_unit M),
Monoid M -&gt;
<span class="kr">forall</span> (<span class="nv">T&#39;</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>) (<span class="nv">Traverse_T</span> : Traverse T&#39;),
TraversableFunctor T&#39; -&gt;
<span class="kr">forall</span> <span class="nv">H4</span> : ToBatch T&#39;,
Compat_ToBatch_Traverse T&#39; -&gt;
<span class="kr">forall</span> (<span class="nv">t</span> : T&#39; A) (<span class="nv">f</span> : A -&gt; M),
foldMap f t = forwards (traverse (mkBackwards ‚àò f) t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk163" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk163"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">M</span> : <span class="kt">Type</span>) (<span class="nv">op</span> : Monoid_op M)
  (<span class="nv">unit0</span> : Monoid_unit M),
Monoid M -&gt;
<span class="kr">forall</span> (<span class="nv">T&#39;</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>) (<span class="nv">Traverse_T</span> : Traverse T&#39;),
TraversableFunctor T&#39; -&gt;
<span class="kr">forall</span> <span class="nv">H4</span> : ToBatch T&#39;,
Compat_ToBatch_Traverse T&#39; -&gt;
<span class="kr">forall</span> (<span class="nv">t</span> : T&#39; A) (<span class="nv">f</span> : A -&gt; M),
foldMap f t = forwards (traverse (mkBackwards ‚àò f) t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk164" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk164"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>T'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T&#39;</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T&#39;</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>ToBatch T&#39;</span></span></span><br><span><var>Compat_ToBatch_Traverse1</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T&#39;</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T&#39; A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldMap f t = forwards (traverse (mkBackwards ‚àò f) t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk165" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk165"><span class="nb">rewrite</span> foldMap_to_traverse1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>T'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T&#39;</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T&#39;</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>ToBatch T&#39;</span></span></span><br><span><var>Compat_ToBatch_Traverse1</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T&#39;</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T&#39; A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">traverse f t = forwards (traverse (mkBackwards ‚àò f) t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk166" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk166"><span class="nb">rewrite</span> traverse_through_runBatch.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>T'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T&#39;</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T&#39;</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>ToBatch T&#39;</span></span></span><br><span><var>Compat_ToBatch_Traverse1</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T&#39;</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T&#39; A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(runBatch f ‚àò toBatch) t =
forwards (traverse (mkBackwards ‚àò f) t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk167" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk167"><span class="nb">rewrite</span> traverse_through_runBatch.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>T'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T&#39;</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T&#39;</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>ToBatch T&#39;</span></span></span><br><span><var>Compat_ToBatch_Traverse1</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T&#39;</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T&#39; A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(runBatch f ‚àò toBatch) t =
forwards ((runBatch (mkBackwards ‚àò f) ‚àò toBatch) t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk168" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk168"><span class="nb">unfold</span> compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>T'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T&#39;</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T&#39;</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>ToBatch T&#39;</span></span></span><br><span><var>Compat_ToBatch_Traverse1</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T&#39;</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T&#39; A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">runBatch f (toBatch t) =
forwards (runBatch (mkBackwards ‚óã f) (toBatch t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk169" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk169"><span class="nb">induction</span> (@toBatch T&#39; _ A <span class="kt">False</span> t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>T'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T&#39;</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T&#39;</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>ToBatch T&#39;</span></span></span><br><span><var>Compat_ToBatch_Traverse1</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T&#39;</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T&#39; A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; M</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">runBatch f (Done c) =
forwards (runBatch (mkBackwards ‚óã f) (Done c))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk16a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>T'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T&#39;</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T&#39;</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>ToBatch T&#39;</span></span></span><br><span><var>Compat_ToBatch_Traverse1</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T&#39;</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T&#39; A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; M</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A <span class="kt">False</span> (<span class="kt">False</span> -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>runBatch f b =
forwards (runBatch (mkBackwards ‚óã f) b)</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk16a"><hr></label><div class="goal-conclusion">runBatch f (b ‚ßÜ a) =
forwards (runBatch (mkBackwards ‚óã f) (b ‚ßÜ a))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk16b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk16b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>T'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T&#39;</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T&#39;</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>ToBatch T&#39;</span></span></span><br><span><var>Compat_ToBatch_Traverse1</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T&#39;</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T&#39; A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; M</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">runBatch f (Done c) =
forwards (runBatch (mkBackwards ‚óã f) (Done c))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk16c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk16c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>T'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T&#39;</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T&#39;</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>ToBatch T&#39;</span></span></span><br><span><var>Compat_ToBatch_Traverse1</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T&#39;</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T&#39; A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; M</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A <span class="kt">False</span> (<span class="kt">False</span> -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>runBatch f b =
forwards (runBatch (mkBackwards ‚óã f) b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">runBatch f (b ‚ßÜ a) =
forwards (runBatch (mkBackwards ‚óã f) (b ‚ßÜ a))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk16d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk16d"><span class="nb">rewrite</span> runBatch_rw2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>T'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T&#39;</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T&#39;</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>ToBatch T&#39;</span></span></span><br><span><var>Compat_ToBatch_Traverse1</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T&#39;</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T&#39; A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; M</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A <span class="kt">False</span> (<span class="kt">False</span> -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>runBatch f b =
forwards (runBatch (mkBackwards ‚óã f) b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">runBatch f b &lt;‚ãÜ&gt; f a =
forwards (runBatch (mkBackwards ‚óã f) (b ‚ßÜ a))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk16e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk16e"><span class="nb">rewrite</span> IHb.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>T'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T&#39;</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T&#39;</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>ToBatch T&#39;</span></span></span><br><span><var>Compat_ToBatch_Traverse1</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T&#39;</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T&#39; A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; M</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A <span class="kt">False</span> (<span class="kt">False</span> -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>runBatch f b =
forwards (runBatch (mkBackwards ‚óã f) b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">forwards (runBatch (mkBackwards ‚óã f) b) &lt;‚ãÜ&gt; f a =
forwards (runBatch (mkBackwards ‚óã f) (b ‚ßÜ a))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk16f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk16f"><span class="nb">rewrite</span> runBatch_rw2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>T'</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T&#39;</span></span></span><br><span><var>H3</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T&#39;</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>ToBatch T&#39;</span></span></span><br><span><var>Compat_ToBatch_Traverse1</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T&#39;</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T&#39; A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; M</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A <span class="kt">False</span> (<span class="kt">False</span> -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>runBatch f b =
forwards (runBatch (mkBackwards ‚óã f) b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">forwards (runBatch (mkBackwards ‚óã f) b) &lt;‚ãÜ&gt; f a =
forwards
  (runBatch (mkBackwards ‚óã f) b &lt;‚ãÜ&gt;
   {| forwards := f a |})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk170" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk170"><span class="kn">Corollary</span> <span class="nf">foldMap_trav_make</span>:
    <span class="kr">forall</span> `{Monoid M} (X A: <span class="kt">Type</span>)
      (t: T X) (f: A -&gt; M) (v: Vector (plength t) A),
      foldMap (T := T) f (trav_make t v) =
        foldMap (op := Monoid_op_Opposite op) f v.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">M</span> : <span class="kt">Type</span>) (<span class="nv">op</span> : Monoid_op M)
  (<span class="nv">unit0</span> : Monoid_unit M),
Monoid M -&gt;
<span class="kr">forall</span> (<span class="nv">X</span> <span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T X) (<span class="nv">f</span> : A -&gt; M)
  (<span class="nv">v</span> : Vector (plength t) A),
foldMap f (trav_make t v) = foldMap f v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk171" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk171"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">M</span> : <span class="kt">Type</span>) (<span class="nv">op</span> : Monoid_op M)
  (<span class="nv">unit0</span> : Monoid_unit M),
Monoid M -&gt;
<span class="kr">forall</span> (<span class="nv">X</span> <span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T X) (<span class="nv">f</span> : A -&gt; M)
  (<span class="nv">v</span> : Vector (plength t) A),
foldMap f (trav_make t v) = foldMap f v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk172" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk172"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>X, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; M</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldMap f (trav_make t v) = foldMap f v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk173" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk173"><span class="nb">unfold</span> foldMap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>X, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; M</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">traverse f (trav_make t v) = traverse f v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk174" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk174"><span class="nb">rewrite</span> traverse_trav_make.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>X, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; M</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (trav_make t)
  (forwards (traverse (mkBackwards ‚àò f) v)) =
traverse f v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk175" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk175">unfold_ops @Map_const.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>X, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; M</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">forwards (traverse (mkBackwards ‚àò f) v) = traverse f v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk176" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk176"><span class="nb">setoid_rewrite</span> &lt;- (foldMap_opposite_traverse (T&#39; := Vector (plength t))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>X, A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T X</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; M</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldMap f v = traverse f v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Corollary: Specs for Functor Operations in Terms of Lens Operations *)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk177" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk177"><span class="kn">Lemma</span> <span class="nf">id_spec</span>:
    <span class="kr">forall</span> (<span class="nv">A</span>: <span class="kt">Type</span>) (<span class="nv">t</span>: T A),
      id t = trav_make t (trav_contents t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A),
id t = trav_make t (trav_contents t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk178" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk178"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A),
id t = trav_make t (trav_contents t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk179" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk179"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">id t = trav_make t (trav_contents t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk17a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk17a"><span class="nb">rewrite</span> trav_get_put.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">id t = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk17b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk17b"><span class="kn">Lemma</span> <span class="nf">map_spec</span>:
    <span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span>: <span class="kt">Type</span>) (<span class="nv">t</span>: T A) (<span class="nv">f</span>: A -&gt; B),
      map f t = trav_make t (map f (trav_contents t)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A) (<span class="nv">f</span> : A -&gt; B),
map f t = trav_make t (map f (trav_contents t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk17c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk17c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A) (<span class="nv">f</span> : A -&gt; B),
map f t = trav_make t (map f (trav_contents t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk17d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk17d"><span class="nb">intros</span> A B t f.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map f t = trav_make t (map f (trav_contents t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk17e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk17e"><span class="nb">rewrite</span> &lt;- trav_get_put <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make (map f t) (trav_contents (map f t)) =
trav_make t (map f (trav_contents t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk17f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk17f"><span class="nb">apply</span> Vector_fun_sim_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make (map f t) ~!~ trav_make t</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk180" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk180"><hr></label><div class="goal-conclusion">trav_contents (map f t) ~~ map f (trav_contents t)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk181" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk181">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make (map f t) ~!~ trav_make t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk182" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk182"><span class="nb">apply</span> trav_same_shape.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape (map f t) = shape t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk183" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk183"><span class="nb">rewrite</span> shape_map.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t = shape t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk184" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk184">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_contents (map f t) ~~ map f (trav_contents t)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> trav_contents_natural.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Corollary: Specification for &lt;&lt;shape&gt;&gt; *)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk185" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk185"><span class="kn">Lemma</span> <span class="nf">trav_contents_shape</span>:
    <span class="kr">forall</span> (<span class="nv">A</span>: <span class="kt">Type</span>) (<span class="nv">t</span>: T A),
      trav_contents (shape t) ~~ Vector_tt (plength t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A),
trav_contents (shape t) ~~ Vector_tt (plength t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk186" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk186"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A),
trav_contents (shape t) ~~ Vector_tt (plength t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk187" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk187"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_contents (shape t) ~~ Vector_tt (plength t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    <span class="c">(* LHS *)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk188" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk188"><span class="nb">unfold</span> trav_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">coerce plength_eq_length (shape t)
<span class="kr">in</span> Batch_contents (toBatch (shape t)) ~~
Vector_tt (plength t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk189" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk189"><span class="nb">apply</span> Vector_coerce_sim_l&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_contents (toBatch (shape t)) ~~
Vector_tt (plength t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk18a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk18a"><span class="nb">unfold</span> shape.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_contents (toBatch (map (const tt) t)) ~~
Vector_tt (plength t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk18b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk18b"><span class="nb">replace</span> (toBatch (A&#39; := <span class="kt">False</span>) (map (const tt) t))
      <span class="kr">with</span> (mapfst_Batch (B := <span class="kt">False</span>) (const tt) (toBatch t)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_contents (mapfst_Batch (const tt) (toBatch t)) ~~
Vector_tt (plength t)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk18c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk18c"><hr></label><div class="goal-conclusion">mapfst_Batch (const tt) (toBatch t) =
toBatch (map (const tt) t)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk18d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk18d"><span class="mi">2</span>:{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mapfst_Batch (const tt) (toBatch t) =
toBatch (map (const tt) t)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk18e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk18e">compose near t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(mapfst_Batch (const tt) ‚àò toBatch) t =
(toBatch ‚àò map (const tt)) t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> toBatch_mapfst.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk18f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk18f">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_contents (mapfst_Batch (const tt) (toBatch t)) ~~
Vector_tt (plength t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk190" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk190"><span class="nb">unfold</span> Vector_tt.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_contents (mapfst_Batch (const tt) (toBatch t)) ~~
Vector_repeat (plength t) tt</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk191" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk191"><span class="nb">unfold</span> plength.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_contents (mapfst_Batch (const tt) (toBatch t)) ~~
Vector_repeat (foldMap (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) t) tt</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk192" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk192"><span class="nb">rewrite</span> foldMap_through_runBatch1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_contents (mapfst_Batch (const tt) (toBatch t)) ~~
Vector_repeat
  ((runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) ‚àò toBatch) t) tt</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk193" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk193"><span class="nb">unfold</span> compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_contents (mapfst_Batch (const tt) (toBatch t)) ~~
Vector_repeat (runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) (toBatch t))
  tt</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk194" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk194"><span class="nb">induction</span> (toBatch t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_contents (mapfst_Batch (const tt) (Done c)) ~~
Vector_repeat (runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) (Done c)) tt</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk195" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A <span class="kt">False</span> (<span class="kt">False</span> -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>Batch_contents (mapfst_Batch (const tt) b) ~~
Vector_repeat (runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) b) tt</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk195"><hr></label><div class="goal-conclusion">Batch_contents (mapfst_Batch (const tt) (b ‚ßÜ a)) ~~
Vector_repeat (runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) (b ‚ßÜ a)) tt</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk196" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk196">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>C</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_contents (mapfst_Batch (const tt) (Done c)) ~~
Vector_repeat (runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) (Done c)) tt</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk197" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk197">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A <span class="kt">False</span> (<span class="kt">False</span> -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>Batch_contents (mapfst_Batch (const tt) b) ~~
Vector_repeat (runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) b) tt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_contents (mapfst_Batch (const tt) (b ‚ßÜ a)) ~~
Vector_repeat (runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) (b ‚ßÜ a)) tt</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk198" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk198"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A <span class="kt">False</span> (<span class="kt">False</span> -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>Batch_contents (mapfst_Batch (const tt) b) ~~
Vector_repeat (runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) b) tt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vcons (length_Batch (mapfst_Batch (const tt) b))
  (const tt a)
  (Batch_contents (mapfst_Batch (const tt) b)) ~~
Vector_repeat (runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) b ‚óè <span class="mi">1</span>) tt</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk199" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk199">unfold_ops @NaturalNumbers.Monoid_op_plus.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A <span class="kt">False</span> (<span class="kt">False</span> -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>Batch_contents (mapfst_Batch (const tt) b) ~~
Vector_repeat (runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) b) tt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vcons (length_Batch (mapfst_Batch (const tt) b))
  (const tt a)
  (Batch_contents (mapfst_Batch (const tt) b)) ~~
Vector_repeat (runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) b + <span class="mi">1</span>) tt</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk19a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk19a"><span class="nb">rewrite</span> PeanoNat.Nat.add_1_r.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A <span class="kt">False</span> (<span class="kt">False</span> -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>Batch_contents (mapfst_Batch (const tt) b) ~~
Vector_repeat (runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) b) tt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vcons (length_Batch (mapfst_Batch (const tt) b))
  (const tt a)
  (Batch_contents (mapfst_Batch (const tt) b)) ~~
Vector_repeat (S (runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) b)) tt</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk19b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk19b"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A <span class="kt">False</span> (<span class="kt">False</span> -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>Batch_contents (mapfst_Batch (const tt) b) ~~
Vector_repeat (runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) b) tt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">vcons (length_Batch (mapfst_Batch (const tt) b))
  (const tt a)
  (Batch_contents (mapfst_Batch (const tt) b)) ~~
vcons (runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) b) tt
  (Vector_repeat (runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) b) tt)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk19c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk19c"><span class="nb">apply</span> vcons_sim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Batch A <span class="kt">False</span> (<span class="kt">False</span> -&gt; C)</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>IHb</var><span class="hyp-type"><b>: </b><span>Batch_contents (mapfst_Batch (const tt) b) ~~
Vector_repeat (runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) b) tt</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Batch_contents (mapfst_Batch (const tt) b) ~~
Vector_repeat (runBatch (<span class="kr">fun</span> <span class="nv">_</span> : A =&gt; <span class="mi">1</span>) b) tt</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk19d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk19d"><span class="kn">Lemma</span> <span class="nf">shape_spec</span>:
    <span class="kr">forall</span> (<span class="nv">A</span>: <span class="kt">Type</span>) (<span class="nv">t</span>: T A),
      shape t = trav_make (B := unit) t (Vector_tt (plength t)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A),
shape t = trav_make t (Vector_tt (plength t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk19e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk19e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A),
shape t = trav_make t (Vector_tt (plength t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk19f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk19f"><span class="nb">intros</span> A t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t = trav_make t (Vector_tt (plength t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1a0" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1a0"><span class="nb">unfold</span> shape.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (const tt) t = trav_make t (Vector_tt (plength t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1a1" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1a1"><span class="nb">rewrite</span> map_spec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t (map (const tt) (trav_contents t)) =
trav_make t (Vector_tt (plength t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1a2" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1a2">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (const tt) (trav_contents t) =
Vector_tt (plength t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1a3" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1a3"><span class="nb">apply</span> Vector_sim_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (const tt) (trav_contents t) ~~
Vector_tt (plength t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1a4" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1a4"><span class="nb">unfold</span> Vector_sim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig (map (const tt) (trav_contents t)) =
proj1_sig (Vector_tt (plength t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1a5" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1a5"><span class="nb">rewrite</span> &lt;- (trav_contents_natural A unit t (const tt)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig (trav_contents (map (const tt) t)) =
proj1_sig (Vector_tt (plength t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1a6" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1a6"><span class="nb">change</span> (map (const tt) t) <span class="kr">with</span> (shape t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig (trav_contents (shape t)) =
proj1_sig (Vector_tt (plength t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1a7" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1a7"><span class="nb">rewrite</span> trav_contents_shape.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig (Vector_tt (plength t)) =
proj1_sig (Vector_tt (plength t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1a8" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1a8"><span class="kn">Lemma</span> <span class="nf">trav_same_shape_rev</span> {<span class="nv">A1</span> <span class="nv">A2</span>: <span class="kt">Type</span>}
    {<span class="nv">t1</span>: T A1} {<span class="nv">t2</span>: T A2}:
    (<span class="kr">forall</span> <span class="nv">B</span>, trav_make (B := B) t1 ~!~ trav_make t2) -&gt;
    shape t1 = shape t2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, trav_make t1 ~!~ trav_make t2) -&gt;
shape t1 = shape t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1a9" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1a9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, trav_make t1 ~!~ trav_make t2) -&gt;
shape t1 = shape t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1aa" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1aa">introv Hmake.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A2</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, trav_make t1 ~!~ trav_make t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t1 = shape t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1ab" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1ab"><span class="nb">rewrite</span> shape_spec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A2</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, trav_make t1 ~!~ trav_make t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t1 (Vector_tt (plength t1)) = shape t2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1ac" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1ac"><span class="nb">rewrite</span> shape_spec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A2</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, trav_make t1 ~!~ trav_make t2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t1 (Vector_tt (plength t1)) =
trav_make t2 (Vector_tt (plength t2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1ad" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1ad"><span class="nb">destruct</span> (Hmake unit) <span class="kr">as</span>
      [Hlen Hmake&#39;].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A2</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, trav_make t1 ~!~ trav_make t2</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>plength t1 = plength t2</span></span></span><br><span><var>Hmake'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v1</span> : Vector (plength t1) unit)
  (<span class="nv">v2</span> : Vector (plength t2) unit),
v1 ~~ v2 -&gt; trav_make t1 v1 = trav_make t2 v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t1 (Vector_tt (plength t1)) =
trav_make t2 (Vector_tt (plength t2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1ae" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1ae"><span class="nb">apply</span> Vector_fun_sim_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A2</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, trav_make t1 ~!~ trav_make t2</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>plength t1 = plength t2</span></span></span><br><span><var>Hmake'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v1</span> : Vector (plength t1) unit)
  (<span class="nv">v2</span> : Vector (plength t2) unit),
v1 ~~ v2 -&gt; trav_make t1 v1 = trav_make t2 v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t1 ~!~ trav_make t2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk1af" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A2</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, trav_make t1 ~!~ trav_make t2</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>plength t1 = plength t2</span></span></span><br><span><var>Hmake'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v1</span> : Vector (plength t1) unit)
  (<span class="nv">v2</span> : Vector (plength t2) unit),
v1 ~~ v2 -&gt; trav_make t1 v1 = trav_make t2 v2</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk1af"><hr></label><div class="goal-conclusion">Vector_tt (plength t1) ~~ Vector_tt (plength t2)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1b0" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1b0">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A2</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, trav_make t1 ~!~ trav_make t2</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>plength t1 = plength t2</span></span></span><br><span><var>Hmake'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v1</span> : Vector (plength t1) unit)
  (<span class="nv">v2</span> : Vector (plength t2) unit),
v1 ~~ v2 -&gt; trav_make t1 v1 = trav_make t2 v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t1 ~!~ trav_make t2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Hmake.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1b1" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1b1">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A2</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, trav_make t1 ~!~ trav_make t2</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>plength t1 = plength t2</span></span></span><br><span><var>Hmake'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v1</span> : Vector (plength t1) unit)
  (<span class="nv">v2</span> : Vector (plength t2) unit),
v1 ~~ v2 -&gt; trav_make t1 v1 = trav_make t2 v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Vector_tt (plength t1) ~~ Vector_tt (plength t2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">inversion</span> Hlen.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1b2" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1b2"><span class="kn">Lemma</span> <span class="nf">trav_same_shape_iff</span> {<span class="nv">A1</span> <span class="nv">A2</span>: <span class="kt">Type</span>}
    {<span class="nv">t1</span>: T A1} {<span class="nv">t2</span>: T A2}:
    shape t1 = shape t2 &lt;-&gt;
      (<span class="kr">forall</span> <span class="nv">B</span>, trav_make (B := B) t1 ~!~ trav_make t2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t1 = shape t2 &lt;-&gt;
(<span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, trav_make t1 ~!~ trav_make t2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1b3" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1b3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t1 = shape t2 &lt;-&gt;
(<span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, trav_make t1 ~!~ trav_make t2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1b4" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1b4"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t1 = shape t2 -&gt;
<span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, trav_make t1 ~!~ trav_make t2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk1b5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A2</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk1b5"><hr></label><div class="goal-conclusion">(<span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, trav_make t1 ~!~ trav_make t2) -&gt;
shape t1 = shape t2</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1b6" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1b6">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t1 = shape t2 -&gt;
<span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, trav_make t1 ~!~ trav_make t2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> trav_same_shape.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1b7" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1b7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t1</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>t2</var><span class="hyp-type"><b>: </b><span>T A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">forall</span> <span class="nv">B</span> : <span class="kt">Type</span>, trav_make t1 ~!~ trav_make t2) -&gt;
shape t1 = shape t2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> trav_same_shape_rev.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1b8" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1b8"><span class="kn">Corollary</span> <span class="nf">trav_make_sim_map</span>:
    <span class="kr">forall</span> `(t: T A)
      `(f: A -&gt; B) (C: <span class="kt">Type</span>),
      trav_make (B := C) t ~!~
        (trav_make (B := C) (map (F := T) f t)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A) (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B)
  (<span class="nv">C</span> : <span class="kt">Type</span>), trav_make t ~!~ trav_make (map f t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1b9" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1b9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A) (<span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B)
  (<span class="nv">C</span> : <span class="kt">Type</span>), trav_make t ~!~ trav_make (map f t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1ba" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1ba"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t ~!~ trav_make (map f t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1bb" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1bb"><span class="nb">apply</span> trav_same_shape_iff.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t = shape (map f t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1bc" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1bc"><span class="nb">rewrite</span> shape_map.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t = shape t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** &lt;&lt;trav_make&gt;&gt; is Preserved by &lt;&lt;shape&gt;&gt; *)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1bd" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1bd"><span class="kn">Lemma</span> <span class="nf">trav_make_shape_spec</span> {<span class="nv">A</span> <span class="nv">B</span>: <span class="kt">Type</span>}: <span class="kr">forall</span> (<span class="nv">t</span>: T A),
      trav_make (B := B) t ~!~ trav_make (B := B) (shape t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> : T A, trav_make t ~!~ trav_make (shape t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1be" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1be"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">t</span> : T A, trav_make t ~!~ trav_make (shape t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1bf" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1bf"><span class="nb">intros</span> t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t ~!~ trav_make (shape t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1c0" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1c0"><span class="nb">apply</span> trav_same_shape.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t = shape (shape t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1c1" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1c1"><span class="nb">rewrite</span> shape_shape.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t = shape t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** &lt;&lt;tosubset&gt;&gt; is Preserved by &lt;&lt;trav_contents&gt;&gt; *)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1c2" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1c2"><span class="kn">Lemma</span> <span class="nf">tosubset_spec</span> `{ToSubset T} `{! Compat_ToSubset_Traverse T}:
    <span class="kr">forall</span> (<span class="nv">A</span>: <span class="kt">Type</span>) (<span class="nv">t</span>: T A),
      tosubset t = tosubset (trav_contents t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A),
tosubset t = tosubset (trav_contents t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1c3" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1c3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A),
tosubset t = tosubset (trav_contents t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1c4" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1c4"><span class="nb">intros</span> A t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tosubset t = tosubset (trav_contents t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1c5" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1c5"><span class="nb">rewrite</span> tosubset_through_tolist.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(tosubset ‚àò tolist) t = tosubset (trav_contents t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1c6" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1c6"><span class="nb">unfold</span> compose <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tosubset (tolist t) = tosubset (trav_contents t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1c7" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1c7"><span class="nb">rewrite</span> (tosubset_through_tolist (T := Vector (plength t))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tosubset (tolist t) =
(tosubset ‚àò tolist) (trav_contents t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1c8" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1c8"><span class="nb">unfold</span> compose <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tosubset (tolist t) =
tosubset (tolist (trav_contents t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1c9" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1c9"><span class="nb">rewrite</span> &lt;- Vector_to_list_tolist.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tosubset (tolist t) =
tosubset (Vector_to_list A (trav_contents t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1ca" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1ca"><span class="nb">rewrite</span> tolist_trav_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">tosubset (tolist t) = tosubset (List.rev (tolist t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1cb" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1cb"><span class="nb">rewrite</span> tosubset_to_foldMap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>TraversableFunctor0</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldMap ret (tolist t) =
foldMap ret (List.rev (tolist t))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> foldMap_comm_list.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">deconstruction</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Lemmas about &lt;&lt;shape&gt;&gt; *)</span>
<span class="sd">(**********************************************************************)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">misc</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    `{Classes.Kleisli.TraversableFunctor.TraversableFunctor T}
    `{ToMap_inst: Map T}
    `{ToSubset_inst: ToSubset T}
    `{ToBatch_inst: ToBatch T}
    `{! Compat_Map_Traverse T}
    `{! Compat_ToSubset_Traverse T}
    `{! Compat_ToBatch_Traverse T}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
    <span class="c">(*</span>
<span class="c">  (** ** Same &lt;&lt;shape&gt;&gt; Implies Same &lt;&lt;trav_make&gt;&gt; *)</span>
<span class="c">  (********************************************************************)</span>
<span class="c">  Lemma same_shape_implies_make_sim:</span>
<span class="c">    forall (A B C: Type) (t: T A) (u: T B),</span>
<span class="c">      shape t = shape u -&gt;</span>
<span class="c">      trav_make (B := C) t ~!~ trav_make u.</span>
<span class="c">  Proof.</span>
<span class="c">    intros. apply trav_same_shape.</span>
<span class="c">    assumption.</span>
<span class="c">    introv Hshape.</span>
<span class="c">    eapply (transitive_Vector_fun_sim).</span>
<span class="c">    apply (trav_make_shape_spec t).</span>
<span class="c">    rewrite Hshape.</span>
<span class="c">    apply symmetric_Vector_fun_sim.</span>
<span class="c">    apply (trav_make_shape_spec u).</span>
<span class="c">  Qed.</span>
<span class="c">   *)</span>

  <span class="sd">(** ** Specification for &lt;&lt;id&gt;&gt; given two terms with the same &lt;&lt;shape&gt;&gt; *)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1cc" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1cc"><span class="kn">Lemma</span> <span class="nf">same_shape_implies_other_make</span>:
    <span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span>: <span class="kt">Type</span>) (<span class="nv">t</span>: T A) (<span class="nv">u</span>: T B)
      (<span class="nv">Hshape</span>: shape t = shape u),
      t = trav_make u
            (coerce (same_shape_implies_plength t u Hshape)
              <span class="kr">in</span> (trav_contents t)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B)
  (<span class="nv">Hshape</span> : shape t = shape u),
t =
trav_make u
  (coerce same_shape_implies_plength t u Hshape
   <span class="kr">in</span> trav_contents t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1cd" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1cd"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B)
  (<span class="nv">Hshape</span> : shape t = shape u),
t =
trav_make u
  (coerce same_shape_implies_plength t u Hshape
   <span class="kr">in</span> trav_contents t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1ce" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1ce"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">t =
trav_make u
  (coerce same_shape_implies_plength t u Hshape
   <span class="kr">in</span> trav_contents t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1cf" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1cf"><span class="nb">change</span> t <span class="kr">with</span> (id t) <span class="nb">at</span> <span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">id t =
trav_make u
  (coerce same_shape_implies_plength t u Hshape
   <span class="kr">in</span> trav_contents t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1d0" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1d0"><span class="nb">rewrite</span> id_spec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t (trav_contents t) =
trav_make u
  (coerce same_shape_implies_plength t u Hshape
   <span class="kr">in</span> trav_contents t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1d1" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1d1"><span class="nb">pose</span> (<span class="nb">cut</span> := trav_same_shape Hshape A).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>cut</var><span><span class="hyp-body"><b>:= </b><span>trav_same_shape Hshape A</span></span><span class="hyp-type"><b>: </b><span>trav_make t ~!~ trav_make u</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t (trav_contents t) =
trav_make u
  (coerce same_shape_implies_plength t u Hshape
   <span class="kr">in</span> trav_contents t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1d2" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1d2"><span class="nb">destruct</span> <span class="nb">cut</span> <span class="kr">as</span> [Hlen H_make_eq].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>plength t = plength u</span></span></span><br><span><var>H_make_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v1</span> : Vector (plength t) A)
  (<span class="nv">v2</span> : Vector (plength u) A),
v1 ~~ v2 -&gt;
trav_make t v1 = trav_make u v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t (trav_contents t) =
trav_make u
  (coerce same_shape_implies_plength t u Hshape
   <span class="kr">in</span> trav_contents t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1d3" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1d3"><span class="nb">apply</span> H_make_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>Hlen</var><span class="hyp-type"><b>: </b><span>plength t = plength u</span></span></span><br><span><var>H_make_eq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">v1</span> : Vector (plength t) A)
  (<span class="nv">v2</span> : Vector (plength u) A),
v1 ~~ v2 -&gt;
trav_make t v1 = trav_make u v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_contents t ~~
coerce same_shape_implies_plength t u Hshape
<span class="kr">in</span> trav_contents t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input">vector_sim.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">misc</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Zipping Terms *)</span>
<span class="sd">(**********************************************************************)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Tealeaves <span class="kn">Require Import</span> Functors.Pair.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">traversable_functors_zipping</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    `{Classes.Kleisli.TraversableFunctor.TraversableFunctor T}
    `{ToMap_inst: Map T}
    `{ToSubset_inst: ToSubset T}
    `{ToBatch_inst: ToBatch T}
    `{! Compat_Map_Traverse T}
    `{! Compat_ToSubset_Traverse T}
    `{! Compat_ToBatch_Traverse T}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Operation to Zip Contents of Same-&lt;&lt;shape&gt;&gt; Terms *)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">same_shape_zip_contents</span>
    (<span class="nv">A</span> <span class="nv">B</span>: <span class="kt">Type</span>) (<span class="nv">t</span>: T A) (<span class="nv">u</span>: T B)
      (<span class="nv">Hshape</span>: shape t = shape u):
    Vector (plength t) (A * B) :=
      Vector_zip A B (plength t) (plength u) (trav_contents t) (trav_contents u)
        (same_shape_implies_plength t u Hshape).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[<span class="kn">global</span>] <span class="kn">Arguments</span> same_shape_zip_contents {A B}%type_scope t u Hshape.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Proof Irrelevance *)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1d4" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1d4"><span class="kn">Lemma</span> <span class="nf">same_shape_zip_contents_proof_irrelevance</span>:
    <span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span>: <span class="kt">Type</span>) (<span class="nv">t</span>: T A) (<span class="nv">u</span>: T B)
      (<span class="nv">Hshape1</span>: shape t = shape u)
      (<span class="nv">Hshape2</span>: shape t = shape u),
      same_shape_zip_contents t u Hshape1 =
        same_shape_zip_contents t u Hshape2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B)
  (<span class="nv">Hshape1</span> <span class="nv">Hshape2</span> : shape t = shape u),
same_shape_zip_contents t u Hshape1 =
same_shape_zip_contents t u Hshape2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1d5" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1d5"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B)
  (<span class="nv">Hshape1</span> <span class="nv">Hshape2</span> : shape t = shape u),
same_shape_zip_contents t u Hshape1 =
same_shape_zip_contents t u Hshape2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1d6" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1d6"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape1, Hshape2</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents t u Hshape1 =
same_shape_zip_contents t u Hshape2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1d7" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1d7"><span class="nb">unfold</span> same_shape_zip_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape1, Hshape2</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Vector_zip A B (plength t) (plength u)
  (trav_contents t) (trav_contents u)
  (same_shape_implies_plength t u Hshape1) =
Vector_zip A B (plength t) (plength u)
  (trav_contents t) (trav_contents u)
  (same_shape_implies_plength t u Hshape2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1d8" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1d8">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape1, Hshape2</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_implies_plength t u Hshape1 =
same_shape_implies_plength t u Hshape2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> proof_irrelevance.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="c">(* useful when &lt;&lt;u&gt;&gt; can&#39;t be rewritten due to Hshape proofs *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1d9" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1d9"><span class="kn">Lemma</span> <span class="nf">same_shape_zip_contents_proof_irrelevance2</span>:
    <span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span>: <span class="kt">Type</span>)
      (<span class="nv">t</span>: T A) (<span class="nv">u</span>: T B) (<span class="nv">u&#39;</span>: T B)
      (<span class="nv">Hshape1</span>: shape t = shape u)
      (<span class="nv">Hshape2</span>: shape t = shape u&#39;),
      u = u&#39; -&gt;
      same_shape_zip_contents t u Hshape1 =
        same_shape_zip_contents t u&#39; Hshape2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A) (<span class="nv">u</span> <span class="nv">u&#39;</span> : T B)
  (<span class="nv">Hshape1</span> : shape t = shape u)
  (<span class="nv">Hshape2</span> : shape t = shape u&#39;),
u = u&#39; -&gt;
same_shape_zip_contents t u Hshape1 =
same_shape_zip_contents t u&#39; Hshape2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1da" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1da"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t</span> : T A) (<span class="nv">u</span> <span class="nv">u&#39;</span> : T B)
  (<span class="nv">Hshape1</span> : shape t = shape u)
  (<span class="nv">Hshape2</span> : shape t = shape u&#39;),
u = u&#39; -&gt;
same_shape_zip_contents t u Hshape1 =
same_shape_zip_contents t u&#39; Hshape2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1db" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1db">introv Heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u, u'</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape1</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>Hshape2</var><span class="hyp-type"><b>: </b><span>shape t = shape u&#39;</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>u = u&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents t u Hshape1 =
same_shape_zip_contents t u&#39; Hshape2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1dc" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1dc"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u'</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape1, Hshape2</var><span class="hyp-type"><b>: </b><span>shape t = shape u&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents t u&#39; Hshape1 =
same_shape_zip_contents t u&#39; Hshape2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> same_shape_zip_contents_proof_irrelevance.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="c">(* useful when &lt;&lt;u&gt;&gt; can&#39;t be rewritten due to Hshape proofs *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1dd" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1dd"><span class="kn">Lemma</span> <span class="nf">same_shape_zip_contents_proof_irrelevance3</span>:
    <span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span>: <span class="kt">Type</span>)
      (<span class="nv">t</span>: T A) (<span class="nv">t&#39;</span>: T A) (<span class="nv">u</span>: T B) (<span class="nv">u&#39;</span>: T B)
      (<span class="nv">Hshape1</span>: shape t = shape u)
      (<span class="nv">Hshape2</span>: shape t&#39; = shape u&#39;),
      t = t&#39; -&gt;
      u = u&#39; -&gt;
      (same_shape_zip_contents t u Hshape1 ~~
        same_shape_zip_contents t&#39; u&#39; Hshape2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t</span> <span class="nv">t&#39;</span> : T A) (<span class="nv">u</span> <span class="nv">u&#39;</span> : T B)
  (<span class="nv">Hshape1</span> : shape t = shape u)
  (<span class="nv">Hshape2</span> : shape t&#39; = shape u&#39;),
t = t&#39; -&gt;
u = u&#39; -&gt;
same_shape_zip_contents t u Hshape1 ~~
same_shape_zip_contents t&#39; u&#39; Hshape2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1de" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1de"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t</span> <span class="nv">t&#39;</span> : T A) (<span class="nv">u</span> <span class="nv">u&#39;</span> : T B)
  (<span class="nv">Hshape1</span> : shape t = shape u)
  (<span class="nv">Hshape2</span> : shape t&#39; = shape u&#39;),
t = t&#39; -&gt;
u = u&#39; -&gt;
same_shape_zip_contents t u Hshape1 ~~
same_shape_zip_contents t&#39; u&#39; Hshape2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1df" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1df">introv Heqt Hequ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t, t'</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u, u'</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape1</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>Hshape2</var><span class="hyp-type"><b>: </b><span>shape t&#39; = shape u&#39;</span></span></span><br><span><var>Heqt</var><span class="hyp-type"><b>: </b><span>t = t&#39;</span></span></span><br><span><var>Hequ</var><span class="hyp-type"><b>: </b><span>u = u&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents t u Hshape1 ~~
same_shape_zip_contents t&#39; u&#39; Hshape2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1e0" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1e0"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t'</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u'</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape1, Hshape2</var><span class="hyp-type"><b>: </b><span>shape t&#39; = shape u&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents t&#39; u&#39; Hshape1 ~~
same_shape_zip_contents t&#39; u&#39; Hshape2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1e1" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1e1"><span class="nb">erewrite</span> same_shape_zip_contents_proof_irrelevance.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t'</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u'</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape1, Hshape2</var><span class="hyp-type"><b>: </b><span>shape t&#39; = shape u&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents t&#39; u&#39; <span class="nl">?Hshape2</span> ~~
same_shape_zip_contents t&#39; u&#39; Hshape2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Roundtrip Properties *)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1e2" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1e2"><span class="kn">Lemma</span> <span class="nf">same_shape_zip_contents_fst</span>
    (<span class="nv">A</span> <span class="nv">B</span>: <span class="kt">Type</span>) (<span class="nv">t</span>: T A) (<span class="nv">u</span>: T B)
    (<span class="nv">Hshape</span>: shape t = shape u):
    map fst (same_shape_zip_contents t u Hshape) = trav_contents t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map fst (same_shape_zip_contents t u Hshape) =
trav_contents t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1e3" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1e3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map fst (same_shape_zip_contents t u Hshape) =
trav_contents t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1e4" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1e4"><span class="nb">unfold</span> same_shape_zip_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map fst
  (Vector_zip A B (plength t) (plength u)
     (trav_contents t) (trav_contents u)
     (same_shape_implies_plength t u Hshape)) =
trav_contents t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1e5" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1e5"><span class="nb">rewrite</span> Vector_zip_fst.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_contents t = trav_contents t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1e6" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1e6"><span class="kn">Lemma</span> <span class="nf">same_shape_zip_contents_snd</span>
    (<span class="nv">A</span> <span class="nv">B</span>: <span class="kt">Type</span>) (<span class="nv">t</span>: T A) (<span class="nv">u</span>: T B)
    (<span class="nv">Hshape</span>: shape t = shape u):
    map snd (same_shape_zip_contents t u Hshape) ~~ trav_contents u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map snd (same_shape_zip_contents t u Hshape) ~~
trav_contents u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1e7" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1e7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map snd (same_shape_zip_contents t u Hshape) ~~
trav_contents u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1e8" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1e8"><span class="nb">unfold</span> same_shape_zip_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map snd
  (Vector_zip A B (plength t) (plength u)
     (trav_contents t) (trav_contents u)
     (same_shape_implies_plength t u Hshape)) ~~
trav_contents u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> (Vector_zip_snd A B
            (plength t) (plength u)
            (trav_contents t) (trav_contents u)
            (same_shape_implies_plength t u Hshape)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Naturality Properties *)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1e9" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1e9"><span class="kn">Lemma</span> <span class="nf">same_shape_map</span> {<span class="nv">A1</span> <span class="nv">A2</span> <span class="nv">B1</span> <span class="nv">B2</span>}:
    <span class="kr">forall</span> (<span class="nv">t</span>: T A1) (<span class="nv">u</span>: T B1) (<span class="nv">Hshape</span>: shape t = shape u)
      (<span class="nv">f</span>: A1 -&gt; A2) (<span class="nv">g</span>: B1 -&gt; B2),
      shape (map f t) = shape (map g u).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A1) (<span class="nv">u</span> : T B1),
shape t = shape u -&gt;
<span class="kr">forall</span> (<span class="nv">f</span> : A1 -&gt; A2) (<span class="nv">g</span> : B1 -&gt; B2),
shape (map f t) = shape (map g u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1ea" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1ea"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A1) (<span class="nv">u</span> : T B1),
shape t = shape u -&gt;
<span class="kr">forall</span> (<span class="nv">f</span> : A1 -&gt; A2) (<span class="nv">g</span> : B1 -&gt; B2),
shape (map f t) = shape (map g u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1eb" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1eb"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape (map f t) = shape (map g u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1ec" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1ec"><span class="nb">rewrite</span> (shape_map).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t = shape (map g u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1ed" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1ed"><span class="nb">rewrite</span> (shape_map).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t = shape u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1ee" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1ee"><span class="kn">Lemma</span> <span class="nf">same_shape_map_l</span> {<span class="nv">A1</span> <span class="nv">A2</span> <span class="nv">B</span>}:
    <span class="kr">forall</span> (<span class="nv">t</span>: T A1) (<span class="nv">u</span>: T B) (<span class="nv">Hshape</span>: shape t = shape u)
      (<span class="nv">f</span>: A1 -&gt; A2),
      shape (map f t) = shape u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A1) (<span class="nv">u</span> : T B),
shape t = shape u -&gt;
<span class="kr">forall</span> <span class="nv">f</span> : A1 -&gt; A2, shape (map f t) = shape u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1ef" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1ef"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A1) (<span class="nv">u</span> : T B),
shape t = shape u -&gt;
<span class="kr">forall</span> <span class="nv">f</span> : A1 -&gt; A2, shape (map f t) = shape u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1f0" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1f0"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape (map f t) = shape u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1f1" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1f1"><span class="nb">rewrite</span> (shape_map).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t = shape u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1f2" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1f2"><span class="kn">Lemma</span> <span class="nf">same_shape_map_r</span> {<span class="nv">A</span> <span class="nv">B1</span> <span class="nv">B2</span>}:
    <span class="kr">forall</span> (<span class="nv">t</span>: T A) (<span class="nv">u</span>: T B1) (<span class="nv">Hshape</span>: shape t = shape u)
      (<span class="nv">g</span>: B1 -&gt; B2),
      shape t = shape (map g u).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B1),
shape t = shape u -&gt;
<span class="kr">forall</span> <span class="nv">g</span> : B1 -&gt; B2, shape t = shape (map g u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1f3" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1f3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B1),
shape t = shape u -&gt;
<span class="kr">forall</span> <span class="nv">g</span> : B1 -&gt; B2, shape t = shape (map g u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1f4" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1f4"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t = shape (map g u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1f5" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1f5"><span class="nb">rewrite</span> (shape_map).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t = shape u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1f6" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1f6"><span class="kn">Lemma</span> <span class="nf">same_shape_map_rev</span> {<span class="nv">A1</span> <span class="nv">A2</span> <span class="nv">B1</span> <span class="nv">B2</span>}:
    <span class="kr">forall</span> (<span class="nv">t</span>: T A1) (<span class="nv">u</span>: T B1)
      (<span class="nv">f</span>: A1 -&gt; A2) (<span class="nv">g</span>: B1 -&gt; B2)
      (<span class="nv">Hshape</span>: shape (map f t) = shape (map g u)),
      shape t = shape u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A1) (<span class="nv">u</span> : T B1) (<span class="nv">f</span> : A1 -&gt; A2)
  (<span class="nv">g</span> : B1 -&gt; B2),
shape (map f t) = shape (map g u) -&gt; shape t = shape u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1f7" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1f7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A1) (<span class="nv">u</span> : T B1) (<span class="nv">f</span> : A1 -&gt; A2)
  (<span class="nv">g</span> : B1 -&gt; B2),
shape (map f t) = shape (map g u) -&gt; shape t = shape u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1f8" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1f8">introv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape (map f t) = shape (map g u) -&gt; shape t = shape u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1f9" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1f9"><span class="nb">rewrite</span> (shape_map).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t = shape (map g u) -&gt; shape t = shape u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1fa" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1fa"><span class="nb">rewrite</span> (shape_map).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t = shape u -&gt; shape t = shape u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1fb" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1fb"><span class="kn">Lemma</span> <span class="nf">same_shape_map_rev_l</span> {<span class="nv">A1</span> <span class="nv">A2</span> <span class="nv">B</span>}:
    <span class="kr">forall</span> (<span class="nv">t</span>: T A1) (<span class="nv">u</span>: T B)
      (<span class="nv">f</span>: A1 -&gt; A2)
      (<span class="nv">Hshape</span>: shape (map f t) = shape u),
      shape t = shape u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A1) (<span class="nv">u</span> : T B) (<span class="nv">f</span> : A1 -&gt; A2),
shape (map f t) = shape u -&gt; shape t = shape u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1fc" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1fc"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A1) (<span class="nv">u</span> : T B) (<span class="nv">f</span> : A1 -&gt; A2),
shape (map f t) = shape u -&gt; shape t = shape u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1fd" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1fd">introv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape (map f t) = shape u -&gt; shape t = shape u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1fe" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1fe"><span class="nb">rewrite</span> (shape_map).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t = shape u -&gt; shape t = shape u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk1ff" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk1ff"><span class="kn">Lemma</span> <span class="nf">same_shape_map_rev_r</span> {<span class="nv">A</span> <span class="nv">B1</span> <span class="nv">B2</span>}:
    <span class="kr">forall</span> (<span class="nv">t</span>: T A) (<span class="nv">u</span>: T B1)
      (<span class="nv">g</span>: B1 -&gt; B2)
      (<span class="nv">Hshape</span>: shape t = shape (map g u)),
      shape t = shape u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B1) (<span class="nv">g</span> : B1 -&gt; B2),
shape t = shape (map g u) -&gt; shape t = shape u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk200" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk200"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B1) (<span class="nv">g</span> : B1 -&gt; B2),
shape t = shape (map g u) -&gt; shape t = shape u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk201" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk201">introv.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t = shape (map g u) -&gt; shape t = shape u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk202" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk202"><span class="nb">rewrite</span> (shape_map).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t = shape u -&gt; shape t = shape u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">easy</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk203" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk203"><span class="kn">Lemma</span> <span class="nf">natural_same_shape_zip_contents</span>
    {<span class="nv">A1</span> <span class="nv">A2</span> <span class="nv">B1</span> <span class="nv">B2</span>: <span class="kt">Type</span>}:
    <span class="kr">forall</span> (<span class="nv">t</span>: T A1) (<span class="nv">u</span>: T B1) (<span class="nv">Hshape</span>: shape t = shape u)
      (<span class="nv">f</span>: A1 -&gt; A2) (<span class="nv">g</span>: B1 -&gt; B2),
      map (map_pair f g) (same_shape_zip_contents t u Hshape)=
        coerce (natural_plength f t) <span class="kr">in</span>
      same_shape_zip_contents (map f t) (map g u) (same_shape_map t u Hshape _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A1) (<span class="nv">u</span> : T B1)
  (<span class="nv">Hshape</span> : shape t = shape u) (<span class="nv">f</span> : A1 -&gt; A2)
  (<span class="nv">g</span> : B1 -&gt; B2),
map (map_pair f g)
  (same_shape_zip_contents t u Hshape) =
coerce natural_plength f t
<span class="kr">in</span> same_shape_zip_contents (map f t) (map g u)
     (same_shape_map t u Hshape f g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk204" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk204"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A1) (<span class="nv">u</span> : T B1)
  (<span class="nv">Hshape</span> : shape t = shape u) (<span class="nv">f</span> : A1 -&gt; A2)
  (<span class="nv">g</span> : B1 -&gt; B2),
map (map_pair f g)
  (same_shape_zip_contents t u Hshape) =
coerce natural_plength f t
<span class="kr">in</span> same_shape_zip_contents (map f t) (map g u)
     (same_shape_map t u Hshape f g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk205" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk205"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (map_pair f g)
  (same_shape_zip_contents t u Hshape) =
coerce natural_plength f t
<span class="kr">in</span> same_shape_zip_contents (map f t) (map g u)
     (same_shape_map t u Hshape f g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk206" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk206"><span class="nb">apply</span> Vector_sim_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (map_pair f g)
  (same_shape_zip_contents t u Hshape) ~~
coerce natural_plength f t
<span class="kr">in</span> same_shape_zip_contents (map f t) (map g u)
     (same_shape_map t u Hshape f g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk207" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk207">vector_sim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (map_pair f g)
  (same_shape_zip_contents t u Hshape) ~~
same_shape_zip_contents (map f t) (map g u)
  (same_shape_map t u Hshape f g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk208" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk208"><span class="nb">unfold</span> same_shape_zip_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (map_pair f g)
  (Vector_zip A1 B1 (plength t) (plength u)
     (trav_contents t) (trav_contents u)
     (same_shape_implies_plength t u Hshape)) ~~
Vector_zip A2 B2 (plength (map f t))
  (plength (map g u)) (trav_contents (map f t))
  (trav_contents (map g u))
  (same_shape_implies_plength (map f t) (map g u)
     (same_shape_map t u Hshape f g))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk209" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk209"><span class="nb">unfold</span> Vector_zip.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (map_pair f g)
  (Vector_zip_eq (trav_contents t)
     (coerce eq_sym
               (same_shape_implies_plength t u Hshape)
      <span class="kr">in</span> trav_contents u)) ~~
Vector_zip_eq (trav_contents (map f t))
  (coerce eq_sym
            (same_shape_implies_plength (map f t)
               (map g u)
               (same_shape_map t u Hshape f g))
   <span class="kr">in</span> trav_contents (map g u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk20a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk20a"><span class="nb">rewrite</span> natural_Vector_zip_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Vector_zip_eq (map f (trav_contents t))
  (map g
     (coerce eq_sym
               (same_shape_implies_plength t u Hshape)
      <span class="kr">in</span> trav_contents u)) ~~
Vector_zip_eq (trav_contents (map f t))
  (coerce eq_sym
            (same_shape_implies_plength (map f t)
               (map g u)
               (same_shape_map t u Hshape f g))
   <span class="kr">in</span> trav_contents (map g u))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk20b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk20b"><span class="nb">apply</span> Vector_zip_eq_sim_poly_both.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map f (trav_contents t) ~~ trav_contents (map f t)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk20c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk20c"><hr></label><div class="goal-conclusion">map g
  (coerce eq_sym
            (same_shape_implies_plength t u Hshape)
   <span class="kr">in</span> trav_contents u) ~~
coerce eq_sym
         (same_shape_implies_plength 
            (map f t) 
            (map g u) 
            (same_shape_map t u Hshape f g))
<span class="kr">in</span> trav_contents (map g u)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk20d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk20d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map f (trav_contents t) ~~ trav_contents (map f t)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk20e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk20e"><span class="nb">apply</span> symmetric_Vector_sim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_contents (map f t) ~~ map f (trav_contents t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> trav_contents_natural.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk20f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk20f">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map g
  (coerce eq_sym
            (same_shape_implies_plength t u Hshape)
   <span class="kr">in</span> trav_contents u) ~~
coerce eq_sym
         (same_shape_implies_plength (map f t)
            (map g u) (same_shape_map t u Hshape f g))
<span class="kr">in</span> trav_contents (map g u)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk210" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk210">vector_sim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map g (trav_contents u) ~~ trav_contents (map g u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk211" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk211"><span class="nb">apply</span> symmetric_Vector_sim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_contents (map g u) ~~ map g (trav_contents u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> trav_contents_natural.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk212" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk212"><span class="kn">Lemma</span> <span class="nf">natural_same_shape_zip_contents_op</span>
    {<span class="nv">A1</span> <span class="nv">A2</span> <span class="nv">B1</span> <span class="nv">B2</span>: <span class="kt">Type</span>}:
    <span class="kr">forall</span> (<span class="nv">t</span>: T A1) (<span class="nv">u</span>: T B1)
      (<span class="nv">f</span>: A1 -&gt; A2) (<span class="nv">g</span>: B1 -&gt; B2)
      (<span class="nv">Hshape</span>: shape (map f t) = shape (map g u)),
      same_shape_zip_contents (map f t) (map g u) Hshape =
        coerce (eq_sym (natural_plength f t)) <span class="kr">in</span>
      map (map_pair f g) (same_shape_zip_contents t u (same_shape_map_rev t u _ _ Hshape)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A1) (<span class="nv">u</span> : T B1) (<span class="nv">f</span> : A1 -&gt; A2)
  (<span class="nv">g</span> : B1 -&gt; B2)
  (<span class="nv">Hshape</span> : shape (map f t) = shape (map g u)),
same_shape_zip_contents (map f t) (map g u) Hshape =
coerce eq_sym (natural_plength f t)
<span class="kr">in</span> map (map_pair f g)
     (same_shape_zip_contents t u
        (same_shape_map_rev t u f g Hshape))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk213" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk213"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A1) (<span class="nv">u</span> : T B1) (<span class="nv">f</span> : A1 -&gt; A2)
  (<span class="nv">g</span> : B1 -&gt; B2)
  (<span class="nv">Hshape</span> : shape (map f t) = shape (map g u)),
same_shape_zip_contents (map f t) (map g u) Hshape =
coerce eq_sym (natural_plength f t)
<span class="kr">in</span> map (map_pair f g)
     (same_shape_zip_contents t u
        (same_shape_map_rev t u f g Hshape))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk214" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk214"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape (map f t) = shape (map g u)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents (map f t) (map g u) Hshape =
coerce eq_sym (natural_plength f t)
<span class="kr">in</span> map (map_pair f g)
     (same_shape_zip_contents t u
        (same_shape_map_rev t u f g Hshape))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk215" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk215"><span class="nb">rewrite</span> natural_same_shape_zip_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape (map f t) = shape (map g u)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents (map f t) (map g u) Hshape =
coerce eq_sym (natural_plength f t)
<span class="kr">in</span> coerce natural_plength f t
   <span class="kr">in</span> same_shape_zip_contents (map f t) (map g u)
        (same_shape_map t u
           (same_shape_map_rev t u f g Hshape) f g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk216" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk216"><span class="nb">apply</span> Vector_sim_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape (map f t) = shape (map g u)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents (map f t) (map g u) Hshape ~~
coerce eq_sym (natural_plength f t)
<span class="kr">in</span> coerce natural_plength f t
   <span class="kr">in</span> same_shape_zip_contents (map f t) (map g u)
        (same_shape_map t u
           (same_shape_map_rev t u f g Hshape) f g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk217" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk217">vector_sim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape (map f t) = shape (map g u)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents (map f t) (map g u) Hshape ~~
same_shape_zip_contents (map f t) (map g u)
  (same_shape_map t u
     (same_shape_map_rev t u f g Hshape) f g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk218" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk218">vector_sim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape (map f t) = shape (map g u)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents (map f t) (map g u) Hshape ~~
same_shape_zip_contents (map f t) (map g u)
  (same_shape_map t u
     (same_shape_map_rev t u f g Hshape) f g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk219" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk219">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape (map f t) = shape (map g u)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents (map f t) (map g u) Hshape =
same_shape_zip_contents (map f t) (map g u)
  (same_shape_map t u
     (same_shape_map_rev t u f g Hshape) f g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk21a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk21a">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape (map f t) = shape (map g u)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Hshape =
same_shape_map t u (same_shape_map_rev t u f g Hshape)
  f g</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> proof_irrelevance.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk21b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk21b"><span class="kn">Corollary</span> <span class="nf">natural_fst_same_shape_zip_contents</span>
    {<span class="nv">A1</span> <span class="nv">A2</span> <span class="nv">B</span>: <span class="kt">Type</span>}:
    <span class="kr">forall</span> (<span class="nv">t</span>: T A1) (<span class="nv">u</span>: T B) (<span class="nv">Hshape</span>: shape t = shape u)
      (<span class="nv">f</span>: A1 -&gt; A2),
      map (map_fst f) (same_shape_zip_contents t u Hshape) =
        coerce (natural_plength f t) <span class="kr">in</span>
      same_shape_zip_contents (map f t) u (same_shape_map_l t u Hshape f).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A1) (<span class="nv">u</span> : T B)
  (<span class="nv">Hshape</span> : shape t = shape u) (<span class="nv">f</span> : A1 -&gt; A2),
map (map_fst f) (same_shape_zip_contents t u Hshape) =
coerce natural_plength f t
<span class="kr">in</span> same_shape_zip_contents (map f t) u
     (same_shape_map_l t u Hshape f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk21c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk21c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A1) (<span class="nv">u</span> : T B)
  (<span class="nv">Hshape</span> : shape t = shape u) (<span class="nv">f</span> : A1 -&gt; A2),
map (map_fst f) (same_shape_zip_contents t u Hshape) =
coerce natural_plength f t
<span class="kr">in</span> same_shape_zip_contents (map f t) u
     (same_shape_map_l t u Hshape f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk21d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk21d"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (map_fst f) (same_shape_zip_contents t u Hshape) =
coerce natural_plength f t
<span class="kr">in</span> same_shape_zip_contents (map f t) u
     (same_shape_map_l t u Hshape f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk21e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk21e"><span class="nb">rewrite</span> map_fst_to_pair.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (map_pair f id)
  (same_shape_zip_contents t u Hshape) =
coerce natural_plength f t
<span class="kr">in</span> same_shape_zip_contents (map f t) u
     (same_shape_map_l t u Hshape f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk21f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk21f"><span class="nb">rewrite</span> natural_same_shape_zip_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">coerce natural_plength f t
<span class="kr">in</span> same_shape_zip_contents (map f t) (map id u)
     (same_shape_map t u Hshape f id) =
coerce natural_plength f t
<span class="kr">in</span> same_shape_zip_contents (map f t) u
     (same_shape_map_l t u Hshape f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk220" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk220"><span class="nb">apply</span> Vector_sim_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">coerce natural_plength f t
<span class="kr">in</span> same_shape_zip_contents (map f t) (map id u)
     (same_shape_map t u Hshape f id) ~~
coerce natural_plength f t
<span class="kr">in</span> same_shape_zip_contents (map f t) u
     (same_shape_map_l t u Hshape f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk221" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk221">vector_sim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents (map f t) (map id u)
  (same_shape_map t u Hshape f id) ~~
same_shape_zip_contents (map f t) u
  (same_shape_map_l t u Hshape f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk222" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk222">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents (map f t) (map id u)
  (same_shape_map t u Hshape f id) =
same_shape_zip_contents (map f t) u
  (same_shape_map_l t u Hshape f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk223" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk223"><span class="nb">apply</span> same_shape_zip_contents_proof_irrelevance2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map id u = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk224" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk224"><span class="nb">rewrite</span> fun_map_id.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">id u = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk225" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk225"><span class="kn">Corollary</span> <span class="nf">natural_fst_same_shape_zip_contents_rev</span>
    {<span class="nv">A1</span> <span class="nv">A2</span> <span class="nv">B</span>: <span class="kt">Type</span>}:
    <span class="kr">forall</span> (<span class="nv">t</span>: T A1) (<span class="nv">u</span>: T B)
      (<span class="nv">f</span>: A1 -&gt; A2)
      (<span class="nv">Hshape</span>: shape (map f t) = shape u),
      same_shape_zip_contents (map f t) u Hshape =
        coerce (eq_sym (natural_plength f t)) <span class="kr">in</span>
        map (map_fst f) (same_shape_zip_contents t u (same_shape_map_rev_l _ _ _ Hshape)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A1) (<span class="nv">u</span> : T B) (<span class="nv">f</span> : A1 -&gt; A2)
  (<span class="nv">Hshape</span> : shape (map f t) = shape u),
same_shape_zip_contents (map f t) u Hshape =
coerce eq_sym (natural_plength f t)
<span class="kr">in</span> map (map_fst f)
     (same_shape_zip_contents t u
        (same_shape_map_rev_l t u f Hshape))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk226" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk226"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A1) (<span class="nv">u</span> : T B) (<span class="nv">f</span> : A1 -&gt; A2)
  (<span class="nv">Hshape</span> : shape (map f t) = shape u),
same_shape_zip_contents (map f t) u Hshape =
coerce eq_sym (natural_plength f t)
<span class="kr">in</span> map (map_fst f)
     (same_shape_zip_contents t u
        (same_shape_map_rev_l t u f Hshape))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk227" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk227"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape (map f t) = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents (map f t) u Hshape =
coerce eq_sym (natural_plength f t)
<span class="kr">in</span> map (map_fst f)
     (same_shape_zip_contents t u
        (same_shape_map_rev_l t u f Hshape))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk228" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk228"><span class="nb">rewrite</span> map_fst_to_pair.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape (map f t) = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents (map f t) u Hshape =
coerce eq_sym (natural_plength f t)
<span class="kr">in</span> map (map_pair f id)
     (same_shape_zip_contents t u
        (same_shape_map_rev_l t u f Hshape))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk229" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk229"><span class="nb">rewrite</span> natural_same_shape_zip_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape (map f t) = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents (map f t) u Hshape =
coerce eq_sym (natural_plength f t)
<span class="kr">in</span> coerce natural_plength f t
   <span class="kr">in</span> same_shape_zip_contents (map f t) (map id u)
        (same_shape_map t u
           (same_shape_map_rev_l t u f Hshape) f id)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk22a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk22a"><span class="nb">apply</span> Vector_sim_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape (map f t) = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents (map f t) u Hshape ~~
coerce eq_sym (natural_plength f t)
<span class="kr">in</span> coerce natural_plength f t
   <span class="kr">in</span> same_shape_zip_contents (map f t) (map id u)
        (same_shape_map t u
           (same_shape_map_rev_l t u f Hshape) f id)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk22b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk22b">vector_sim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape (map f t) = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents (map f t) u Hshape ~~
same_shape_zip_contents (map f t) (map id u)
  (same_shape_map t u
     (same_shape_map_rev_l t u f Hshape) f id)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk22c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk22c">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape (map f t) = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents (map f t) u Hshape =
same_shape_zip_contents (map f t) (map id u)
  (same_shape_map t u
     (same_shape_map_rev_l t u f Hshape) f id)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk22d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk22d"><span class="nb">apply</span> same_shape_zip_contents_proof_irrelevance2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape (map f t) = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">u = map id u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk22e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk22e"><span class="nb">rewrite</span> fun_map_id.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape (map f t) = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">u = id u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">

</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk22f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk22f"><span class="kn">Corollary</span> <span class="nf">natural_snd_same_shape_zip_contents</span>
    {<span class="nv">A</span> <span class="nv">B1</span> <span class="nv">B2</span>: <span class="kt">Type</span>}:
    <span class="kr">forall</span> (<span class="nv">t</span>: T A) (<span class="nv">u</span>: T B1) (<span class="nv">Hshape</span>: shape t = shape u)
      (<span class="nv">g</span>: B1 -&gt; B2),
      map (map_snd g) (same_shape_zip_contents t u Hshape) =
      same_shape_zip_contents t (map g u) (same_shape_map_r t u Hshape g).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B1)
  (<span class="nv">Hshape</span> : shape t = shape u) (<span class="nv">g</span> : B1 -&gt; B2),
map (map_snd g) (same_shape_zip_contents t u Hshape) =
same_shape_zip_contents t (map g u)
  (same_shape_map_r t u Hshape g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk230" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk230"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B1)
  (<span class="nv">Hshape</span> : shape t = shape u) (<span class="nv">g</span> : B1 -&gt; B2),
map (map_snd g) (same_shape_zip_contents t u Hshape) =
same_shape_zip_contents t (map g u)
  (same_shape_map_r t u Hshape g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk231" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk231"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (map_snd g) (same_shape_zip_contents t u Hshape) =
same_shape_zip_contents t (map g u)
  (same_shape_map_r t u Hshape g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk232" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk232"><span class="nb">rewrite</span> map_snd_to_pair.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (map_pair id g)
  (same_shape_zip_contents t u Hshape) =
same_shape_zip_contents t (map g u)
  (same_shape_map_r t u Hshape g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk233" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk233"><span class="nb">rewrite</span> natural_same_shape_zip_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">coerce natural_plength id t
<span class="kr">in</span> same_shape_zip_contents (map id t) (map g u)
     (same_shape_map t u Hshape id g) =
same_shape_zip_contents t (map g u)
  (same_shape_map_r t u Hshape g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk234" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk234"><span class="nb">apply</span> Vector_sim_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">coerce natural_plength id t
<span class="kr">in</span> same_shape_zip_contents (map id t) (map g u)
     (same_shape_map t u Hshape id g) ~~
same_shape_zip_contents t (map g u)
  (same_shape_map_r t u Hshape g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk235" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk235">vector_sim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents (map id t) (map g u)
  (same_shape_map t u Hshape id g) ~~
same_shape_zip_contents t (map g u)
  (same_shape_map_r t u Hshape g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk236" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk236"><span class="nb">apply</span> same_shape_zip_contents_proof_irrelevance3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map id t = t</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk237" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk237"><hr></label><div class="goal-conclusion">map g u = map g u</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk238" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk238"><span class="nb">rewrite</span> fun_map_id.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">id t = t</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk239" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk239"><hr></label><div class="goal-conclusion">map g u = map g u</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk23a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk23a"><span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map g u = map g u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk23b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk23b"><span class="kn">Corollary</span> <span class="nf">natural_snd_same_shape_zip_contents_rev</span>
    {<span class="nv">A</span> <span class="nv">B1</span> <span class="nv">B2</span>: <span class="kt">Type</span>}:
    <span class="kr">forall</span> (<span class="nv">t</span>: T A) (<span class="nv">u</span>: T B1)
      (<span class="nv">g</span>: B1 -&gt; B2)
      (<span class="nv">Hshape</span>: shape t = shape (map g u)),
      same_shape_zip_contents t (map g u) Hshape =
        map (map_snd g) (same_shape_zip_contents t u (same_shape_map_rev_r _ _ _ Hshape)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B1) (<span class="nv">g</span> : B1 -&gt; B2)
  (<span class="nv">Hshape</span> : shape t = shape (map g u)),
same_shape_zip_contents t (map g u) Hshape =
map (map_snd g)
  (same_shape_zip_contents t u
     (same_shape_map_rev_r t u g Hshape))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk23c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk23c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B1) (<span class="nv">g</span> : B1 -&gt; B2)
  (<span class="nv">Hshape</span> : shape t = shape (map g u)),
same_shape_zip_contents t (map g u) Hshape =
map (map_snd g)
  (same_shape_zip_contents t u
     (same_shape_map_rev_r t u g Hshape))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk23d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk23d"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape (map g u)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents t (map g u) Hshape =
map (map_snd g)
  (same_shape_zip_contents t u
     (same_shape_map_rev_r t u g Hshape))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk23e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk23e"><span class="nb">rewrite</span> map_snd_to_pair.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape (map g u)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents t (map g u) Hshape =
map (map_pair id g)
  (same_shape_zip_contents t u
     (same_shape_map_rev_r t u g Hshape))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk23f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk23f"><span class="nb">rewrite</span> natural_same_shape_zip_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape (map g u)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents t (map g u) Hshape =
coerce natural_plength id t
<span class="kr">in</span> same_shape_zip_contents (map id t) (map g u)
     (same_shape_map t u
        (same_shape_map_rev_r t u g Hshape) id g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk240" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk240"><span class="nb">apply</span> Vector_sim_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape (map g u)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents t (map g u) Hshape ~~
coerce natural_plength id t
<span class="kr">in</span> same_shape_zip_contents (map id t) (map g u)
     (same_shape_map t u
        (same_shape_map_rev_r t u g Hshape) id g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk241" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk241">vector_sim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape (map g u)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip_contents t (map g u) Hshape ~~
same_shape_zip_contents (map id t) (map g u)
  (same_shape_map t u
     (same_shape_map_rev_r t u g Hshape) id g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk242" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk242"><span class="nb">apply</span> same_shape_zip_contents_proof_irrelevance3.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape (map g u)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">t = map id t</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk243" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape (map g u)</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk243"><hr></label><div class="goal-conclusion">map g u = map g u</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk244" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk244"><span class="nb">rewrite</span> fun_map_id.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape (map g u)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">t = id t</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk245" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape (map g u)</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk245"><hr></label><div class="goal-conclusion">map g u = map g u</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk246" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk246"><span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape (map g u)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map g u = map g u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Operation to Zip Same-&lt;&lt;shape&gt;&gt; Terms *)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">same_shape_zip</span>
    (<span class="nv">A</span> <span class="nv">B</span>: <span class="kt">Type</span>) (<span class="nv">t</span>: T A) (<span class="nv">u</span>: T B)
      (<span class="nv">Hshape</span>: shape t = shape u):
      T (A * B) :=
    trav_make t (same_shape_zip_contents t u Hshape).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">#[<span class="kn">global</span>] <span class="kn">Arguments</span> same_shape_zip {A B}%type_scope t u Hshape.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk247" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk247"><span class="kn">Lemma</span> <span class="nf">same_shape_zip_fst</span>
    (<span class="nv">A</span> <span class="nv">B</span>: <span class="kt">Type</span>) (<span class="nv">t</span>: T A) (<span class="nv">u</span>: T B)
    (<span class="nv">Hshape</span>: shape t = shape u):
    map fst (same_shape_zip t u Hshape) = t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map fst (same_shape_zip t u Hshape) = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk248" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk248"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map fst (same_shape_zip t u Hshape) = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk249" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk249"><span class="nb">unfold</span> same_shape_zip.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map fst
  (trav_make t (same_shape_zip_contents t u Hshape)) =
t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk24a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk24a"><span class="nb">rewrite</span> &lt;- (trav_make_natural A (A * B) A t (@fst A B)
                 (same_shape_zip_contents t u Hshape)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t
  (map fst (same_shape_zip_contents t u Hshape)) = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk24b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk24b"><span class="nb">rewrite</span> same_shape_zip_contents_fst.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t (trav_contents t) = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk24c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk24c"><span class="nb">rewrite</span> trav_get_put.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">t = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk24d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk24d"><span class="kn">Lemma</span> <span class="nf">same_shape_zip_snd</span>
    (<span class="nv">A</span> <span class="nv">B</span>: <span class="kt">Type</span>) (<span class="nv">t</span>: T A) (<span class="nv">u</span>: T B)
    (<span class="nv">Hshape</span>: shape t = shape u):
    map snd (same_shape_zip t u Hshape) = u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map snd (same_shape_zip t u Hshape) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk24e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk24e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map snd (same_shape_zip t u Hshape) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk24f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk24f"><span class="nb">unfold</span> same_shape_zip.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map snd
  (trav_make t (same_shape_zip_contents t u Hshape)) =
u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk250" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk250"><span class="nb">rewrite</span> &lt;- (trav_make_natural A (A * B) B t (@snd A B)
                 (same_shape_zip_contents t u Hshape)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t
  (map snd (same_shape_zip_contents t u Hshape)) = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk251" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk251"><span class="nb">change</span> u <span class="kr">with</span> (id u) <span class="nb">at</span> <span class="mi">2</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t
  (map snd (same_shape_zip_contents t u Hshape)) =
id u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk252" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk252"><span class="nb">rewrite</span> id_spec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t
  (map snd (same_shape_zip_contents t u Hshape)) =
trav_make u (trav_contents u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk253" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk253"><span class="nb">apply</span> Vector_fun_sim_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t ~!~ trav_make u</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk254" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk254"><hr></label><div class="goal-conclusion">map snd (same_shape_zip_contents t u Hshape) ~~
trav_contents u</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk255" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk255">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t ~!~ trav_make u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk256" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk256"><span class="nb">apply</span> trav_same_shape.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t = shape u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk257" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk257">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map snd (same_shape_zip_contents t u Hshape) ~~
trav_contents u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> same_shape_zip_contents_snd.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Proof Irrelevance *)</span>
  <span class="sd">(********************************************************************)</span>
  <span class="c">(* useful when &lt;&lt;u&gt;&gt; can&#39;t be rewritten due to Hshape proofs *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk258" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk258"><span class="kn">Lemma</span> <span class="nf">same_shape_zip_proof_irrelevance</span>:
    <span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span>: <span class="kt">Type</span>)
      (<span class="nv">t</span>: T A) (<span class="nv">t&#39;</span>: T A) (<span class="nv">u</span>: T B) (<span class="nv">u&#39;</span>: T B)
      (<span class="nv">Hshape1</span>: shape t = shape u)
      (<span class="nv">Hshape2</span>: shape t&#39; = shape u&#39;),
      t = t&#39; -&gt;
      u = u&#39; -&gt;
      same_shape_zip t u Hshape1 =
        same_shape_zip t&#39; u&#39; Hshape2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t</span> <span class="nv">t&#39;</span> : T A) (<span class="nv">u</span> <span class="nv">u&#39;</span> : T B)
  (<span class="nv">Hshape1</span> : shape t = shape u)
  (<span class="nv">Hshape2</span> : shape t&#39; = shape u&#39;),
t = t&#39; -&gt;
u = u&#39; -&gt;
same_shape_zip t u Hshape1 =
same_shape_zip t&#39; u&#39; Hshape2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk259" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk259"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">t</span> <span class="nv">t&#39;</span> : T A) (<span class="nv">u</span> <span class="nv">u&#39;</span> : T B)
  (<span class="nv">Hshape1</span> : shape t = shape u)
  (<span class="nv">Hshape2</span> : shape t&#39; = shape u&#39;),
t = t&#39; -&gt;
u = u&#39; -&gt;
same_shape_zip t u Hshape1 =
same_shape_zip t&#39; u&#39; Hshape2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk25a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk25a">introv Heqt Hequ.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t, t'</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u, u'</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape1</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>Hshape2</var><span class="hyp-type"><b>: </b><span>shape t&#39; = shape u&#39;</span></span></span><br><span><var>Heqt</var><span class="hyp-type"><b>: </b><span>t = t&#39;</span></span></span><br><span><var>Hequ</var><span class="hyp-type"><b>: </b><span>u = u&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip t u Hshape1 =
same_shape_zip t&#39; u&#39; Hshape2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk25b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk25b"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t'</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u'</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape1, Hshape2</var><span class="hyp-type"><b>: </b><span>shape t&#39; = shape u&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip t&#39; u&#39; Hshape1 =
same_shape_zip t&#39; u&#39; Hshape2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk25c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk25c">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t'</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u'</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape1, Hshape2</var><span class="hyp-type"><b>: </b><span>shape t&#39; = shape u&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Hshape1 = Hshape2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> proof_irrelevance.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Naturality Properties *)</span>
  <span class="sd">(********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk25d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk25d"><span class="kn">Lemma</span> <span class="nf">natural_same_shape_zip</span>
    {<span class="nv">A1</span> <span class="nv">A2</span> <span class="nv">B1</span> <span class="nv">B2</span>: <span class="kt">Type</span>}:
    <span class="kr">forall</span> (<span class="nv">t</span>: T A1) (<span class="nv">u</span>: T B1) (<span class="nv">Hshape</span>: shape t = shape u)
      (<span class="nv">f</span>: A1 -&gt; A2) (<span class="nv">g</span>: B1 -&gt; B2),
      map (map_pair f g) (same_shape_zip t u Hshape) =
        same_shape_zip (map f t) (map g u) (same_shape_map t u Hshape _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A1) (<span class="nv">u</span> : T B1)
  (<span class="nv">Hshape</span> : shape t = shape u) (<span class="nv">f</span> : A1 -&gt; A2)
  (<span class="nv">g</span> : B1 -&gt; B2),
map (map_pair f g) (same_shape_zip t u Hshape) =
same_shape_zip (map f t) (map g u)
  (same_shape_map t u Hshape f g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk25e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk25e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A1) (<span class="nv">u</span> : T B1)
  (<span class="nv">Hshape</span> : shape t = shape u) (<span class="nv">f</span> : A1 -&gt; A2)
  (<span class="nv">g</span> : B1 -&gt; B2),
map (map_pair f g) (same_shape_zip t u Hshape) =
same_shape_zip (map f t) (map g u)
  (same_shape_map t u Hshape f g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk25f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk25f"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (map_pair f g) (same_shape_zip t u Hshape) =
same_shape_zip (map f t) (map g u)
  (same_shape_map t u Hshape f g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk260" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk260"><span class="nb">unfold</span> same_shape_zip.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (map_pair f g)
  (trav_make t (same_shape_zip_contents t u Hshape)) =
trav_make (map f t)
  (same_shape_zip_contents (map f t) (map g u)
     (same_shape_map t u Hshape f g))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk261" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk261"><span class="nb">rewrite</span> &lt;- trav_make_natural.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t
  (map (map_pair f g)
     (same_shape_zip_contents t u Hshape)) =
trav_make (map f t)
  (same_shape_zip_contents (map f t) (map g u)
     (same_shape_map t u Hshape f g))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk262" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk262"><span class="nb">rewrite</span> natural_same_shape_zip_contents.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t
  (coerce natural_plength f t
   <span class="kr">in</span> same_shape_zip_contents (map f t) (map g u)
        (same_shape_map t u Hshape f g)) =
trav_make (map f t)
  (same_shape_zip_contents (map f t) (map g u)
     (same_shape_map t u Hshape f g))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk263" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk263"><span class="nb">apply</span> Vector_fun_sim_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t ~!~ trav_make (map f t)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk264" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk264"><hr></label><div class="goal-conclusion">coerce natural_plength f t
<span class="kr">in</span> same_shape_zip_contents 
     (map f t) (map g u)
     (same_shape_map t u Hshape f g) ~~
same_shape_zip_contents 
  (map f t) (map g u) 
  (same_shape_map t u Hshape f g)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk265" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk265">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t ~!~ trav_make (map f t)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk266" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk266"><span class="nb">apply</span> trav_same_shape.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t = shape (map f t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk267" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk267"><span class="nb">rewrite</span> shape_map.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t = shape t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk268" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk268">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">coerce natural_plength f t
<span class="kr">in</span> same_shape_zip_contents (map f t) (map g u)
     (same_shape_map t u Hshape f g) ~~
same_shape_zip_contents (map f t) (map g u)
  (same_shape_map t u Hshape f g)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input">vector_sim.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk269" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk269"><span class="kn">Corollary</span> <span class="nf">natural_fst_same_shape_zip</span>
    {<span class="nv">A1</span> <span class="nv">A2</span> <span class="nv">B</span>: <span class="kt">Type</span>}:
    <span class="kr">forall</span> (<span class="nv">t</span>: T A1) (<span class="nv">u</span>: T B) (<span class="nv">Hshape</span>: shape t = shape u)
      (<span class="nv">f</span>: A1 -&gt; A2),
      map (map_fst f) (same_shape_zip t u Hshape) =
        same_shape_zip (map f t) u (same_shape_map_l t u Hshape f).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A1) (<span class="nv">u</span> : T B)
  (<span class="nv">Hshape</span> : shape t = shape u) (<span class="nv">f</span> : A1 -&gt; A2),
map (map_fst f) (same_shape_zip t u Hshape) =
same_shape_zip (map f t) u
  (same_shape_map_l t u Hshape f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk26a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk26a"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A1) (<span class="nv">u</span> : T B)
  (<span class="nv">Hshape</span> : shape t = shape u) (<span class="nv">f</span> : A1 -&gt; A2),
map (map_fst f) (same_shape_zip t u Hshape) =
same_shape_zip (map f t) u
  (same_shape_map_l t u Hshape f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk26b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk26b"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (map_fst f) (same_shape_zip t u Hshape) =
same_shape_zip (map f t) u
  (same_shape_map_l t u Hshape f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk26c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk26c"><span class="nb">rewrite</span> map_fst_to_pair.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (map_pair f id) (same_shape_zip t u Hshape) =
same_shape_zip (map f t) u
  (same_shape_map_l t u Hshape f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk26d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk26d"><span class="nb">rewrite</span> natural_same_shape_zip.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip (map f t) (map id u)
  (same_shape_map t u Hshape f id) =
same_shape_zip (map f t) u
  (same_shape_map_l t u Hshape f)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk26e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk26e"><span class="nb">apply</span> same_shape_zip_proof_irrelevance.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map f t = map f t</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk26f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk26f"><hr></label><div class="goal-conclusion">map id u = u</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk270" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk270">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map f t = map f t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk271" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk271">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A1, A2, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A1</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A1 -&gt; A2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map id u = u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> fun_map_id.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk272" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk272"><span class="kn">Corollary</span> <span class="nf">natural_snd_same_shape_zip</span>
    {<span class="nv">A</span> <span class="nv">B1</span> <span class="nv">B2</span>: <span class="kt">Type</span>}:
    <span class="kr">forall</span> (<span class="nv">t</span>: T A) (<span class="nv">u</span>: T B1) (<span class="nv">Hshape</span>: shape t = shape u)
      (<span class="nv">g</span>: B1 -&gt; B2),
      map (map_snd g) (same_shape_zip t u Hshape) =
      same_shape_zip t (map g u) (same_shape_map_r t u Hshape g).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B1)
  (<span class="nv">Hshape</span> : shape t = shape u) (<span class="nv">g</span> : B1 -&gt; B2),
map (map_snd g) (same_shape_zip t u Hshape) =
same_shape_zip t (map g u)
  (same_shape_map_r t u Hshape g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk273" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk273"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B1)
  (<span class="nv">Hshape</span> : shape t = shape u) (<span class="nv">g</span> : B1 -&gt; B2),
map (map_snd g) (same_shape_zip t u Hshape) =
same_shape_zip t (map g u)
  (same_shape_map_r t u Hshape g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk274" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk274"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (map_snd g) (same_shape_zip t u Hshape) =
same_shape_zip t (map g u)
  (same_shape_map_r t u Hshape g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk275" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk275"><span class="nb">rewrite</span> map_snd_to_pair.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (map_pair id g) (same_shape_zip t u Hshape) =
same_shape_zip t (map g u)
  (same_shape_map_r t u Hshape g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk276" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk276"><span class="nb">rewrite</span> natural_same_shape_zip.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">same_shape_zip (map id t) (map g u)
  (same_shape_map t u Hshape id g) =
same_shape_zip t (map g u)
  (same_shape_map_r t u Hshape g)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk277" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk277"><span class="nb">apply</span> same_shape_zip_proof_irrelevance.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map id t = t</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk278" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk278"><hr></label><div class="goal-conclusion">map g u = map g u</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk279" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk279">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map id t = t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk27a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk27a"><span class="nb">rewrite</span> fun_map_id.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">id t = t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk27b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk27b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B1, B2</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B1</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B1 -&gt; B2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map g u = map g u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk27c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk27c"><span class="kn">Lemma</span> <span class="nf">same_shape_zip_same_shape</span> {<span class="nv">A</span> <span class="nv">B</span>}:
    <span class="kr">forall</span> (<span class="nv">t</span>: T A) (<span class="nv">u</span>: T B)
    (<span class="nv">Hshape</span>: shape t = shape u),
      shape (same_shape_zip t u Hshape) = shape t.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B)
  (<span class="nv">Hshape</span> : shape t = shape u),
shape (same_shape_zip t u Hshape) = shape t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk27d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk27d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B)
  (<span class="nv">Hshape</span> : shape t = shape u),
shape (same_shape_zip t u Hshape) = shape t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk27e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk27e"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape (same_shape_zip t u Hshape) = shape t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk27f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk27f"><span class="nb">apply</span> (same_shape_map_rev _ _ fst id).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape (map fst (same_shape_zip t u Hshape)) =
shape (map id t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk280" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk280"><span class="nb">rewrite</span> fun_map_id.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape (map fst (same_shape_zip t u Hshape)) =
shape (id t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk281" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk281"><span class="nb">rewrite</span> same_shape_zip_fst.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t = shape (id t)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** ** Traversals over the zip *)</span>
  <span class="sd">(**********************************************************************)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk282" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk282"><span class="kn">Lemma</span> <span class="nf">map_sim_fns</span>:
    <span class="kr">forall</span> (<span class="nv">n</span> <span class="nv">m</span>: nat) (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span>: <span class="kt">Type</span>) `{Applicative G}
      (mk1: Vector n B -&gt; C) (v1: Vector n A)
      (mk2: Vector m B -&gt; C) (v2: Vector m A)
      (f: A -&gt; G B),
      mk1 ~!~ mk2 -&gt;
      v1 ~~ v2 -&gt;
      map (F := G) mk1 (traverse (G := G) (T := Vector n) f v1) = map (F := G) mk2 (traverse (T := Vector m) f v2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> <span class="nv">m</span> : nat) (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>) (<span class="nv">G</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>)
  (<span class="nv">Map_G</span> : Map G) (<span class="nv">Pure_G</span> : Pure G) (<span class="nv">Mult_G</span> : Mult G),
Applicative G -&gt;
<span class="kr">forall</span> (<span class="nv">mk1</span> : Vector n B -&gt; C) (<span class="nv">v1</span> : Vector n A)
  (<span class="nv">mk2</span> : Vector m B -&gt; C) (<span class="nv">v2</span> : Vector m A)
  (<span class="nv">f</span> : A -&gt; G B),
mk1 ~!~ mk2 -&gt;
v1 ~~ v2 -&gt;
map mk1 (traverse f v1) = map mk2 (traverse f v2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk283" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk283"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">n</span> <span class="nv">m</span> : nat) (<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>) (<span class="nv">G</span> : <span class="kt">Type</span> -&gt; <span class="kt">Type</span>)
  (<span class="nv">Map_G</span> : Map G) (<span class="nv">Pure_G</span> : Pure G) (<span class="nv">Mult_G</span> : Mult G),
Applicative G -&gt;
<span class="kr">forall</span> (<span class="nv">mk1</span> : Vector n B -&gt; C) (<span class="nv">v1</span> : Vector n A)
  (<span class="nv">mk2</span> : Vector m B -&gt; C) (<span class="nv">v2</span> : Vector m A)
  (<span class="nv">f</span> : A -&gt; G B),
mk1 ~!~ mk2 -&gt;
v1 ~~ v2 -&gt;
map mk1 (traverse f v1) = map mk2 (traverse f v2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk284" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk284"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n, m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector n B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector n A</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector m B -&gt; C</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector m A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map mk1 (traverse f v1) = map mk2 (traverse f v2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk285" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk285"><span class="nb">assert</span> (Heq: n = m) <span class="bp">by</span> (<span class="bp">now</span> <span class="nb">apply</span> Vector_sim_length <span class="kr">in</span> H2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n, m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector n B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector n A</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector m B -&gt; C</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector m A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>n = m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map mk1 (traverse f v1) = map mk2 (traverse f v2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk286" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk286"><span class="nb">generalize dependent</span> v2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n, m</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector n B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector n A</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector m B -&gt; C</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>n = m</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">v2</span> : Vector m A,
v1 ~~ v2 -&gt;
map mk1 (traverse f v1) = map mk2 (traverse f v2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk287" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk287"><span class="nb">generalize dependent</span> m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector n B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector n A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">m</span> : nat) (<span class="nv">mk2</span> : Vector m B -&gt; C),
mk1 ~!~ mk2 -&gt;
n = m -&gt;
<span class="kr">forall</span> <span class="nv">v2</span> : Vector m A,
v1 ~~ v2 -&gt;
map mk1 (traverse f v1) = map mk2 (traverse f v2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk288" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk288"><span class="nb">induction</span> n; <span class="nb">intros</span>; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map mk1 (traverse f v1) = map mk2 (traverse f v2)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk289" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">mk1</span> : Vector n B -&gt; C) 
  (<span class="nv">v1</span> : Vector n A) (<span class="nv">m</span> : nat)
  (<span class="nv">mk2</span> : Vector m B -&gt; C),
mk1 ~!~ mk2 -&gt;
n = m -&gt;
<span class="kr">forall</span> <span class="nv">v2</span> : Vector m A,
v1 ~~ v2 -&gt;
map mk1 (traverse f v1) =
map mk2 (traverse f v2)</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk289"><hr></label><div class="goal-conclusion">map mk1 (traverse f v1) = map mk2 (traverse f v2)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk28a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk28a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map mk1 (traverse f v1) = map mk2 (traverse f v2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk28b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk28b"><span class="nb">rewrite</span> (Vector_nil_eq v1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map mk1 (traverse f vnil) = map mk2 (traverse f v2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk28c" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk28c"><span class="nb">rewrite</span> (Vector_nil_eq v2).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map mk1 (traverse f vnil) = map mk2 (traverse f vnil)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk28d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk28d"><span class="nb">rewrite</span> traverse_Vector_vnil.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map mk1 (pure vnil) = map mk2 (pure vnil)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk28e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk28e">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mk1 = mk2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk28f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk28f">ext v.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mk1 v = mk2 v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk290" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk290"><span class="nb">apply</span> Vector_fun_sim_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mk1 ~!~ mk2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk291" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> B</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk291"><hr></label><div class="goal-conclusion">v ~~ v</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk292" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk292"><span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector <span class="mi">0</span> B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ~~ v</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk293" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk293">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">mk1</span> : Vector n B -&gt; C) 
  (<span class="nv">v1</span> : Vector n A) (<span class="nv">m</span> : nat)
  (<span class="nv">mk2</span> : Vector m B -&gt; C),
mk1 ~!~ mk2 -&gt;
n = m -&gt;
<span class="kr">forall</span> <span class="nv">v2</span> : Vector m A,
v1 ~~ v2 -&gt;
map mk1 (traverse f v1) =
map mk2 (traverse f v2)</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>v1 ~~ v2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map mk1 (traverse f v1) = map mk2 (traverse f v2)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk294" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk294"><span class="nb">rewrite</span> (Vector_surjective_pairing2 (v := v2)) <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">mk1</span> : Vector n B -&gt; C) 
  (<span class="nv">v1</span> : Vector n A) (<span class="nv">m</span> : nat)
  (<span class="nv">mk2</span> : Vector m B -&gt; C),
mk1 ~!~ mk2 -&gt;
n = m -&gt;
<span class="kr">forall</span> <span class="nv">v2</span> : Vector m A,
v1 ~~ v2 -&gt;
map mk1 (traverse f v1) =
map mk2 (traverse f v2)</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>v1 ~~ vcons n (Vector_hd v2) (Vector_tl v2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map mk1 (traverse f v1) =
map mk2
  (traverse f (vcons n (Vector_hd v2) (Vector_tl v2)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk295" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk295"><span class="nb">rewrite</span> (Vector_surjective_pairing2 (v := v1)) <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">mk1</span> : Vector n B -&gt; C) 
  (<span class="nv">v1</span> : Vector n A) (<span class="nv">m</span> : nat)
  (<span class="nv">mk2</span> : Vector m B -&gt; C),
mk1 ~!~ mk2 -&gt;
n = m -&gt;
<span class="kr">forall</span> <span class="nv">v2</span> : Vector m A,
v1 ~~ v2 -&gt;
map mk1 (traverse f v1) =
map mk2 (traverse f v2)</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vcons n (Vector_hd v1) (Vector_tl v1) ~~
vcons n (Vector_hd v2) (Vector_tl v2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map mk1
  (traverse f (vcons n (Vector_hd v1) (Vector_tl v1))) =
map mk2
  (traverse f (vcons n (Vector_hd v2) (Vector_tl v2)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk296" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk296"><span class="nb">rewrite</span> traverse_Vector_vcons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">mk1</span> : Vector n B -&gt; C) 
  (<span class="nv">v1</span> : Vector n A) (<span class="nv">m</span> : nat)
  (<span class="nv">mk2</span> : Vector m B -&gt; C),
mk1 ~!~ mk2 -&gt;
n = m -&gt;
<span class="kr">forall</span> <span class="nv">v2</span> : Vector m A,
v1 ~~ v2 -&gt;
map mk1 (traverse f v1) =
map mk2 (traverse f v2)</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vcons n (Vector_hd v1) (Vector_tl v1) ~~
vcons n (Vector_hd v2) (Vector_tl v2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map mk1
  (pure (vcons n) &lt;‚ãÜ&gt; f (Vector_hd v1) &lt;‚ãÜ&gt;
   traverse f (Vector_tl v1)) =
map mk2
  (traverse f (vcons n (Vector_hd v2) (Vector_tl v2)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk297" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk297"><span class="nb">rewrite</span> traverse_Vector_vcons.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">mk1</span> : Vector n B -&gt; C) 
  (<span class="nv">v1</span> : Vector n A) (<span class="nv">m</span> : nat)
  (<span class="nv">mk2</span> : Vector m B -&gt; C),
mk1 ~!~ mk2 -&gt;
n = m -&gt;
<span class="kr">forall</span> <span class="nv">v2</span> : Vector m A,
v1 ~~ v2 -&gt;
map mk1 (traverse f v1) =
map mk2 (traverse f v2)</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vcons n (Vector_hd v1) (Vector_tl v1) ~~
vcons n (Vector_hd v2) (Vector_tl v2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map mk1
  (pure (vcons n) &lt;‚ãÜ&gt; f (Vector_hd v1) &lt;‚ãÜ&gt;
   traverse f (Vector_tl v1)) =
map mk2
  (pure (vcons n) &lt;‚ãÜ&gt; f (Vector_hd v2) &lt;‚ãÜ&gt;
   traverse f (Vector_tl v2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk298" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk298"><span class="nb">inversion</span> H2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">mk1</span> : Vector n B -&gt; C) 
  (<span class="nv">v1</span> : Vector n A) (<span class="nv">m</span> : nat)
  (<span class="nv">mk2</span> : Vector m B -&gt; C),
mk1 ~!~ mk2 -&gt;
n = m -&gt;
<span class="kr">forall</span> <span class="nv">v2</span> : Vector m A,
v1 ~~ v2 -&gt;
map mk1 (traverse f v1) =
map mk2 (traverse f v2)</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vcons n (Vector_hd v1) (Vector_tl v1) ~~
vcons n (Vector_hd v2) (Vector_tl v2)</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>proj1_sig (vcons n (Vector_hd v1) (Vector_tl v1)) =
proj1_sig (vcons n (Vector_hd v2) (Vector_tl v2))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map mk1
  (pure (vcons n) &lt;‚ãÜ&gt; f (Vector_hd v1) &lt;‚ãÜ&gt;
   traverse f (Vector_tl v1)) =
map mk2
  (pure (vcons n) &lt;‚ãÜ&gt; f (Vector_hd v2) &lt;‚ãÜ&gt;
   traverse f (Vector_tl v2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk299" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk299"><span class="kp">do</span> <span class="mi">2</span> <span class="nb">rewrite</span> proj_vcons <span class="kr">in</span> H4.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">mk1</span> : Vector n B -&gt; C) 
  (<span class="nv">v1</span> : Vector n A) (<span class="nv">m</span> : nat)
  (<span class="nv">mk2</span> : Vector m B -&gt; C),
mk1 ~!~ mk2 -&gt;
n = m -&gt;
<span class="kr">forall</span> <span class="nv">v2</span> : Vector m A,
v1 ~~ v2 -&gt;
map mk1 (traverse f v1) =
map mk2 (traverse f v2)</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vcons n (Vector_hd v1) (Vector_tl v1) ~~
vcons n (Vector_hd v2) (Vector_tl v2)</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 :: proj1_sig (Vector_tl v1) =
Vector_hd v2 :: proj1_sig (Vector_tl v2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map mk1
  (pure (vcons n) &lt;‚ãÜ&gt; f (Vector_hd v1) &lt;‚ãÜ&gt;
   traverse f (Vector_tl v1)) =
map mk2
  (pure (vcons n) &lt;‚ãÜ&gt; f (Vector_hd v2) &lt;‚ãÜ&gt;
   traverse f (Vector_tl v2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk29a" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk29a"><span class="nb">inversion</span> H4.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">mk1</span> : Vector n B -&gt; C) 
  (<span class="nv">v1</span> : Vector n A) (<span class="nv">m</span> : nat)
  (<span class="nv">mk2</span> : Vector m B -&gt; C),
mk1 ~!~ mk2 -&gt;
n = m -&gt;
<span class="kr">forall</span> <span class="nv">v2</span> : Vector m A,
v1 ~~ v2 -&gt;
map mk1 (traverse f v1) =
map mk2 (traverse f v2)</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vcons n (Vector_hd v1) (Vector_tl v1) ~~
vcons n (Vector_hd v2) (Vector_tl v2)</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 :: proj1_sig (Vector_tl v1) =
Vector_hd v2 :: proj1_sig (Vector_tl v2)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 = Vector_hd v2</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>proj1_sig (Vector_tl v1) =
proj1_sig (Vector_tl v2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map mk1
  (pure (vcons n) &lt;‚ãÜ&gt; f (Vector_hd v1) &lt;‚ãÜ&gt;
   traverse f (Vector_tl v1)) =
map mk2
  (pure (vcons n) &lt;‚ãÜ&gt; f (Vector_hd v1) &lt;‚ãÜ&gt;
   traverse f (Vector_tl v2))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk29b" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk29b">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">mk1</span> : Vector n B -&gt; C) 
  (<span class="nv">v1</span> : Vector n A) (<span class="nv">m</span> : nat)
  (<span class="nv">mk2</span> : Vector m B -&gt; C),
mk1 ~!~ mk2 -&gt;
n = m -&gt;
<span class="kr">forall</span> <span class="nv">v2</span> : Vector m A,
v1 ~~ v2 -&gt;
map mk1 (traverse f v1) =
map mk2 (traverse f v2)</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vcons n (Vector_hd v1) (Vector_tl v1) ~~
vcons n (Vector_hd v2) (Vector_tl v2)</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 :: proj1_sig (Vector_tl v1) =
Vector_hd v2 :: proj1_sig (Vector_tl v2)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 = Vector_hd v2</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>proj1_sig (Vector_tl v1) =
proj1_sig (Vector_tl v2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mk1 = mk2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk29c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">mk1</span> : Vector n B -&gt; C) 
  (<span class="nv">v1</span> : Vector n A) (<span class="nv">m</span> : nat)
  (<span class="nv">mk2</span> : Vector m B -&gt; C),
mk1 ~!~ mk2 -&gt;
n = m -&gt;
<span class="kr">forall</span> <span class="nv">v2</span> : Vector m A,
v1 ~~ v2 -&gt;
map mk1 (traverse f v1) =
map mk2 (traverse f v2)</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vcons n (Vector_hd v1) (Vector_tl v1) ~~
vcons n (Vector_hd v2) (Vector_tl v2)</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 :: proj1_sig (Vector_tl v1) =
Vector_hd v2 :: proj1_sig (Vector_tl v2)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 = Vector_hd v2</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>proj1_sig (Vector_tl v1) =
proj1_sig (Vector_tl v2)</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk29c"><hr></label><div class="goal-conclusion">pure (vcons n) &lt;‚ãÜ&gt; f (Vector_hd v1) &lt;‚ãÜ&gt;
traverse f (Vector_tl v1) =
pure (vcons n) &lt;‚ãÜ&gt; f (Vector_hd v1) &lt;‚ãÜ&gt;
traverse f (Vector_tl v2)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk29d" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk29d">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">mk1</span> : Vector n B -&gt; C) 
  (<span class="nv">v1</span> : Vector n A) (<span class="nv">m</span> : nat)
  (<span class="nv">mk2</span> : Vector m B -&gt; C),
mk1 ~!~ mk2 -&gt;
n = m -&gt;
<span class="kr">forall</span> <span class="nv">v2</span> : Vector m A,
v1 ~~ v2 -&gt;
map mk1 (traverse f v1) =
map mk2 (traverse f v2)</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vcons n (Vector_hd v1) (Vector_tl v1) ~~
vcons n (Vector_hd v2) (Vector_tl v2)</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 :: proj1_sig (Vector_tl v1) =
Vector_hd v2 :: proj1_sig (Vector_tl v2)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 = Vector_hd v2</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>proj1_sig (Vector_tl v1) =
proj1_sig (Vector_tl v2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mk1 = mk2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk29e" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk29e">ext v.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">mk1</span> : Vector n B -&gt; C) 
  (<span class="nv">v1</span> : Vector n A) (<span class="nv">m</span> : nat)
  (<span class="nv">mk2</span> : Vector m B -&gt; C),
mk1 ~!~ mk2 -&gt;
n = m -&gt;
<span class="kr">forall</span> <span class="nv">v2</span> : Vector m A,
v1 ~~ v2 -&gt;
map mk1 (traverse f v1) =
map mk2 (traverse f v2)</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vcons n (Vector_hd v1) (Vector_tl v1) ~~
vcons n (Vector_hd v2) (Vector_tl v2)</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 :: proj1_sig (Vector_tl v1) =
Vector_hd v2 :: proj1_sig (Vector_tl v2)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 = Vector_hd v2</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>proj1_sig (Vector_tl v1) =
proj1_sig (Vector_tl v2)</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (S n) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mk1 v = mk2 v</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk29f" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk29f"><span class="nb">apply</span> Vector_fun_sim_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">mk1</span> : Vector n B -&gt; C) 
  (<span class="nv">v1</span> : Vector n A) (<span class="nv">m</span> : nat)
  (<span class="nv">mk2</span> : Vector m B -&gt; C),
mk1 ~!~ mk2 -&gt;
n = m -&gt;
<span class="kr">forall</span> <span class="nv">v2</span> : Vector m A,
v1 ~~ v2 -&gt;
map mk1 (traverse f v1) =
map mk2 (traverse f v2)</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vcons n (Vector_hd v1) (Vector_tl v1) ~~
vcons n (Vector_hd v2) (Vector_tl v2)</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 :: proj1_sig (Vector_tl v1) =
Vector_hd v2 :: proj1_sig (Vector_tl v2)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 = Vector_hd v2</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>proj1_sig (Vector_tl v1) =
proj1_sig (Vector_tl v2)</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (S n) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">mk1 ~!~ mk2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk2a0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">mk1</span> : Vector n B -&gt; C) 
  (<span class="nv">v1</span> : Vector n A) (<span class="nv">m</span> : nat)
  (<span class="nv">mk2</span> : Vector m B -&gt; C),
mk1 ~!~ mk2 -&gt;
n = m -&gt;
<span class="kr">forall</span> <span class="nv">v2</span> : Vector m A,
v1 ~~ v2 -&gt;
map mk1 (traverse f v1) =
map mk2 (traverse f v2)</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vcons n (Vector_hd v1) (Vector_tl v1) ~~
vcons n (Vector_hd v2) (Vector_tl v2)</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 :: proj1_sig (Vector_tl v1) =
Vector_hd v2 :: proj1_sig (Vector_tl v2)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 = Vector_hd v2</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>proj1_sig (Vector_tl v1) =
proj1_sig (Vector_tl v2)</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (S n) B</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk2a0"><hr></label><div class="goal-conclusion">v ~~ v</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2a1" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2a1"><span class="bp">assumption</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">mk1</span> : Vector n B -&gt; C) 
  (<span class="nv">v1</span> : Vector n A) (<span class="nv">m</span> : nat)
  (<span class="nv">mk2</span> : Vector m B -&gt; C),
mk1 ~!~ mk2 -&gt;
n = m -&gt;
<span class="kr">forall</span> <span class="nv">v2</span> : Vector m A,
v1 ~~ v2 -&gt;
map mk1 (traverse f v1) =
map mk2 (traverse f v2)</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vcons n (Vector_hd v1) (Vector_tl v1) ~~
vcons n (Vector_hd v2) (Vector_tl v2)</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 :: proj1_sig (Vector_tl v1) =
Vector_hd v2 :: proj1_sig (Vector_tl v2)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 = Vector_hd v2</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>proj1_sig (Vector_tl v1) =
proj1_sig (Vector_tl v2)</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (S n) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ~~ v</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2a2" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2a2">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">mk1</span> : Vector n B -&gt; C) 
  (<span class="nv">v1</span> : Vector n A) (<span class="nv">m</span> : nat)
  (<span class="nv">mk2</span> : Vector m B -&gt; C),
mk1 ~!~ mk2 -&gt;
n = m -&gt;
<span class="kr">forall</span> <span class="nv">v2</span> : Vector m A,
v1 ~~ v2 -&gt;
map mk1 (traverse f v1) =
map mk2 (traverse f v2)</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vcons n (Vector_hd v1) (Vector_tl v1) ~~
vcons n (Vector_hd v2) (Vector_tl v2)</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 :: proj1_sig (Vector_tl v1) =
Vector_hd v2 :: proj1_sig (Vector_tl v2)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 = Vector_hd v2</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>proj1_sig (Vector_tl v1) =
proj1_sig (Vector_tl v2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">pure (vcons n) &lt;‚ãÜ&gt; f (Vector_hd v1) &lt;‚ãÜ&gt;
traverse f (Vector_tl v1) =
pure (vcons n) &lt;‚ãÜ&gt; f (Vector_hd v1) &lt;‚ãÜ&gt;
traverse f (Vector_tl v2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2a3" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2a3">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">mk1</span> : Vector n B -&gt; C) 
  (<span class="nv">v1</span> : Vector n A) (<span class="nv">m</span> : nat)
  (<span class="nv">mk2</span> : Vector m B -&gt; C),
mk1 ~!~ mk2 -&gt;
n = m -&gt;
<span class="kr">forall</span> <span class="nv">v2</span> : Vector m A,
v1 ~~ v2 -&gt;
map mk1 (traverse f v1) =
map mk2 (traverse f v2)</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vcons n (Vector_hd v1) (Vector_tl v1) ~~
vcons n (Vector_hd v2) (Vector_tl v2)</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 :: proj1_sig (Vector_tl v1) =
Vector_hd v2 :: proj1_sig (Vector_tl v2)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 = Vector_hd v2</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>proj1_sig (Vector_tl v1) =
proj1_sig (Vector_tl v2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">traverse f (Vector_tl v1) = traverse f (Vector_tl v2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2a4" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2a4">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">mk1</span> : Vector n B -&gt; C) 
  (<span class="nv">v1</span> : Vector n A) (<span class="nv">m</span> : nat)
  (<span class="nv">mk2</span> : Vector m B -&gt; C),
mk1 ~!~ mk2 -&gt;
n = m -&gt;
<span class="kr">forall</span> <span class="nv">v2</span> : Vector m A,
v1 ~~ v2 -&gt;
map mk1 (traverse f v1) =
map mk2 (traverse f v2)</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vcons n (Vector_hd v1) (Vector_tl v1) ~~
vcons n (Vector_hd v2) (Vector_tl v2)</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 :: proj1_sig (Vector_tl v1) =
Vector_hd v2 :: proj1_sig (Vector_tl v2)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 = Vector_hd v2</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>proj1_sig (Vector_tl v1) =
proj1_sig (Vector_tl v2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Vector_tl v1 = Vector_tl v2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2a5" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2a5"><span class="nb">apply</span> Vector_sim_eq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>mk1</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; G B</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">mk1</span> : Vector n B -&gt; C) 
  (<span class="nv">v1</span> : Vector n A) (<span class="nv">m</span> : nat)
  (<span class="nv">mk2</span> : Vector m B -&gt; C),
mk1 ~!~ mk2 -&gt;
n = m -&gt;
<span class="kr">forall</span> <span class="nv">v2</span> : Vector m A,
v1 ~~ v2 -&gt;
map mk1 (traverse f v1) =
map mk2 (traverse f v2)</span></span></span><br><span><var>mk2</var><span class="hyp-type"><b>: </b><span>Vector (S n) B -&gt; C</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>mk1 ~!~ mk2</span></span></span><br><span><var>v2</var><span class="hyp-type"><b>: </b><span>Vector (S n) A</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>vcons n (Vector_hd v1) (Vector_tl v1) ~~
vcons n (Vector_hd v2) (Vector_tl v2)</span></span></span><br><span><var>H4</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 :: proj1_sig (Vector_tl v1) =
Vector_hd v2 :: proj1_sig (Vector_tl v2)</span></span></span><br><span><var>H5</var><span class="hyp-type"><b>: </b><span>Vector_hd v1 = Vector_hd v2</span></span></span><br><span><var>H6</var><span class="hyp-type"><b>: </b><span>proj1_sig (Vector_tl v1) =
proj1_sig (Vector_tl v2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Vector_tl v1 ~~ Vector_tl v2</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> H6.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2a6" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2a6"><span class="kn">Definition</span> <span class="nf">traverse_same_shape_zip</span>
    `{Applicative G}
    (A B C: <span class="kt">Type</span>) (t: T A) (u: T B)
    (f: A * B -&gt; G C)
    (Hshape: shape t = shape u)
    :
    traverse (T := T) f (same_shape_zip t u Hshape) =
      map (F := G) (trav_make t)
        (forwards (traverse (T := Vector (plength t)) (mkBackwards ‚àò f) (same_shape_zip_contents t u Hshape))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; G C</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">traverse f (same_shape_zip t u Hshape) =
map (trav_make t)
  (forwards
     (traverse (mkBackwards ‚àò f)
        (same_shape_zip_contents t u Hshape)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2a7" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2a7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; G C</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">traverse f (same_shape_zip t u Hshape) =
map (trav_make t)
  (forwards
     (traverse (mkBackwards ‚àò f)
        (same_shape_zip_contents t u Hshape)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2a8" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2a8"><span class="nb">assert</span> (trav_make (B := C) (same_shape_zip t u Hshape) ~!~ trav_make t).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; G C</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make (same_shape_zip t u Hshape) ~!~ trav_make t</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk2a9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; G C</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>trav_make (same_shape_zip t u Hshape) ~!~
trav_make t</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk2a9"><hr></label><div class="goal-conclusion">traverse f (same_shape_zip t u Hshape) =
map (trav_make t)
  (forwards
     (traverse (mkBackwards ‚àò f)
        (same_shape_zip_contents t u Hshape)))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2aa" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2aa">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; G C</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make (same_shape_zip t u Hshape) ~!~ trav_make t</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2ab" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2ab"><span class="nb">apply</span> trav_same_shape.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; G C</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape (same_shape_zip t u Hshape) = shape t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> same_shape_zip_same_shape.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2ac" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2ac">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; G C</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>trav_make (same_shape_zip t u Hshape) ~!~
trav_make t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">traverse f (same_shape_zip t u Hshape) =
map (trav_make t)
  (forwards
     (traverse (mkBackwards ‚àò f)
        (same_shape_zip_contents t u Hshape)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2ad" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2ad"><span class="nb">rewrite</span> traverse_repr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; G C</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>trav_make (same_shape_zip t u Hshape) ~!~
trav_make t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (trav_make (same_shape_zip t u Hshape))
  (forwards
     (traverse (mkBackwards ‚àò f)
        (trav_contents (same_shape_zip t u Hshape)))) =
map (trav_make t)
  (forwards
     (traverse (mkBackwards ‚àò f)
        (same_shape_zip_contents t u Hshape)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2ae" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2ae"><span class="nb">assert</span> (trav_contents (same_shape_zip t u Hshape) ~~
              (same_shape_zip_contents t u Hshape)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; G C</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>trav_make (same_shape_zip t u Hshape) ~!~
trav_make t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_contents (same_shape_zip t u Hshape) ~~
same_shape_zip_contents t u Hshape</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk2af" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; G C</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>trav_make (same_shape_zip t u Hshape) ~!~
trav_make t</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>trav_contents (same_shape_zip t u Hshape) ~~
same_shape_zip_contents t u Hshape</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk2af"><hr></label><div class="goal-conclusion">map (trav_make (same_shape_zip t u Hshape))
  (forwards
     (traverse (mkBackwards ‚àò f)
        (trav_contents (same_shape_zip t u Hshape)))) =
map (trav_make t)
  (forwards
     (traverse (mkBackwards ‚àò f)
        (same_shape_zip_contents t u Hshape)))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2b0" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2b0">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; G C</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>trav_make (same_shape_zip t u Hshape) ~!~
trav_make t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_contents (same_shape_zip t u Hshape) ~~
same_shape_zip_contents t u Hshape</div></blockquote></div></div></small><span class="alectryon-wsp">  </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2b1" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2b1"><span class="nb">unfold</span> same_shape_zip.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; G C</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>trav_make (same_shape_zip t u Hshape) ~!~
trav_make t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_contents
  (trav_make t (same_shape_zip_contents t u Hshape)) ~~
same_shape_zip_contents t u Hshape</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">       </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2b2" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2b2"><span class="nb">unfold</span> Vector_sim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; G C</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>trav_make (same_shape_zip t u Hshape) ~!~
trav_make t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig
  (trav_contents
     (trav_make t (same_shape_zip_contents t u Hshape))) =
proj1_sig (same_shape_zip_contents t u Hshape)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">       </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2b3" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2b3"><span class="nb">rewrite</span> trav_contents_make.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; G C</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>trav_make (same_shape_zip t u Hshape) ~!~
trav_make t</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig (same_shape_zip_contents t u Hshape) =
proj1_sig (same_shape_zip_contents t u Hshape)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">       </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2b4" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2b4">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; G C</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>trav_make (same_shape_zip t u Hshape) ~!~
trav_make t</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>trav_contents (same_shape_zip t u Hshape) ~~
same_shape_zip_contents t u Hshape</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (trav_make (same_shape_zip t u Hshape))
  (forwards
     (traverse (mkBackwards ‚àò f)
        (trav_contents (same_shape_zip t u Hshape)))) =
map (trav_make t)
  (forwards
     (traverse (mkBackwards ‚àò f)
        (same_shape_zip_contents t u Hshape)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2b5" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2b5">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; G C</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>trav_make (same_shape_zip t u Hshape) ~!~
trav_make t</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>trav_contents (same_shape_zip t u Hshape) ~~
same_shape_zip_contents t u Hshape</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (trav_make (same_shape_zip t u Hshape))
  (forwards
     (traverse (mkBackwards ‚àò f)
        (trav_contents (same_shape_zip t u Hshape)))) =
map (trav_make t)
  (forwards
     (traverse (mkBackwards ‚àò f)
        (same_shape_zip_contents t u Hshape)))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2b6" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2b6">compose near (traverse (mkBackwards ‚àò f) (trav_contents (same_shape_zip t u Hshape))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; G C</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>trav_make (same_shape_zip t u Hshape) ~!~
trav_make t</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>trav_contents (same_shape_zip t u Hshape) ~~
same_shape_zip_contents t u Hshape</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(map (trav_make (same_shape_zip t u Hshape))
 ‚àò forwards)
  (traverse (mkBackwards ‚àò f)
     (trav_contents (same_shape_zip t u Hshape))) =
map (trav_make t)
  (forwards
     (traverse (mkBackwards ‚àò f)
        (same_shape_zip_contents t u Hshape)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2b7" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2b7">compose near (traverse (mkBackwards ‚àò f) (same_shape_zip_contents t u Hshape)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; G C</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>trav_make (same_shape_zip t u Hshape) ~!~
trav_make t</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>trav_contents (same_shape_zip t u Hshape) ~~
same_shape_zip_contents t u Hshape</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(map (trav_make (same_shape_zip t u Hshape))
 ‚àò forwards)
  (traverse (mkBackwards ‚àò f)
     (trav_contents (same_shape_zip t u Hshape))) =
(map (trav_make t) ‚àò forwards)
  (traverse (mkBackwards ‚àò f)
     (same_shape_zip_contents t u Hshape))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2b8" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2b8"><span class="nb">rewrite</span> natural.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; G C</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>trav_make (same_shape_zip t u Hshape) ~!~
trav_make t</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>trav_contents (same_shape_zip t u Hshape) ~~
same_shape_zip_contents t u Hshape</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(forwards
 ‚àò map (trav_make (same_shape_zip t u Hshape)))
  (traverse (mkBackwards ‚àò f)
     (trav_contents (same_shape_zip t u Hshape))) =
(map (trav_make t) ‚àò forwards)
  (traverse (mkBackwards ‚àò f)
     (same_shape_zip_contents t u Hshape))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2b9" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2b9"><span class="nb">rewrite</span> natural.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; G C</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>trav_make (same_shape_zip t u Hshape) ~!~
trav_make t</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>trav_contents (same_shape_zip t u Hshape) ~~
same_shape_zip_contents t u Hshape</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(forwards
 ‚àò map (trav_make (same_shape_zip t u Hshape)))
  (traverse (mkBackwards ‚àò f)
     (trav_contents (same_shape_zip t u Hshape))) =
(forwards ‚àò map (trav_make t))
  (traverse (mkBackwards ‚àò f)
     (same_shape_zip_contents t u Hshape))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2ba" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2ba"><span class="nb">unfold</span> compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; G C</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>trav_make (same_shape_zip t u Hshape) ~!~
trav_make t</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>trav_contents (same_shape_zip t u Hshape) ~~
same_shape_zip_contents t u Hshape</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">forwards
  (map (trav_make (same_shape_zip t u Hshape))
     (traverse (mkBackwards ‚óã f)
        (trav_contents (same_shape_zip t u Hshape)))) =
forwards
  (map (trav_make t)
     (traverse (mkBackwards ‚óã f)
        (same_shape_zip_contents t u Hshape)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2bb" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2bb">fequal.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; G C</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>trav_make (same_shape_zip t u Hshape) ~!~
trav_make t</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>trav_contents (same_shape_zip t u Hshape) ~~
same_shape_zip_contents t u Hshape</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (trav_make (same_shape_zip t u Hshape))
  (traverse (mkBackwards ‚óã f)
     (trav_contents (same_shape_zip t u Hshape))) =
map (trav_make t)
  (traverse (mkBackwards ‚óã f)
     (same_shape_zip_contents t u Hshape))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2bc" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2bc"><span class="nb">apply</span> map_sim_fns; <span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>G</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Map_G</var><span class="hyp-type"><b>: </b><span>Map G</span></span></span><br><span><var>Pure_G</var><span class="hyp-type"><b>: </b><span>Pure G</span></span></span><br><span><var>Mult_G</var><span class="hyp-type"><b>: </b><span>Mult G</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Applicative G</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; G C</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>trav_make (same_shape_zip t u Hshape) ~!~
trav_make t</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>trav_contents (same_shape_zip t u Hshape) ~~
same_shape_zip_contents t u Hshape</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Applicative (Backwards G)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">typeclasses eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input">}</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2bd" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2bd"><span class="kn">Instance</span> <span class="nf">ApplicativeMorphism_const_op</span> `{op: Monoid_op M} `{unit: Monoid_unit M} `{! Monoid M}:
    @ApplicativeMorphism (@const <span class="kt">Type</span> <span class="kt">Type</span> M) (Backwards (@const <span class="kt">Type</span> <span class="kt">Type</span> M))
      (@Map_const M) (@Mult_const M (@Monoid_op_Opposite M op)) (@Pure_const M unit)
      (@Map_Backwards (const M) _) (@Mult_Backwards (const M) (@Map_const M) (@Mult_const M op))
      (@Pure_Backwards (const M) (@Pure_const M unit)) (@mkBackwards (const M)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>Monoid0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ApplicativeMorphism (const M) (Backwards (const M))
  (@mkBackwards (const M))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2be" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2be"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>Monoid0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ApplicativeMorphism (const M) (Backwards (const M))
  (@mkBackwards (const M))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2bf" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2bf"><span class="nb">constructor</span>; <span class="kp">try</span> <span class="nb">typeclasses eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>Monoid0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B) (<span class="nv">x</span> : const M A),
{| forwards := map f x |} = map f {| forwards := x |}</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk2c0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>Monoid0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk2c0"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">a</span> : A),
{| forwards := pure a |} = pure a</div></blockquote><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk2c1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>Monoid0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk2c1"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">x</span> : const M A) (<span class="nv">y</span> : const M B),
{| forwards := x ‚äó y |} =
{| forwards := x |} ‚äó {| forwards := y |}</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2c2" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2c2">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>Monoid0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B) (<span class="nv">x</span> : const M A),
{| forwards := map f x |} = map f {| forwards := x |}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2c3" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2c3">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>Monoid0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">a</span> : A),
{| forwards := pure a |} = pure a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2c4" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2c4">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>Monoid0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">x</span> : const M A) (<span class="nv">y</span> : const M B),
{| forwards := x ‚äó y |} =
{| forwards := x |} ‚äó {| forwards := y |}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2c5" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2c5"><span class="kn">Instance</span> <span class="nf">ApplicativeMorphism_const_op_inv</span> `{op: Monoid_op M} `{unit: Monoid_unit M} `{! Monoid M}:
    @ApplicativeMorphism (Backwards (@const <span class="kt">Type</span> <span class="kt">Type</span> M))(@const <span class="kt">Type</span> <span class="kt">Type</span> M)
      (@Map_Backwards (const M) _) (@Mult_Backwards (const M) (@Map_const M) (@Mult_const M op))
      (@Pure_Backwards (const M) (@Pure_const M unit))
      (@Map_const M) (@Mult_const M (@Monoid_op_Opposite M op)) (@Pure_const M unit)
      (@forwards (const M)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>Monoid0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ApplicativeMorphism (Backwards (const M)) (const M)
  (@forwards (const M))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2c6" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2c6"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>Monoid0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ApplicativeMorphism (Backwards (const M)) (const M)
  (@forwards (const M))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2c7" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2c7"><span class="nb">constructor</span>; <span class="kp">try</span> <span class="nb">typeclasses eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>Monoid0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B)
  (<span class="nv">x</span> : Backwards (const M) A),
forwards (map f x) = map f (forwards x)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk2c8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>Monoid0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk2c8"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">a</span> : A), forwards (pure a) = pure a</div></blockquote><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk2c9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>Monoid0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk2c9"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">x</span> : Backwards (const M) A)
  (<span class="nv">y</span> : Backwards (const M) B),
forwards (x ‚äó y) = forwards x ‚äó forwards y</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2ca" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2ca">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>Monoid0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B)
  (<span class="nv">x</span> : Backwards (const M) A),
forwards (map f x) = map f (forwards x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2cb" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2cb">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>Monoid0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">a</span> : A), forwards (pure a) = pure a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2cc" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2cc">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>Monoid0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">x</span> : Backwards (const M) A)
  (<span class="nv">y</span> : Backwards (const M) B),
forwards (x ‚äó y) = forwards x ‚äó forwards y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2cd" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2cd"><span class="kn">Definition</span> <span class="nf">foldmap_same_shape_zip</span>
    `{Monoid M}
    (A B C: <span class="kt">Type</span>) (t: T A) (u: T B)
    (f: A * B -&gt; M)
    (Hshape: shape t = shape u)
    :
    foldMap f (same_shape_zip t u Hshape) =
      foldMap (op := Monoid_op_Opposite op) f (same_shape_zip_contents t u Hshape).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldMap f (same_shape_zip t u Hshape) =
foldMap f (same_shape_zip_contents t u Hshape)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2ce" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2ce"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldMap f (same_shape_zip t u Hshape) =
foldMap f (same_shape_zip_contents t u Hshape)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2cf" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2cf"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldMap f (same_shape_zip t u Hshape) =
foldMap f (same_shape_zip_contents t u Hshape)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2d0" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2d0"><span class="nb">rewrite</span> foldMap_to_traverse1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">traverse f (same_shape_zip t u Hshape) =
foldMap f (same_shape_zip_contents t u Hshape)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2d1" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2d1"><span class="nb">rewrite</span> traverse_same_shape_zip.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (trav_make t)
  (forwards
     (traverse (mkBackwards ‚àò f)
        (same_shape_zip_contents t u Hshape))) =
foldMap f (same_shape_zip_contents t u Hshape)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2d2" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2d2"><span class="nb">rewrite</span> foldMap_to_traverse1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">map (trav_make t)
  (forwards
     (traverse (mkBackwards ‚àò f)
        (same_shape_zip_contents t u Hshape))) =
traverse f (same_shape_zip_contents t u Hshape)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2d3" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2d3">unfold_ops @Map_const.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">forwards
  (traverse (mkBackwards ‚àò f)
     (same_shape_zip_contents t u Hshape)) =
traverse f (same_shape_zip_contents t u Hshape)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2d4" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2d4">compose near (same_shape_zip_contents t u Hshape) on <span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(forwards ‚àò traverse (mkBackwards ‚àò f))
  (same_shape_zip_contents t u Hshape) =
traverse f (same_shape_zip_contents t u Hshape)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2d5" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2d5"><span class="nb">change</span> ((<span class="kr">fun</span> (<span class="nv">X</span> <span class="nv">Y</span> : <span class="kt">Type</span>) (<span class="nv">_</span> : X -&gt; Y) (<span class="nv">t0</span> : @const <span class="kt">Type</span> <span class="kt">Type</span> M X) =&gt; t0))
             <span class="kr">with</span> (@Map_const M).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(forwards ‚àò traverse (mkBackwards ‚àò f))
  (same_shape_zip_contents t u Hshape) =
traverse f (same_shape_zip_contents t u Hshape)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2d6" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2d6"><span class="nb">rewrite</span> (trf_traverse_morphism (T := Vector (@plength T Traverse_T A t))
               (morphism := ApplicativeMorphism_const_op_inv (M := M))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToSubset_inst</var><span class="hyp-type"><b>: </b><span>ToSubset T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToSubset_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToSubset_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br><span><var>Hshape</var><span class="hyp-type"><b>: </b><span>shape t = shape u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">traverse (forwards ‚àò (mkBackwards ‚àò f))
  (same_shape_zip_contents t u Hshape) =
traverse f (same_shape_zip_contents t u Hshape)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="c">(*</span>
<span class="c">  Lemma traverse_const_opposite `{Monoid M} {A B: Type} (f: A -&gt; M):</span>
<span class="c">    traverse (T := T) (G := const M)</span>
<span class="c">      (@Mult_const M (@Monoid_op_Opposite M op))</span>

<span class="c">    Search traverse same_shape_zip_contents.</span>
<span class="c">    rewrite t</span>
<span class="c">              .</span>
<span class="c">    unfold foldMap.</span>
<span class="c">    rewrite traverse_same_shape_zip.</span>
<span class="c">    rewrite &lt;- traverse_repr.</span>
<span class="c">    rewrite traverse_same_shape_zip.</span>

<span class="c">    reflexivity.</span>
<span class="c">  Qed.</span>

<span class="c">   *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">traversable_functors_zipping</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">

<span class="sd">(** ** Folding over a Vector of pairs *)</span>
<span class="sd">(**********************************************************************)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">fold_over_vector_pairs</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">A0</span> <span class="nv">B0</span>: <span class="kt">Type</span>} `{Monoid M} `(f: A * B -&gt; M).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2d7" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2d7"><span class="kn">Lemma</span> <span class="nf">foldMap_vector_pair_natural</span>:
    <span class="kr">forall</span> (<span class="nv">fl</span>: A0 -&gt; A) (<span class="nv">fr</span>: B0 -&gt; B),
    <span class="kr">forall</span> (<span class="nv">n</span>: nat) (<span class="nv">v</span>: Vector n (A0 * B0)),
      foldMap (T := Vector n) f (map (F := Vector n) (map_tensor fl fr) v) =
        foldMap (T := Vector n) (f ‚àò map_tensor fl fr) v.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A0, B0, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">fl</span> : A0 -&gt; A) (<span class="nv">fr</span> : B0 -&gt; B) (<span class="nv">n</span> : nat)
  (<span class="nv">v</span> : Vector n (A0 * B0)),
foldMap f (map (map_tensor fl fr) v) =
foldMap (f ‚àò map_tensor fl fr) v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2d8" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2d8"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A0, B0, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">fl</span> : A0 -&gt; A) (<span class="nv">fr</span> : B0 -&gt; B) (<span class="nv">n</span> : nat)
  (<span class="nv">v</span> : Vector n (A0 * B0)),
foldMap f (map (map_tensor fl fr) v) =
foldMap (f ‚àò map_tensor fl fr) v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2d9" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2d9"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A0, B0, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br><span><var>fl</var><span class="hyp-type"><b>: </b><span>A0 -&gt; A</span></span></span><br><span><var>fr</var><span class="hyp-type"><b>: </b><span>B0 -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector n (A0 * B0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldMap f (map (map_tensor fl fr) v) =
foldMap (f ‚àò map_tensor fl fr) v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2da" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2da">compose near v on <span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A0, B0, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br><span><var>fl</var><span class="hyp-type"><b>: </b><span>A0 -&gt; A</span></span></span><br><span><var>fr</var><span class="hyp-type"><b>: </b><span>B0 -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector n (A0 * B0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(foldMap f ‚àò map (map_tensor fl fr)) v =
foldMap (f ‚àò map_tensor fl fr) v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2db" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2db"><span class="nb">rewrite</span> foldMap_map.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A0, B0, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br><span><var>fl</var><span class="hyp-type"><b>: </b><span>A0 -&gt; A</span></span></span><br><span><var>fr</var><span class="hyp-type"><b>: </b><span>B0 -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector n (A0 * B0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldMap (f ‚àò map_tensor fl fr) v =
foldMap (f ‚àò map_tensor fl fr) v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2dc" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2dc"><span class="kn">Lemma</span> <span class="nf">foldMap_vector_pair_natural_l</span>:
    <span class="kr">forall</span> (<span class="nv">fl</span>: A0 -&gt; A) (<span class="nv">n</span>: nat) (<span class="nv">v</span>: Vector n (A0 * B)),
      foldMap (T := Vector n) f (map (F := Vector n) (map_fst fl) v) =
        foldMap (T := Vector n) (f ‚àò map_fst fl) v.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A0, B0, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">fl</span> : A0 -&gt; A) (<span class="nv">n</span> : nat)
  (<span class="nv">v</span> : Vector n (A0 * B)),
foldMap f (map (map_fst fl) v) =
foldMap (f ‚àò map_fst fl) v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2dd" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2dd"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A0, B0, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">fl</span> : A0 -&gt; A) (<span class="nv">n</span> : nat)
  (<span class="nv">v</span> : Vector n (A0 * B)),
foldMap f (map (map_fst fl) v) =
foldMap (f ‚àò map_fst fl) v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2de" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2de"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A0, B0, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br><span><var>fl</var><span class="hyp-type"><b>: </b><span>A0 -&gt; A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector n (A0 * B)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldMap f (map (map_fst fl) v) =
foldMap (f ‚àò map_fst fl) v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2df" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2df">compose near v on <span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A0, B0, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br><span><var>fl</var><span class="hyp-type"><b>: </b><span>A0 -&gt; A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector n (A0 * B)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(foldMap f ‚àò map (map_fst fl)) v =
foldMap (f ‚àò map_fst fl) v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2e0" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2e0"><span class="nb">rewrite</span> foldMap_map.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A0, B0, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br><span><var>fl</var><span class="hyp-type"><b>: </b><span>A0 -&gt; A</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector n (A0 * B)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldMap (f ‚àò map_fst fl) v =
foldMap (f ‚àò map_fst fl) v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2e1" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2e1"><span class="kn">Lemma</span> <span class="nf">foldMap_vector_pair_natural_r</span>:
    <span class="kr">forall</span> (<span class="nv">fr</span>: B0 -&gt; B) (<span class="nv">n</span>: nat) (<span class="nv">v</span>: Vector n (A * B0)),
      foldMap (T := Vector n) f (map (F := Vector n) (map_snd fr) v) =
        foldMap (T := Vector n) (f ‚àò map_snd fr) v.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A0, B0, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">fr</span> : B0 -&gt; B) (<span class="nv">n</span> : nat)
  (<span class="nv">v</span> : Vector n (A * B0)),
foldMap f (map (map_snd fr) v) =
foldMap (f ‚àò map_snd fr) v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2e2" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2e2"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A0, B0, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">fr</span> : B0 -&gt; B) (<span class="nv">n</span> : nat)
  (<span class="nv">v</span> : Vector n (A * B0)),
foldMap f (map (map_snd fr) v) =
foldMap (f ‚àò map_snd fr) v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2e3" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2e3"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A0, B0, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br><span><var>fr</var><span class="hyp-type"><b>: </b><span>B0 -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector n (A * B0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldMap f (map (map_snd fr) v) =
foldMap (f ‚àò map_snd fr) v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2e4" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2e4">compose near v on <span class="nb">left</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A0, B0, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br><span><var>fr</var><span class="hyp-type"><b>: </b><span>B0 -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector n (A * B0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(foldMap f ‚àò map (map_snd fr)) v =
foldMap (f ‚àò map_snd fr) v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2e5" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2e5"><span class="nb">rewrite</span> foldMap_map.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, A0, B0, M</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>op</var><span class="hyp-type"><b>: </b><span>Monoid_op M</span></span></span><br><span><var>unit0</var><span class="hyp-type"><b>: </b><span>Monoid_unit M</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>Monoid M</span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A * B -&gt; M</span></span></span><br><span><var>fr</var><span class="hyp-type"><b>: </b><span>B0 -&gt; B</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector n (A * B0)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">foldMap (f ‚àò map_snd fr) v =
foldMap (f ‚àò map_snd fr) v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">fold_over_vector_pairs</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Uniqueness *)</span>
<span class="sd">(**********************************************************************)</span>

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">uniqueness_lemmas</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> {<span class="nv">A</span> <span class="nv">B</span>: <span class="kt">Type</span>}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span>
    `{Classes.Kleisli.TraversableFunctor.TraversableFunctor T}
    `{ToMap_inst: Map T}
    `{ToBatch_inst: ToBatch T}
    `{! Compat_Map_Traverse T}
    `{! Compat_ToBatch_Traverse T}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2e6" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2e6"><span class="kn">Lemma</span> <span class="nf">trav_contents_unique</span>:
    <span class="kr">forall</span> (<span class="nv">t</span>: T A) (<span class="nv">u</span>: T B) (<span class="nv">v</span>: Vector (plength t) B),
      trav_make t v = u -&gt; v ~~ trav_contents u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B) (<span class="nv">v</span> : Vector (plength t) B),
trav_make t v = u -&gt; v ~~ trav_contents u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2e7" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2e7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B) (<span class="nv">v</span> : Vector (plength t) B),
trav_make t v = u -&gt; v ~~ trav_contents u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2e8" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2e8">introv Hmake.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span>trav_make t v = u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ~~ trav_contents u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2e9" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2e9"><span class="nb">rewrite</span> &lt;- Hmake.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span>trav_make t v = u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ~~ trav_contents (trav_make t v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2ea" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2ea"><span class="nb">unfold</span> Vector_sim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span>trav_make t v = u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig v =
proj1_sig (trav_contents (trav_make t v))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2eb" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2eb"><span class="nb">rewrite</span> trav_contents_make.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span>trav_make t v = u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">proj1_sig v = proj1_sig v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2ec" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2ec"><span class="kn">Lemma</span> <span class="nf">trav_make_unique</span>:
    <span class="kr">forall</span> (<span class="nv">t</span>: T A) (<span class="nv">u</span>: T B) (<span class="nv">v</span>: Vector (plength t) B),
      trav_make t v = u -&gt;
      <span class="kr">forall</span> (<span class="nv">C</span>: <span class="kt">Type</span>), trav_make (B := C) t ~!~ trav_make u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B) (<span class="nv">v</span> : Vector (plength t) B),
trav_make t v = u -&gt;
<span class="kr">forall</span> <span class="nv">C</span> : <span class="kt">Type</span>, trav_make t ~!~ trav_make u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2ed" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2ed"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B) (<span class="nv">v</span> : Vector (plength t) B),
trav_make t v = u -&gt;
<span class="kr">forall</span> <span class="nv">C</span> : <span class="kt">Type</span>, trav_make t ~!~ trav_make u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2ee" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2ee">introv Hmake.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span>trav_make t v = u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">C</span> : <span class="kt">Type</span>, trav_make t ~!~ trav_make u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2ef" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2ef"><span class="nb">intro</span> C.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span>trav_make t v = u</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t ~!~ trav_make u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2f0" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2f0"><span class="nb">rewrite</span> &lt;- Hmake.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span>trav_make t v = u</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t ~!~ trav_make (trav_make t v)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2f1" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2f1"><span class="nb">rewrite</span> symmetric_Vector_fun_sim.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span>trav_make t v = u</span></span></span><br><span><var>C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make (trav_make t v) ~!~ trav_make t</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> trav_make_make.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2f2" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2f2"><span class="kn">Corollary</span> <span class="nf">trav_decomposition_unique</span>:
    <span class="kr">forall</span> (<span class="nv">t</span>: T A) (<span class="nv">u</span>: T B) (<span class="nv">v</span>: Vector (plength t) B),
      trav_make t v = u -&gt;
      (<span class="kr">forall</span> <span class="nv">C</span>, trav_make (B := C) t ~!~ trav_make u) /\
        v ~~ trav_contents u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B) (<span class="nv">v</span> : Vector (plength t) B),
trav_make t v = u -&gt;
(<span class="kr">forall</span> <span class="nv">C</span> : <span class="kt">Type</span>, trav_make t ~!~ trav_make u) /\
v ~~ trav_contents u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2f3" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2f3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B) (<span class="nv">v</span> : Vector (plength t) B),
trav_make t v = u -&gt;
(<span class="kr">forall</span> <span class="nv">C</span> : <span class="kt">Type</span>, trav_make t ~!~ trav_make u) /\
v ~~ trav_contents u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2f4" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2f4">introv Hmake; <span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span>trav_make t v = u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">C</span> : <span class="kt">Type</span>, trav_make t ~!~ trav_make u</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk2f5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span>trav_make t v = u</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk2f5"><hr></label><div class="goal-conclusion">v ~~ trav_contents u</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2f6" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2f6"><span class="nb">eauto using</span> trav_make_unique.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span>trav_make t v = u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v ~~ trav_contents u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">auto using</span> trav_contents_unique.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">

</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2f7" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2f7"><span class="kn">Corollary</span> <span class="nf">trav_decomposition_unique_iff</span>:
    <span class="kr">forall</span> (<span class="nv">t</span>: T A) (<span class="nv">u</span>: T B) (<span class="nv">v</span>: Vector (plength t) B),
      trav_make t v = u &lt;-&gt;
        (<span class="kr">forall</span> <span class="nv">C</span>, trav_make (B := C) t ~!~ trav_make u) /\
          v ~~ trav_contents u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B) (<span class="nv">v</span> : Vector (plength t) B),
trav_make t v = u &lt;-&gt;
(<span class="kr">forall</span> <span class="nv">C</span> : <span class="kt">Type</span>, trav_make t ~!~ trav_make u) /\
v ~~ trav_contents u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2f8" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2f8"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B) (<span class="nv">v</span> : Vector (plength t) B),
trav_make t v = u &lt;-&gt;
(<span class="kr">forall</span> <span class="nv">C</span> : <span class="kt">Type</span>, trav_make t ~!~ trav_make u) /\
v ~~ trav_contents u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2f9" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2f9"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t v = u &lt;-&gt;
(<span class="kr">forall</span> <span class="nv">C</span> : <span class="kt">Type</span>, trav_make t ~!~ trav_make u) /\
v ~~ trav_contents u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2fa" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2fa"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t v = u -&gt;
(<span class="kr">forall</span> <span class="nv">C</span> : <span class="kt">Type</span>, trav_make t ~!~ trav_make u) /\
v ~~ trav_contents u</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="traversablefunctor-v-chk2fb" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><label class="goal-separator" for="traversablefunctor-v-chk2fb"><hr></label><div class="goal-conclusion">(<span class="kr">forall</span> <span class="nv">C</span> : <span class="kt">Type</span>, trav_make t ~!~ trav_make u) /\
v ~~ trav_contents u -&gt; 
trav_make t v = u</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2fc" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2fc">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t v = u -&gt;
(<span class="kr">forall</span> <span class="nv">C</span> : <span class="kt">Type</span>, trav_make t ~!~ trav_make u) /\
v ~~ trav_contents u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> trav_decomposition_unique.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2fd" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2fd">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">forall</span> <span class="nv">C</span> : <span class="kt">Type</span>, trav_make t ~!~ trav_make u) /\
v ~~ trav_contents u -&gt; trav_make t v = u</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2fe" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2fe"><span class="nb">intros</span> [Hmake Hcontents].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">C</span> : <span class="kt">Type</span>, trav_make t ~!~ trav_make u</span></span></span><br><span><var>Hcontents</var><span class="hyp-type"><b>: </b><span>v ~~ trav_contents u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t v = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk2ff" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk2ff"><span class="nb">rewrite</span> &lt;- (trav_get_put (t := u)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">C</span> : <span class="kt">Type</span>, trav_make t ~!~ trav_make u</span></span></span><br><span><var>Hcontents</var><span class="hyp-type"><b>: </b><span>v ~~ trav_contents u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t v = trav_make u (trav_contents u)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> Vector_fun_sim_eq; <span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk300" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk300"><span class="kn">Corollary</span> <span class="nf">trav_decomposition_same_shape</span>:
    <span class="kr">forall</span> (<span class="nv">t</span>: T A) (<span class="nv">u</span>: T B) (<span class="nv">v</span>: Vector (plength t) B),
      trav_make t v = u -&gt;
      shape t = shape u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B) (<span class="nv">v</span> : Vector (plength t) B),
trav_make t v = u -&gt; shape t = shape u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk301" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk301"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B) (<span class="nv">v</span> : Vector (plength t) B),
trav_make t v = u -&gt; shape t = shape u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk302" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk302">introv Hmake.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span>trav_make t v = u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t = shape u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk303" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk303"><span class="nb">apply</span> trav_same_shape_rev.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span>trav_make t v = u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">B0</span> : <span class="kt">Type</span>, trav_make t ~!~ trav_make u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk304" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk304"><span class="nb">eapply</span> trav_make_unique.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span>trav_make t v = u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t <span class="nl">?v</span> = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">eassumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk305" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk305"><span class="kn">Corollary</span> <span class="nf">trav_decomposition_same_length</span>:
    <span class="kr">forall</span> (<span class="nv">t</span>: T A) (<span class="nv">u</span>: T B) (<span class="nv">v</span>: Vector (plength t) B),
      trav_make t v = u -&gt;
      plength t = plength u.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B) (<span class="nv">v</span> : Vector (plength t) B),
trav_make t v = u -&gt; plength t = plength u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk306" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk306"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">t</span> : T A) (<span class="nv">u</span> : T B) (<span class="nv">v</span> : Vector (plength t) B),
trav_make t v = u -&gt; plength t = plength u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk307" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk307">introv Hmake.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span>trav_make t v = u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">plength t = plength u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk308" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk308"><span class="nb">apply</span> same_shape_implies_plength.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span>trav_make t v = u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">shape t = shape u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="traversablefunctor-v-chk309" style="display: none" type="checkbox"><label class="alectryon-input" for="traversablefunctor-v-chk309"><span class="nb">eapply</span> trav_decomposition_same_shape.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span> -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Traverse_T</var><span class="hyp-type"><b>: </b><span>Traverse T</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>TraversableFunctor T</span></span></span><br><span><var>ToMap_inst</var><span class="hyp-type"><b>: </b><span>Map T</span></span></span><br><span><var>ToBatch_inst</var><span class="hyp-type"><b>: </b><span>ToBatch T</span></span></span><br><span><var>Compat_Map_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_Map_Traverse T</span></span></span><br><span><var>Compat_ToBatch_Traverse0</var><span class="hyp-type"><b>: </b><span>Compat_ToBatch_Traverse T</span></span></span><br><span><var>t</var><span class="hyp-type"><b>: </b><span>T A</span></span></span><br><span><var>u</var><span class="hyp-type"><b>: </b><span>T B</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Vector (plength t) B</span></span></span><br><span><var>Hmake</var><span class="hyp-type"><b>: </b><span>trav_make t v = u</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">trav_make t <span class="nl">?v</span> = u</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">eassumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">uniqueness_lemmas</span>.</span></span></pre>
</div>
</div></body>
</html>
